var cDOM={getElement:function(a){return document.getElementById(a)},registerEvent:function(a,c,b,d){var e=d?function(a){a=a||window.event;b.apply(d,[a])}:b;a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent?a.attachEvent("on"+c,e):a["on"+c]=e},getMouseScreenCoordinates:function(a){var c={x:0,y:0};if(a.pageX||0===a.pageX)c.x=a.pageX-document.body.scrollLeft,c.y=a.pageY-document.body.scrollTop;else if(a.clientX||a.clientY)c.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,
c.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;else if(a.offsetX||0===a.offsetX)c.x=a.offsetX,c.y=a.offsetY;return c},getElementCoordinates:function(a){for(var c={x:0,y:0};a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c.x+=a.offsetLeft-a.scrollLeft,c.y+=a.offsetTop-a.scrollTop,a=a.offsetParent;return c},getMouseElementCoordinates:function(a,c){var b=this.getMouseScreenCoordinates(a),d=this.getElementCoordinates(c);b.x-=d.x;b.y-=d.y;return b},getClientWidth:function(){var a=
800;self.innerWidth?a=self.innerWidth:document.documentElement&&document.documentElement.clientWidth?a=document.documentElement.clientWidth:document.body&&document.body.clientWidth&&(a=document.body.clientWidth);return a},getClientHeight:function(){var a=600;self.innerHeight?a=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientHeight:document.body&&document.body.clientHeight&&(a=document.body.clientHeight);return a},escapeDoubleQuotedInputValue:function(a){return a.replace(/&/g,
"&amp;").replace(/"/g,"&quot;")}};"function"!==typeof Object.create&&function(){var a=function(){};Object.create=function(c){if(1<arguments.length)throw"Second argument not supported";if(null===c)a.prototype=Object.prototype;else{if("object"!==typeof c)throw"Argument must be an object";a.prototype=c}return new a}}();"function"!==typeof Function.deriveFrom&&(Function.prototype.deriveFrom=function(a){this.prototype=Object.create(a.prototype)});
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){for(var b=c||0,d=this.length;b<d;b++)if(this[b]===a)return b;return-1});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
var cLib={deepCopy:function(a){if(null==a||"object"!==typeof a)return a;var c=Object.create(a.constructor.prototype),b;for(b in a)c[b]=this.deepCopy(a[b]);return c},trunc:function(a){return a|0},animate:function(a,c,b,d,e,g){if(b){var l=(new Date).getTime(),k=function(){lCompletionFactor=((new Date).getTime()-l)/b;1>lCompletionFactor?(d.apply(g,[a+lCompletionFactor*(c-a)]),setTimeout(k,10)):e&&e.apply(g,[c])};setTimeout(k,10)}},animate2d:function(a,c,b,d,e,g,l,k){if(e){var m=(new Date).getTime(),
h=function(){lCompletionFactor=((new Date).getTime()-m)/e;1>lCompletionFactor?(g.apply(k,[a+lCompletionFactor*(b-a),c+lCompletionFactor*(d-c)]),setTimeout(h,10)):l&&l.apply(k,[b,d])};setTimeout(h,10)}},textToHTML:function(a){return(new String(a)).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},textToJSONString:function(a){return(new String(a)).replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}},cConfig={version:"1.0.1",options:{}},
cDebug={debug:!1,tag:"",log:function(a,c){!this.debug||""!==this.tag&&this.tag!==a||"undefined"!=typeof console&&console.log(c)}};function cBase(){}cBase.deriveFrom(Object);(function(){})();var eAlign={eNone:0,eClient:1,eTop:2,eBottom:3,eLeft:4,eRight:5,eCenter:6,eCenterVertical:7,eCenterHorizontal:8,eWidth:9,eHeight:10},eTextAlign={eLeft:0,eRight:1,eCenter:2};
function cPanel(a){cBase.call(this,a);this.id=a?a.id?a.id:0:0;cPanel.largestInnerId++;this.innerId=cPanel.largestInnerId;this.instanceId=a?a.instanceId?a.instanceId:0:0;this.className=a?a.className?a.className:"":"";this.element=null;this.visible=a?"undefined"!=typeof a.visible?a.visible:!0:!0;this.shape=a?"undefined"!=typeof a.shape?a.shape:cPanel.cShapeRectangle:cPanel.cShapeRectangle;this.shape!=cPanel.cShapeRectangle&&this.shape!=cPanel.cShapeRoundRect&&this.shape!=cPanel.cShapeCircleRect&&(this.shape=
cPanel.cShapeRectangle);this.align=a?a.align?a.align:eAlign.eNone:eAlign.eNone;this.left=a?a.left?a.left:0:0;this.top=a?a.top?a.top:0:0;this.width=a?a.width?a.width:0:0;this.height=a?a.height?a.height:0:0;this.marginLeft=a?a.margin?a.margin:0:0;this.marginTop=a?a.margin?a.margin:0:0;this.marginRight=a?a.margin?a.margin:0:0;this.marginBottom=a?a.margin?a.margin:0:0;this.borderLeft=a?a.border?a.border:0:0;this.borderTop=a?a.border?a.border:0:0;this.borderRight=a?a.border?a.border:0:0;this.borderBottom=
a?a.border?a.border:0:0;this.paddingLeft=a?a.padding?a.padding:0:0;this.paddingTop=a?a.padding?a.padding:0:0;this.paddingRight=a?a.padding?a.padding:0:0;this.paddingBottom=a?a.padding?a.padding:0:0;this.marginLeft=a?a.marginLeft?a.marginLeft:this.marginLeft:this.marginLeft;this.marginTop=a?a.marginTop?a.marginTop:this.marginTop:this.marginTop;this.marginRight=a?a.marginRight?a.marginRight:this.marginRight:this.marginRight;this.marginBottom=a?a.marginBottom?a.marginBottom:this.marginBottom:this.marginBottom;
this.borderLeft=a?a.borderLeft?a.borderLeft:this.borderLeft:this.borderLeft;this.borderTop=a?a.borderTop?a.borderTop:this.borderTop:this.borderTop;this.borderRight=a?a.borderRight?a.borderRight:this.borderRight:this.borderRight;this.borderBottom=a?a.borderBottom?a.borderBottom:this.borderBottom:this.borderBottom;this.paddingLeft=a?a.paddingLeft?a.paddingLeft:this.paddingLeft:this.paddingLeft;this.paddingTop=a?a.paddingTop?a.paddingTop:this.paddingTop:this.paddingTop;this.paddingRight=a?a.paddingRight?
a.paddingRight:this.paddingRight:this.paddingRight;this.paddingBottom=a?a.paddingBottom?a.paddingBottom:this.paddingBottom:this.paddingBottom;this.backgroundColor=a?a.backgroundColor?a.backgroundColor:"#ffffff":"#ffffff";this.borderColor=a?a.borderColor?a.borderColor:"#000000":"#000000";this.borderRadius=a?a.borderRadius?a.borderRadius:20:20;this.color=a?a.color?a.color:"":"";this.fontSize=a?a.fontSize?a.fontSize:0:0;this.fontBold=a?a.fontBold?a.fontBold:!1:!1;this.noWrap=a?a.noWrap?a.noWrap:!1:!1;
this.textAlign=a?a.textAlign?a.textAlign:eTextAlign.eLeft:eTextAlign.eLeft;this.textSelectable=a?a.textSelectable?a.textSelectable:!1:!1;this.innerHTML=a?a.innerHTML?a.innerHTML:"":"";this.image=a?"undefined"!=typeof a.image?a.image:null:null;this.imageSrc=a?a.imageSrc?a.imageSrc:"":"";this.imageRepeat=a?"undefined"!=typeof a.imageRepeat?a.imageRepeat:cPanel.cImageNoRepeat:cPanel.cImageNoRepeat;this.imageCentered=a?"undefined"!=typeof a.imageCentered?a.imageCentered:!1:!1;this.imageStretch=a?"undefined"!=
typeof a.imageStretch?a.imageStretch:!1:!1;this.imageStretchWidth=a?"undefined"!=typeof a.imageStretchWidth?a.imageStretchWidth:0:0;this.imageStretchHeight=a?"undefined"!=typeof a.imageStretchHeight?a.imageStretchHeight:0:0;this.imageOffsetLeft=a?"undefined"!=typeof a.imageOffsetLeft?a.imageOffsetLeft:0:0;this.imageOffsetTop=a?"undefined"!=typeof a.imageOffsetTop?a.imageOffsetTop:0:0;this.transparencyPercentage=a?a.transparencyPercentage?a.transparencyPercentage:0:0;this.mouseWithin=!1;this.invisibleToMouseEvents=
a?a.invisibleToMouseEvents?a.invisibleToMouseEvents:!1:!1;this.stopBubble=!1;this.onMouseEnter=a?a.onMouseEnter?a.onMouseEnter:this.onMouseEnter:this.onMouseEnter;this.onMouseExit=a?a.onMouseExit?a.onMouseExit:this.onMouseExit:this.onMouseExit;this.onMouseDown=a?a.onMouseDown?a.onMouseDown:this.onMouseDown:this.onMouseDown;this.onMouseMove=a?a.onMouseMove?a.onMouseMove:this.onMouseMove:this.onMouseMove;this.onMouseUp=a?a.onMouseUp?a.onMouseUp:this.onMouseUp:this.onMouseUp;this.cursor=a?a.cursor?a.cursor:
this.cursor:this.cursor;this.onClick=a?a.onClick?a.onClick:this.onClick:this.onClick;this.onScroll=a?a.onScroll?a.onScroll:this.onScroll:this.onScroll;this.onDragStart=a?a.onDragStart?a.onDragStart:this.onDragStart:this.onDragStart;this.onDrag=a?a.onDrag?a.onDrag:this.onDrag:this.onDrag;this.onDragEnd=a?a.onDragEnd?a.onDragEnd:this.onDragEnd:this.onDragEnd;this.onDragReceive=a?a.onDragReceive?a.onDragReceive:this.onDragReceive:this.onDragReceive;this.onTap=a?a.onTap?a.onTap:this.onTap:this.onTap;
this.onRender=a?a.onRender?a.onRender:this.onRender:this.onRender;this.onRenderThis=a?a.onRenderThis?a.onRenderThis:this.onRenderThis:this.onRenderThis;this.properties=a?"undefined"!=typeof a.properties?a.properties:{}:{};this.parentPanel=null;this.panels=[]}cPanel.deriveFrom(cBase);
(function(){cPanel.cShapeRectangle=1;cPanel.cShapeRoundRect=2;cPanel.cShapeCircleRect=3;cPanel.cImageNoRepeat=1;cPanel.cImageRepeat=2;cPanel.cImageRepeatX=3;cPanel.cImageRepeatY=4;cPanel.largestInnerId=0;cPanel.prototype.id=0;cPanel.prototype.instanceId=0;cPanel.prototype.innerId=0;cPanel.prototype.className="";cPanel.prototype.element=null;cPanel.prototype.visible=!0;cPanel.prototype.shape=cPanel.cShapeRectangle;cPanel.prototype.borderRadius=20;cPanel.prototype.align=eAlign.eNone;cPanel.prototype.left=
0;cPanel.prototype.top=0;cPanel.prototype.width=0;cPanel.prototype.height=0;cPanel.prototype.marginLeft=0;cPanel.prototype.marginTop=0;cPanel.prototype.marginRight=0;cPanel.prototype.marginBottom=0;cPanel.prototype.borderLeft=0;cPanel.prototype.borderTop=0;cPanel.prototype.borderRight=0;cPanel.prototype.borderBottom=0;cPanel.prototype.paddingLeft=0;cPanel.prototype.paddingTop=0;cPanel.prototype.paddingRight=0;cPanel.prototype.paddingBottom=0;cPanel.prototype.backgroundColor="#ffffff";cPanel.prototype.borderColor=
"#000000";cPanel.prototype.color="";cPanel.prototype.fontSize=0;cPanel.prototype.fontBold=!1;cPanel.prototype.noWrap=!1;cPanel.prototype.textAlign=eTextAlign.eLeft;cPanel.prototype.textSelectable=!1;cPanel.prototype.innerHTML="";cPanel.prototype.image=null;cPanel.prototype.imageSrc="";cPanel.prototype.imageRepeat=cPanel.cImageNoRepeat;cPanel.prototype.imageCentered=!1;cPanel.prototype.imageStretch=!1;cPanel.prototype.imageStretchWidth=0;cPanel.prototype.imageStretchHeight=0;cPanel.prototype.imageOffsetLeft=
0;cPanel.prototype.imageOffsetTop=0;cPanel.prototype.transparencyPercentage=0;cPanel.prototype.mouseWithin=!1;cPanel.prototype.invisibleToMouseEvents=!1;cPanel.prototype.stopBubble=!1;cPanel.prototype.onMouseEnter=null;cPanel.prototype.onMouseExit=null;cPanel.prototype.onMouseDown=null;cPanel.prototype.onMouseMove=null;cPanel.prototype.onMouseUp=null;cPanel.prototype.cursor=null;cPanel.prototype.onClick=null;cPanel.prototype.onScroll=null;cPanel.prototype.onDragStart=null;cPanel.prototype.onDrag=
null;cPanel.prototype.onDragEnd=null;cPanel.prototype.onDragReceive=null;cPanel.prototype.onTap=null;cPanel.prototype.onRender=null;cPanel.prototype.onRenderThis=null;cPanel.prototype.properties={};cPanel.prototype.parentPanel=null;cPanel.prototype.panels=[];cPanel.prototype.getInnerWidth=function(){return this.width-(this.marginLeft+this.borderLeft+this.paddingLeft+this.paddingRight+this.borderRight+this.marginRight)};cPanel.prototype.getInnerHeight=function(){return this.height-(this.marginTop+
this.borderTop+this.paddingTop+this.paddingBottom+this.borderBottom+this.marginBottom)};cPanel.prototype.recursiveHitTest=function(a,c,b){var d=!1;if(this.visible&&!this.invisibleToMouseEvents){a-=this.left;var e=c-this.top;if(a>=this.marginLeft&&a<=this.width-this.marginRight&&e>=this.marginTop&&e<=this.height-this.marginBottom)for(d=!0,b.push({panel:this,innerX:a,innerY:e}),c=a-(this.marginLeft+this.borderLeft+this.paddingLeft),a=e-(this.marginTop+this.borderTop+this.paddingTop),e=this.panels.length-
1;0<=e&&!this.panels[e].recursiveHitTest(c,a,b);e--);}return d};cPanel.prototype.render=function(a,c,b){this.parentPanel=a;null==this.element&&null!=c&&(this.element=document.createElement("DIV"),this.element.id="pnl_"+this.instanceId+"_"+this.innerId,""!=this.className&&(this.element.className=this.className),c.appendChild(this.element));if(null!=this.element){this.element.style.display=this.visible?"block":"none";this.align==eAlign.eClient?(this.left=b.left,this.top=b.top,this.width=b.width,this.height=
b.height):this.align==eAlign.eTop?(this.left=b.left,this.top=b.top,this.width=b.width,b.top+=this.height,b.height-=this.height,0>b.height&&(b.height=0)):this.align==eAlign.eBottom?(this.left=b.left,this.top=b.top+b.height-this.height,this.width=b.width,b.height-=this.height,0>b.height&&(b.height=0)):this.align==eAlign.eLeft?(this.left=b.left,this.top=b.top,this.height=b.height,b.left+=this.width,b.width-=this.width,0>b.width&&(b.width=0)):this.align==eAlign.eRight?(this.left=b.left+b.width-this.width,
this.top=b.top,this.height=b.height,b.width-=this.width,0>b.width&&(b.width=0)):this.align==eAlign.eCenter?(this.left=(b.width-this.width)/2|0,this.top=(b.height-this.height)/2|0):this.align==eAlign.eCenterVertical?(this.left=(b.width-this.width)/2|0,this.top=0,this.height=b.height):this.align==eAlign.eCenterHorizontal?(this.left=0,this.top=(b.height-this.height)/2|0,this.width=b.width):this.align==eAlign.eWidth?(this.left=b.left,this.width=b.width):this.align==eAlign.eHeight&&(this.top=b.top,this.height=
b.height);this.element.style.left=this.parentPanel&&this.parentPanel.paddingLeft?this.left+this.parentPanel.paddingLeft+"px":this.left+"px";this.element.style.top=this.parentPanel&&this.parentPanel.paddingTop?this.top+this.parentPanel.paddingTop+"px":this.top+"px";a=this.getInnerWidth();c=this.getInnerHeight();0>=a&&(a=1);0>=c&&(c=1);this.element.style.width=a+"px";this.element.style.height=c+"px";if(0<this.marginLeft||0<this.marginTop||0<this.marginRight||0<this.marginBottom)this.marginLeft==this.marginTop&&
this.marginTop==this.marginRight&&this.marginRight==this.marginBottom?this.element.style.margin=this.marginLeft+"px":(0<this.marginLeft&&(this.element.style.marginLeft=this.marginLeft+"px"),0<this.marginTop&&(this.element.style.marginTop=this.marginTop+"px"),0<this.marginRight&&(this.element.style.marginRight=this.marginRight+"px"),0<this.marginBottom&&(this.element.style.marginBottom=this.marginBottom+"px"));if(0<this.borderLeft||0<this.borderTop||0<this.borderRight||0<this.borderBottom)this.element.style.borderStyle=
"solid",this.borderLeft==this.borderTop&&this.borderTop==this.borderRight&&this.borderRight==this.borderBottom?this.element.style.borderWidth=this.borderLeft+"px":(0<this.borderLeft&&(this.element.style.borderLeftWidth=this.borderLeft+"px"),0<this.borderTop&&(this.element.style.borderTopWidth=this.borderTop+"px"),0<this.borderRight&&(this.element.style.borderRightWidth=this.borderRight+"px"),0<this.borderBottom&&(this.element.style.borderBottomWidth=this.borderBottom+"px")),""!=this.borderColor&&
(this.element.style.borderColor=this.borderColor);if(0<this.paddingLeft||0<this.paddingTop||0<this.paddingRight||0<this.paddingBottom)this.paddingLeft==this.paddingTop&&this.paddingTop==this.paddingRight&&this.paddingRight==this.paddingBottom?this.element.style.padding=this.paddingLeft+"px":(0<this.paddingLeft&&(this.element.style.paddingLeft=this.paddingLeft+"px"),0<this.paddingTop&&(this.element.style.paddingTop=this.paddingTop+"px"),0<this.paddingRight&&(this.element.style.paddingRight=this.paddingRight+
"px"),0<this.paddingBottom&&(this.element.style.paddingBottom=this.paddingBottom+"px"));""!=this.backgroundColor&&(this.element.style.backgroundColor=this.backgroundColor);this.shape==cPanel.cShapeRoundRect?(this.element.style.borderRadius=this.borderRadius+"px",this.element.style.MozBorderRadius=this.borderRadius+"px",this.element.style.webkitBorderRadius=this.borderRadius+"px"):this.shape==cPanel.cShapeCircleRect&&(this.width>=this.height?(this.element.style.borderRadius=this.height+"px",this.element.style.MozBorderRadius=
this.height+"px",this.element.style.webkitBorderRadius=this.height+"px"):(this.element.style.borderRadius=this.width+"px",this.element.style.MozBorderRadius=this.width+"px",this.element.style.webkitBorderRadius=this.width+"px"));""!=this.color&&(this.element.style.color=this.color);0<this.fontSize&&(this.element.style.fontSize=this.fontSize+"px");this.fontBold&&(this.element.style.fontWeight="bold");this.noWrap&&(this.element.style.whiteSpace="nowrap");this.textSelectable&&(this.element.style.userSelect=
"text",this.element.style.webkitUserSelect="text",this.element.style.MozUserSelect="text");this.textAlign!=eTextAlign.eLeft&&(this.textAlign==eTextAlign.eRight?this.element.style.textAlign="right":this.textAlign==eTextAlign.eCenter&&(this.element.style.textAlign="center"));this.element.style.cursor=this.cursor?this.cursor:this.onClick?"pointer":"inherit";""!=this.innerHTML&&0==this.panels.length&&(this.element.innerHTML=this.innerHTML);if(null!=this.image||""!=this.imageSrc)if(this.imageStretch)null==
this.elementImage&&(this.elementImage=null!=this.image?this.image:new Image,this.elementImage.id="pnlimg_"+this.instanceId+"_"+this.innerId,this.element.appendChild(this.elementImage)),null==this.image&&(this.elementImage.src=this.imageSrc),this.elementImage.width=a,this.elementImage.height=c;else if(0<this.imageStretchWidth||0<this.imageStretchHeight){if(null==this.elementImage&&(this.elementImage=null!=this.image?this.image:new Image,this.elementImage.id="pnlimg_"+this.instanceId+"_"+this.innerId,
this.element.appendChild(this.elementImage)),null==this.image&&(this.elementImage.src=this.imageSrc),0<this.imageStretchWidth&&(this.elementImage.width=this.imageStretchWidth),0<this.imageStretchHeight&&(this.elementImage.height=this.imageStretchHeight),0!=this.imageOffsetLeft||0!=this.imageOffsetTop)this.elementImage.style.position="absolute",this.elementImage.style.left=this.imageOffsetLeft+"px",this.elementImage.style.top=this.imageOffsetTop+"px"}else this.element.style.backgroundImage=null!=this.image?
'url("'+this.image.src+'")':'url("'+this.imageSrc+'")',this.element.style.backgroundRepeat=this.imageRepeat==cPanel.cImageNoRepeat?"no-repeat":this.imageRepeat==cPanel.cImageRepeat?"repeat":this.imageRepeat==cPanel.cImageRepeatX?"repeat-x":this.imageRepeat==cPanel.cImageRepeatY?"repeat-y":"no-repeat",0!=this.imageOffsetLeft||0!=this.imageOffsetTop?this.element.style.backgroundPosition=this.imageOffsetLeft+"px "+this.imageOffsetTop+"px":this.imageCentered&&(this.element.style.backgroundPosition="center");
0<this.transparencyPercentage&&100>=this.transparencyPercentage&&(a=100-this.transparencyPercentage,this.element.style.opacity=a/100,this.element.style.filter="alpha(opacity="+a+")");a={left:0,top:0,width:this.getInnerWidth(),height:this.getInnerHeight()};for(c=0;c<this.panels.length;c++)this.panels[c].instanceId=this.instanceId,this.panels[c].render(this,this.element,a)}if(this.onRender)if(this.onRenderThis)this.onRender.call(this.onRenderThis);else this.onRender();return this.element};cPanel.prototype.rerender=
function(){this.render(this.parentPanel,null,{left:this.left,top:this.top,width:this.width,height:this.height})};cPanel.prototype.show=function(){this.visible=!0;null!=this.element&&(this.element.style.display=this.visible?"block":"none")};cPanel.prototype.hide=function(){this.visible=!1;null!=this.element&&(this.element.style.display=this.visible?"block":"none")};cPanel.prototype.setAlign=function(a){this.align!=a&&(this.align=a,null!=this.parentPanel?this.parentPanel.rerender():this.rerender())};
cPanel.prototype.setLeft=function(a){this.left!=a&&(this.left=a,this.align!=eAlign.eNone&&null!=this.parentPanel?this.parentPanel.rerender():this.rerender())};cPanel.prototype.setTop=function(a){this.top!=a&&(this.top=a,this.align!=eAlign.eNone&&null!=this.parentPanel?this.parentPanel.rerender():this.rerender())};cPanel.prototype.setWidth=function(a){this.width!=a&&(this.width=a,this.align!=eAlign.eNone&&null!=this.parentPanel?this.parentPanel.rerender():this.rerender())};cPanel.prototype.setHeight=
function(a){this.height!=a&&(this.height=a,this.align!=eAlign.eNone&&null!=this.parentPanel?this.parentPanel.rerender():this.rerender())};cPanel.prototype.setShape=function(a){this.shape!=a&&(this.shape=a,null!=this.element&&(this.shape==cPanel.cShapeRoundRect?(this.element.style.borderRadius=this.borderRadius+"px",this.element.style.MozBorderRadius=this.borderRadius+"px",this.element.style.webkitBorderRadius=this.borderRadius+"px"):this.shape==cPanel.cShapeCircleRect?this.width>=this.height?(this.element.style.borderRadius=
this.height+"px",this.element.style.MozBorderRadius=this.height+"px",this.element.style.webkitBorderRadius=this.height+"px"):(this.element.style.borderRadius=this.width+"px",this.element.style.MozBorderRadius=this.width+"px",this.element.style.webkitBorderRadius=this.width+"px"):(this.element.style.borderRadius="0px",this.element.style.MozBorderRadius="0px",this.element.style.webkitBorderRadius="0px")))};cPanel.prototype.setBorderRadius=function(a){this.borderRadius!=a&&(this.borderRadius=a,null!=
this.element&&this.shape==cPanel.cShapeRoundRect&&(this.element.style.borderRadius=this.borderRadius+"px",this.element.style.MozBorderRadius=this.borderRadius+"px",this.element.style.webkitBorderRadius=this.borderRadius+"px"))};cPanel.prototype.setMarginLeft=function(a){this.marginLeft!=a&&(this.marginLeft=a,this.rerender())};cPanel.prototype.setMarginTop=function(a){this.marginTop!=a&&(this.marginTop=a,this.rerender())};cPanel.prototype.setMarginRight=function(a){this.marginRight!=a&&(this.marginRight=
a,this.rerender())};cPanel.prototype.setMarginBottom=function(a){this.marginBottom!=a&&(this.marginBottom=a,this.rerender())};cPanel.prototype.setBorderLeft=function(a){this.borderLeft!=a&&(this.borderLeft=a,this.rerender())};cPanel.prototype.setBorderTop=function(a){this.borderTop!=a&&(this.borderTop=a,this.rerender())};cPanel.prototype.setBorderRight=function(a){this.borderRight!=a&&(this.borderRight=a,this.rerender())};cPanel.prototype.setBorderBottom=function(a){this.borderBottom!=a&&(this.borderBottom=
a,this.rerender())};cPanel.prototype.setPaddingLeft=function(a){this.paddingLeft!=a&&(this.paddingLeft=a,this.rerender())};cPanel.prototype.setPaddingTop=function(a){this.paddingTop!=a&&(this.paddingTop=a,this.rerender())};cPanel.prototype.setPaddingRight=function(a){this.paddingRight!=a&&(this.paddingRight=a,this.rerender())};cPanel.prototype.setPaddingBottom=function(a){this.paddingBottom!=a&&(this.paddingBottom=a,this.rerender())};cPanel.prototype.setMargin=function(a){this.marginBottom=this.marginRight=
this.marginTop=this.marginLeft=a;this.rerender()};cPanel.prototype.setBorder=function(a){this.borderBottom=this.borderRight=this.borderTop=this.borderLeft=a;this.rerender()};cPanel.prototype.setPadding=function(a){this.paddingBottom=this.paddingRight=this.paddingTop=this.paddingLeft=a;this.rerender()};cPanel.prototype.setBackgroundColor=function(a){this.backgroundColor!=a&&(this.backgroundColor=a,null!=this.element&&(this.element.style.backgroundColor=this.backgroundColor))};cPanel.prototype.setBorderColor=
function(a){this.borderColor!=a&&(this.borderColor=a,null!=this.element&&(this.element.style.borderColor=this.borderColor))};cPanel.prototype.setColor=function(a){this.color!=a&&(this.color=a,null!=this.element&&(this.element.style.color=""!=this.color?this.color:"#000000"))};cPanel.prototype.setFontSize=function(a){this.fontSize!=a&&(this.fontSize=a,this.rerender())};cPanel.prototype.setFontBold=function(a){this.fontBold!=a&&(this.fontBold=a,this.rerender())};cPanel.prototype.setNoWrap=function(a){this.noWrap!=
a&&(this.noWrap=a,this.rerender())};cPanel.prototype.setInnerHTML=function(a){this.innerHTML!=a&&(this.innerHTML=a,null!=this.element&&(this.element.innerHTML=this.innerHTML),this.rerender())};cPanel.prototype.setImageSrc=function(a){this.imageSrc=a;this.rerender()};cPanel.prototype.setImageRepeat=function(a){this.imageRepeat!=a&&(this.imageRepeat=a,this.rerender())};cPanel.prototype.setTransparencyPercentage=function(a){this.transparencyPercentage!=a&&(this.transparencyPercentage=a,null!=this.element&&
(a=100-this.transparencyPercentage,this.element.style.opacity=a/100,this.element.style.filter="alpha(opacity="+a+")"))};cPanel.prototype.appendPanel=function(a){this.panels.push(a);this.rerender()};cPanel.prototype.appendPanels=function(a){for(var c=0;c<a.length;c++)this.panels.push(a[c]);this.rerender()};cPanel.prototype.removePanel=function(a){for(var c=0;c<this.panels.length;c++)if(this.panels[c]===a){this.element&&a.element&&this.element.removeChild(a.element);this.panels.splice(c,1);break}this.rerender()};
cPanel.prototype.removePanelWithoutRerender=function(a){for(var c=0;c<this.panels.length;c++)if(this.panels[c]===a){this.element&&a.element&&this.element.removeChild(a.element);this.panels.splice(c,1);break}};cPanel.prototype.moveUpPanel=function(a){for(var c=0;c<this.panels.length;c++)if(this.panels[c]===a){0<c&&(this.element&&a.element&&this.element.insertBefore(a.element,this.panels[c-1]),a=this.panels[c],this.panels[c]=this.panels[c-1],this.panels[c-1]=a);break}this.rerender()};cPanel.prototype.moveDownPanel=
function(a){for(var c=0;c<this.panels.length;c++)if(this.panels[c]===a){c<this.panels.length-1&&(this.element&&a.element&&this.element.insertBefore(a.element,a.element.nextSibling),a=this.panels[c],this.panels[c]=this.panels[c+1],this.panels[c+1]=a);break}this.rerender()};cPanel.prototype.clearPanels=function(){null!=this.element&&(this.element.innerHTML="");this.panels=[]}})();
function clsModalPanel(a){a=a||{};a.align=a.align?a.align:eAlign.eClient;a.backgroundColor="transparent";cPanel.call(this,a);this.semiTransparantPanel=new cPanel({align:eAlign.eClient,backgroundColor:"#000000",transparencyPercentage:20});this.panels.push(this.semiTransparantPanel);this.contentPanel=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.panels.push(this.contentPanel)}clsModalPanel.deriveFrom(cPanel);
(function(){clsModalPanel.prototype.semiTransparantPanel=null;clsModalPanel.prototype.contentPanel=null})();var gScreen=null;
function cScreen(a,c){cBase.call(this);gScreen=this;this.initialized=!1;cScreen.prototype.lastId++;this.id=cScreen.prototype.lastId;this.app=a;this.container=c;this.fullscreenMode=this.container===document.body?!0:!1;this.panel=new cPanel({align:eAlign.eClient,instanceId:this.id});this.modalPanels=[];this.images=[];this.mouseY=this.mouseX=0;this.mouseDown=!1;this.mouseDownTimeMs=this.mouseDownY=this.mouseDownX=0;this.mousePanelHovers=[];this.mousePanelDowns=[];this.lastTouchUpTimeMs=0;this.dragObject=
null;this.container.style.margin="0";this.container.style.border="0";this.container.style.padding="0";this.container.style.webkitTouchCallout="none";this.container.style.webkitUserSelect="none";this.container.style.MozUserSelect="none";this.container.style["-ms-user-select"]="none";this.container.style.userSelect="none";this.container.style.cursor="default";this.screenContainer=null;this.setup()&&(cDOM.registerEvent(document.body,"mouseout",this.onMouseOutDocument,this),cDOM.registerEvent(window,
"resize",this.onResize,this),this.initialized=!0)}cScreen.deriveFrom(cBase);
(function(){cScreen.prototype.initialized=!1;cScreen.prototype.lastId=0;cScreen.prototype.id=0;cScreen.prototype.app=null;cScreen.prototype.container=null;cScreen.prototype.screenContainer=null;cScreen.prototype.fullscreenMode=!1;cScreen.prototype.width=800;cScreen.prototype.height=600;cScreen.prototype.panel=null;cScreen.prototype.modalPanels=[];cScreen.prototype.images=[];cScreen.prototype.mouseX=0;cScreen.prototype.mouseY=0;cScreen.prototype.mouseDown=!1;cScreen.prototype.mouseDownX=0;cScreen.prototype.mouseDownY=
0;cScreen.prototype.mouseDownTimeMs=0;cScreen.prototype.mousePanel=[];cScreen.prototype.mousePanelHovers=[];cScreen.prototype.mousePanelDowns=[];cScreen.prototype.lastTouchUpTimeMs=0;cScreen.prototype.dragObject=null;cScreen.prototype.setup=function(){this.fullscreenMode?(this.width=cDOM.getClientWidth()-1,this.height=cDOM.getClientHeight()-1):(this.width=this.container.offsetWidth||800,this.height=this.container.offsetHeight||600);if(null==this.screenContainer){this.screenContainer=document.createElement("DIV");
this.screenContainer.id="screen"+this.id;this.screenContainer.className="scrn";this.container.innerHTML="";this.container.appendChild(this.screenContainer);cDOM.registerEvent(this.screenContainer,"mousedown",this.onMouseDownEvent,this);cDOM.registerEvent(this.screenContainer,"mousemove",this.onMouseMoveEvent,this);cDOM.registerEvent(this.screenContainer,"mouseup",this.onMouseUpEvent,this);cDOM.registerEvent(this.screenContainer,"touchstart",this.onTouchDownEvent,this);cDOM.registerEvent(this.screenContainer,
"touchmove",this.onTouchMoveEvent,this);cDOM.registerEvent(this.screenContainer,"touchend",this.onTouchUpEvent,this);cDOM.registerEvent(this.screenContainer,"touchcancel",this.onTouchCancelEvent,this);var a=0<=navigator.userAgent.indexOf("Firefox")?"DOMMouseScroll":"mousewheel";cDOM.registerEvent(document,a,this.onScroll,this)}this.screenContainer.style.width=this.width+"px";this.screenContainer.style.height=this.height+"px";this.panel.render(null,this.screenContainer,{left:0,top:0,width:this.width,
height:this.height});for(a=0;a<this.modalPanels.length;a++)this.modalPanels[a].render(null,this.screenContainer,{left:0,top:0,width:this.width,height:this.height});return!0};cScreen.prototype.loadImages=function(a){for(var c=0;c<a.length;c++){for(var b=a[c],d=!1,e=0;e<this.images.length;e++)if(this.images[e].id==b.id){d=!0;break}d||(b.img=new Image,b.loaded=!1,b.error=!1,function(a){a.img.onload=function(){0<a.img.width&&0<a.img.height?a.loaded=!0:a.error=!0};a.img.onerror=function(){a.error=!0};
a.img.onabort=function(){a.error=!0}}(b),b.img.id="i"+this.id+"_"+(c+1),b.img.src=b.src,0<b.img.width&&0<b.img.height&&(b.loaded=!0),this.images.push(b))}};cScreen.prototype.getImage=function(a){for(var c=0;c<this.images.length;c++){var b=this.images[c];if(b.id==a)return b}return null};cScreen.prototype.getImageClone=function(a){for(var c=0;c<this.images.length;c++){var b=this.images[c];if(b.id==a){if(b.img.cloneNode)return b.img.cloneNode();a=new Image;a.src=b.img.src;return a}}return null};cScreen.prototype.waitForResources=
function(a,c,b){for(var d=!0,e=0;e<this.images.length;e++){var g=this.images[e];if(g.img.complete||0<g.img.width&&0<g.img.height)g.loaded=!0;else if(!g.loaded&&!g.error){d=!1;break}}var l=b||0;l++;if(d||50<=l)c.call(a);else{var k=this;setTimeout(function(){k.waitForResources(a,c,l)},100)}};cScreen.prototype.onResize=function(){if(this.app.onPreResize)this.app.onPreResize();this.setup();this.app.onResize&&(this.app.onResize(),this.setup());if(this.app.onPostResize)this.app.onPostResize()};cScreen.prototype.pushModalPanel=
function(){var a=new clsModalPanel({instanceId:this.id+1E4*(this.modalPanels.length+1)});this.modalPanels.push(a);this.setup();this.clearHovers();return a.contentPanel};cScreen.prototype.popModalPanel=function(){if(0<this.modalPanels.length){var a=this.modalPanels[this.modalPanels.length-1];this.screenContainer&&a.element&&this.screenContainer.removeChild(a.element);this.modalPanels.splice(this.modalPanels.length-1,1)}this.setup();this.clearHovers()};cScreen.prototype.updateHovers=function(){var a=
[];0<this.modalPanels.length?this.modalPanels[this.modalPanels.length-1].recursiveHitTest(this.mouseX,this.mouseY,a):this.panel.recursiveHitTest(this.mouseX,this.mouseY,a);for(var c,b=0;b<this.mousePanelHovers.length;b++){c=this.mousePanelHovers[b];for(var d=0;d<a.length;d++)if(a[d].panel===c.panel){c=null;break}if(null!=c&&(c.panel.mouseWithin=!1,c.panel.onMouseExit))c.panel.onMouseExit()}for(b=0;b<a.length;b++){c=a[b];for(d=0;d<this.mousePanelHovers.length;d++)if(this.mousePanelHovers[d].panel===
c.panel){c=null;break}if(null!=c&&(c.panel.mouseWithin=!0,c.panel.onMouseEnter))c.panel.onMouseEnter()}this.mousePanelHovers=a};cScreen.prototype.clearHovers=function(){for(var a,c=0;c<this.mousePanelHovers.length;c++)if(a=this.mousePanelHovers[c],a.panel.mouseWithin=!1,a.panel.onMouseExit)a.panel.onMouseExit();this.mousePanelHovers=[];this.mousePanelDowns=[]};cScreen.prototype.onMouseDown=function(a){if(!this.mouseDown){a=cDOM.getMouseElementCoordinates(a,this.panel.element);this.mouseX=a.x;this.mouseY=
a.y;this.mouseDown=!0;this.mouseDownX=this.mouseX;this.mouseDownY=this.mouseY;this.mouseDownTimeMs=(new Date).getTime();this.updateHovers();this.dragObject=null;this.app.postEdits&&this.app.postEdits.apply(this.app,[]);for(a=this.mousePanelHovers.length-1;0<=a&&(!this.mousePanelHovers[a].panel.onMouseDown||(this.mousePanelHovers[a].panel.stopBubble=!1,this.mousePanelHovers[a].panel.onMouseDown(this.mousePanelHovers[a].innerX,this.mousePanelHovers[a].innerY,this.app,this),!this.mousePanelHovers[a].panel.stopBubble));a--);
this.app.onMouseDown&&this.app.onMouseDown.apply(this.app,[]);if(null!=this.dragObject&&(this.dragObject.startMouseX=this.mouseX,this.dragObject.startMouseY=this.mouseY,this.dragObject.startPanelX=0,this.dragObject.startPanelY=0,this.dragObject.panel&&(this.dragObject.startPanelX=this.dragObject.panel.left,this.dragObject.startPanelY=this.dragObject.panel.top,this.dragObject.panel.onDragStart)))this.dragObject.panel.onDragStart(this.app,this);this.mousePanelDowns=[];for(a=0;a<this.mousePanelHovers.length;a++)this.mousePanelDowns.push(this.mousePanelHovers[a])}};
cScreen.prototype.onMouseMove=function(a){a=cDOM.getMouseElementCoordinates(a,this.screenContainer);if(0!=a.x||0!=a.y){this.mouseX=a.x;this.mouseY=a.y;this.updateHovers();if(null!=this.dragObject&&this.dragObject.panel&&(this.dragObject.panel.setLeft(this.dragObject.startPanelX+(this.mouseX-this.dragObject.startMouseX)),this.dragObject.panel.setTop(this.dragObject.startPanelY+(this.mouseY-this.dragObject.startMouseY)),this.dragObject.panel.onDrag))this.dragObject.panel.onDrag(this.app,this);for(a=
0;a<this.mousePanelDowns.length;a++){for(var c=!1,b=0;b<this.mousePanelHovers.length;b++)if(this.mousePanelHovers[b].panel===this.mousePanelDowns[a].panel){c=!0;break}if(!c){if(this.mousePanelDowns[a].panel.onMouseUp)this.mousePanelDowns[a].panel.onMouseUp(this.mousePanelDowns[a].innerX,this.mousePanelDowns[a].innerY,this.app,this);this.mousePanelDowns.splice(a,1);a--}}for(a=this.mousePanelHovers.length-1;0<=a&&(!this.mousePanelHovers[a].panel.onMouseMove||(this.mousePanelHovers[a].panel.stopBubble=
!1,this.mousePanelHovers[a].panel.onMouseMove(this.mousePanelHovers[a].innerX,this.mousePanelHovers[a].innerY,this.app,this),!this.mousePanelHovers[a].panel.stopBubble));a--);this.app.onMouseMove&&this.app.onMouseMove.apply(this.app,[])}};cScreen.prototype.onMouseUp=function(){if(this.mouseDown){this.mouseDown=!1;var a=200>(new Date).getTime()-this.mouseDownTimeMs&&10>=Math.abs(this.mouseDownX-this.mouseX)&&10>=Math.abs(this.mouseDownY-this.mouseY);this.updateHovers();if(null!=this.dragObject){for(var c=
this.mousePanelHovers.length-1;0<=c;c--)if(this.mousePanelHovers[c].panel.onDragReceive)this.mousePanelHovers[c].panel.onDragReceive(this.mousePanelHovers[c].innerX,this.mousePanelHovers[c].innerY,this.app,this);if(this.dragObject.panel&&this.dragObject.panel.onDragEnd)this.dragObject.panel.onDragEnd(this.app,this)}else{for(c=this.mousePanelHovers.length-1;0<=c;c--)if(this.mousePanelHovers[c].panel.onClick){for(var b=!1,d=0;d<this.mousePanelHovers.length&&!b;d++)this.mousePanelDowns[d].panel===this.mousePanelHovers[c].panel&&
(b=!0);if(b&&(this.mousePanelHovers[c].panel.stopBubble=!1,this.mousePanelHovers[c].panel.onClick(this.mousePanelHovers[c].innerX,this.mousePanelHovers[c].innerY,this.app,this),this.mousePanelHovers[c].panel.stopBubble))break}for(c=this.mousePanelHovers.length-1;0<=c&&(!this.mousePanelHovers[c].panel.onMouseUp||(this.mousePanelHovers[c].panel.stopBubble=!1,this.mousePanelHovers[c].panel.onMouseUp(this.mousePanelHovers[c].innerX,this.mousePanelHovers[c].innerY,this.app,this),!this.mousePanelHovers[c].panel.stopBubble));c--);
this.app.onMouseUp&&this.app.onMouseUp.apply(this.app,[])}this.dragObject=null;if(a){for(c=this.mousePanelHovers.length-1;0<=c&&(!this.mousePanelHovers[c].panel.onTap||(this.mousePanelHovers[c].panel.stopBubble=!1,this.mousePanelHovers[c].panel.onTap(this.mousePanelHovers[c].innerX,this.mousePanelHovers[c].innerY,this.app,this),!this.mousePanelHovers[c].panel.stopBubble));c--);this.app.onTap&&this.app.onTap.apply(this.app,[])}this.updateHovers()}this.mousePanelDowns=[]};cScreen.prototype.onMouseDownEvent=
function(a){if(300<(new Date).getTime()-this.lastTouchUpTimeMs)this.onMouseDown(a)};cScreen.prototype.onMouseMoveEvent=function(a){this.onMouseMove(a)};cScreen.prototype.onMouseUpEvent=function(a){this.onMouseUp(a)};cScreen.prototype.onTouchDownEvent=function(a){if(a.changedTouches)this.onMouseDown(a.changedTouches[0]);else this.onMouseDown(a.touches[0]);a.touches?"textarea"==a.touches[0].target.tagName.toLowerCase()?a.stopPropagation&&a.stopPropagation():a.preventDefault&&a.preventDefault():a.preventDefault&&
a.preventDefault()};cScreen.prototype.onTouchMoveEvent=function(a){if(a.changedTouches)this.onMouseMove(a.changedTouches[0]);else this.onMouseMove(a.touches[0])};cScreen.prototype.onTouchUpEvent=function(a){this.lastTouchUpTimeMs=(new Date).getTime();this.onMouseUp();this.clearHovers()};cScreen.prototype.onTouchCancelEvent=function(a){this.lastTouchUpTimeMs=(new Date).getTime()};cScreen.prototype.onScroll=function(a){var c=0;a||(a=window.event);a.wheelDelta?c=a.wheelDelta/120:a.detail&&(c=-a.detail/
3);this.updateHovers();if(c){for(a=this.mousePanelHovers.length-1;0<=a;a--)if(this.mousePanelHovers[a].panel.onScroll)this.mousePanelHovers[a].panel.onScroll(c,this.app,this);this.app.onScroll&&this.app.onScroll.apply(this.app,[c])}};cScreen.prototype.onMouseOutDocument=function(a){a=cDOM.getMouseElementCoordinates(a,this.screenContainer);if(0!=a.x||0!=a.y)if(0>a.x||0>a.y||a.x>this.screenContainer.width||a.y>this.screenContainer.height)this.mouseX=a.x,this.mouseY=a.y,this.clearHovers()}})();
function cApp(a){cBase.call(this)}cApp.deriveFrom(cBase);(function(){cApp.prototype.screen=null;cApp.prototype.onPreResize=null;cApp.prototype.onResize=null;cApp.prototype.onPostResize=null;cApp.prototype.onMouseDown=null;cApp.prototype.onMouseMove=null;cApp.prototype.onMouseUp=null})();var eTabMenuAlign={eAutoShortest:0,eTop:1,eLeft:2};
function cTabMenuPanel(a){cPanel.call(this,a);this.tabMenuAlign=a?"undefined"!=typeof a.tabMenuAlign?a.tabMenuAlign:eTabMenuAlign.eAutoShortest:eTabMenuAlign.eAutoShortest;this.tabMenuAlignSet=eTabMenuAlign.eTop;this.tabWidth=160;this.maxTabWidth=a?a.maxTabWidth?a.maxTabWidth:160:160;this.marginWidth=10;this.minMarginWidth=2;var c=eAlign.eTop,b=eAlign.eLeft;this.tabMenuAlign==eTabMenuAlign.eTop?(c=eAlign.eTop,this.tabMenuAlignSet=eTabMenuAlign.eTop,b=eAlign.eLeft):this.tabMenuAlign==eTabMenuAlign.eLeft&&
(c=eAlign.eLeft,this.tabMenuAlignSet=eTabMenuAlign.eLeft,b=eAlign.eTop);this.menuContainer=new cPanel({align:c,width:100,height:100,backgroundColor:this.backgroundColor});this.panels.push(this.menuContainer);this.rootClientPanel=new cPanel({align:eAlign.eClient,margin:10,marginRight:11,marginBottom:11,border:0,padding:10,backgroundColor:this.backgroundColor,color:a?a.color?a.color:"":"",innerHTML:a?a.panelHTML?a.panelHTML:"":""});this.panels.push(this.rootClientPanel);var d=this;this.menuTabs=[];
this.tabPanels=[];if(a&&a.tabs&&0<a.tabs.length)for(c=0;c<a.tabs.length;c++){var e=a.tabs[c],g=new cPanel({align:eAlign.eClient,margin:10,marginRight:11,marginBottom:11,border:0,padding:16,color:e.color?e.color:"#000000",backgroundColor:e.backgroundColor?e.backgroundColor:"#cccccc",borderRadius:10,shape:cPanel.cShapeRoundRect,visible:!1});this.panels.push(g);this.tabPanels.push(g);e=new cPanel({id:e.id,align:b,width:100,height:100,margin:10,border:0,padding:10,color:e.color?e.color:"#000000",backgroundColor:e.backgroundColor?
e.backgroundColor:"#cccccc",image:e.image?e.image:null,imageSrc:e.imageSrc?e.imageSrc:"",imageStretch:!0,noWrap:!0,innerHTML:e.caption?e.caption:"",borderRadius:10,shape:cPanel.cShapeRoundRect,onClick:function(){this.tabPanel.visible?(d.rootClientPanel.show(),d.selectedTabIndex=-1,d.selectOverlayPanel.hide(),d.selectOverlayPanelCorner.hide(),d.updateCloseButton(),cLib.animate(0,70,120,function(a){this.tabPanel.setTransparencyPercentage(a|0)},function(){this.tabPanel.hide();this.tabPanel.setTransparencyPercentage(0);
d.updateVisibility(this.tabPanel,!1)},this)):(0<=d.selectedTabIndex&&(d.selectOverlayPanel.hide(),d.selectOverlayPanelCorner.hide()),this.tabPanel.setTransparencyPercentage(100),this.tabPanel.show(),d.updateVisibility(this.tabPanel,!0),cLib.animate(100,30,120,function(a){this.tabPanel.setTransparencyPercentage(a|0);0<=d.selectedTabIndex&&d.tabPanels[d.selectedTabIndex].setTransparencyPercentage(100-(a|0))},function(){0<=d.selectedTabIndex&&(d.tabPanels[d.selectedTabIndex].hide(),d.tabPanels[d.selectedTabIndex].setTransparencyPercentage(0),
d.updateVisibility(d.tabPanels[d.selectedTabIndex],!1));this.tabPanel.setTransparencyPercentage(0);d.selectedTabIndex=this.tabIndex;d.selectOverlayPanel.setBackgroundColor(this.backgroundColor);d.selectOverlayPanelCorner.setBackgroundColor(this.backgroundColor);d.updateOverlayPanel();d.updateCloseButton();d.selectOverlayPanel.setTransparencyPercentage(100);d.selectOverlayPanelCorner.setTransparencyPercentage(100);d.selectOverlayPanel.show();d.selectOverlayPanelCorner.show();d.rootClientPanel.hide();
cLib.animate(100,30,80,function(a){d.selectOverlayPanel.setTransparencyPercentage(a|0);d.selectOverlayPanelCorner.setTransparencyPercentage(a|0)},function(){d.selectOverlayPanel.setTransparencyPercentage(0);d.selectOverlayPanelCorner.setTransparencyPercentage(0)},this)},this))}});e.tabPanel=g;e.tabIndex=c;this.menuContainer.panels.push(e);this.menuTabs.push(e)}this.selectedTabIndex=-1;this.selectOverlayPanel=new cPanel({align:eAlign.eNone,margin:0,border:0,padding:0,visible:!1});this.panels.push(this.selectOverlayPanel);
this.selectOverlayPanelCorner=new cPanel({align:eAlign.eNone,margin:0,border:0,padding:0,visible:!1});this.panels.push(this.selectOverlayPanelCorner);this.closePanel=new cPanel({align:eAlign.eNone,left:20,top:20,width:60,height:60,margin:0,border:0,padding:0,backgroundColor:"transparent",visible:!1,image:a?a.closeImage?a.closeImage:null:null,imageStretch:!0,onClick:function(){if(0<=d.selectedTabIndex){var a=d.menuTabs[d.selectedTabIndex],c=d.tabPanels[d.selectedTabIndex];d.rootClientPanel.show();
d.selectedTabIndex=-1;d.selectOverlayPanel.hide();d.selectOverlayPanelCorner.hide();d.updateCloseButton();cLib.animate(0,70,120,function(a){c.setTransparencyPercentage(a|0)},function(){c.hide();c.setTransparencyPercentage(0);d.updateVisibility(c,!1)},a)}}});this.panels.push(this.closePanel)}cTabMenuPanel.deriveFrom(cPanel);
(function(){cTabMenuPanel.prototype.tabMenuAlign=eTabMenuAlign.eAutoShortest;cTabMenuPanel.prototype.tabMenuAlignSet=eTabMenuAlign.eTop;cTabMenuPanel.prototype.tabWidth=160;cTabMenuPanel.prototype.maxTabWidth=160;cTabMenuPanel.prototype.marginWidth=10;cTabMenuPanel.prototype.minMarginWidth=2;cTabMenuPanel.prototype.menuContainer=null;cTabMenuPanel.prototype.rootClientPanel=null;cTabMenuPanel.prototype.menuTabs=[];cTabMenuPanel.prototype.tabPanels=[];cTabMenuPanel.prototype.selectedTabIndex=-1;cTabMenuPanel.prototype.selectOverlayPanel=
null;cTabMenuPanel.prototype.selectOverlayPanelCorner=null;cTabMenuPanel.prototype.closePanel=null;cTabMenuPanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);if(null!=this.element){var d=!1;this.tabMenuAlign==eTabMenuAlign.eAutoShortest&&(this.width>this.height?(this.tabMenuAlignSet=eTabMenuAlign.eLeft,this.menuContainer.align!=eAlign.eLeft&&(this.menuContainer.align=eAlign.eLeft,d=!0)):(this.tabMenuAlignSet=eTabMenuAlign.eTop,this.menuContainer.align!=eAlign.eTop&&(this.menuContainer.align=
eAlign.eTop,d=!0)));if(0<this.menuTabs.length){this.tabWidth=160;this.marginWidth=this.tabWidth/14|0;var e=this.menuTabs.length;4>=e&&(e=5);this.tabMenuAlignSet==eTabMenuAlign.eLeft?(this.tabWidth=this.menuContainer.getInnerHeight()/(e+0.2)|0,this.tabWidth>this.maxTabWidth&&(this.tabWidth=this.maxTabWidth),this.menuContainer.width!=this.tabWidth&&(this.menuContainer.width=this.tabWidth,d=!0),this.marginWidth=this.tabWidth/14|0,this.marginWidth<this.minMarginWidth&&(this.marginWidth=this.minMarginWidth),
0<=this.selectedTabIndex&&this.updateOverlayPanel()):this.tabMenuAlignSet==eTabMenuAlign.eTop&&(this.tabWidth=this.menuContainer.getInnerWidth()/(e+0.2)|0,this.tabWidth>this.maxTabWidth&&(this.tabWidth=this.maxTabWidth),this.menuContainer.height!=this.tabWidth&&(this.menuContainer.height=this.tabWidth,d=!0),this.marginWidth=this.tabWidth/14|0,this.marginWidth<this.minMarginWidth&&(this.marginWidth=this.minMarginWidth),this.marginWidth=this.tabWidth/14|0,this.marginWidth<this.minMarginWidth&&(this.marginWidth=
this.minMarginWidth),0<=this.selectedTabIndex&&this.updateOverlayPanel());for(e=0;e<this.menuTabs.length;e++){var g=this.menuTabs[e];this.tabMenuAlignSet==eTabMenuAlign.eLeft?(g.align!=eAlign.eTop&&(g.align=eAlign.eTop,d=!0),g.height!=this.tabWidth&&(g.height=this.tabWidth,d=!0)):this.tabMenuAlignSet==eTabMenuAlign.eTop&&(g.align!=eAlign.eLeft&&(g.align=eAlign.eLeft,d=!0),g.width!=this.tabWidth&&(g.width=this.tabWidth,d=!0));g.marginLeft!=this.marginWidth&&(g.marginLeft=this.marginWidth,g.marginTop=
this.marginWidth,g.marginRight=this.marginWidth,g.marginBottom=this.marginWidth,g.paddingLeft=this.marginWidth,g.paddingTop=this.marginWidth,g.paddingRight=this.marginWidth,g.paddingBottom=this.marginWidth,g.borderRadius=this.marginWidth,g.tabPanel.borderRadius=this.marginWidth,d=!0)}for(e=0;e<this.tabPanels.length;e++)g=this.tabPanels[e],g.marginLeft!=this.marginWidth&&(g.marginLeft=this.marginWidth,g.marginTop=this.marginWidth,g.marginRight=this.marginWidth+1,g.marginBottom=this.marginWidth+1,g.paddingLeft=
1.6*this.marginWidth|0,g.paddingTop=1.6*this.marginWidth|0,g.paddingRight=1.6*this.marginWidth|0,g.paddingBottom=1.6*this.marginWidth|0,g.borderRadius=this.marginWidth,d=!0);this.rootClientPanel.marginLeft!=this.marginWidth&&(this.rootClientPanel.marginLeft=this.marginWidth,this.rootClientPanel.marginTop=this.marginWidth,this.rootClientPanel.marginRight=this.marginWidth+1,this.rootClientPanel.marginBottom=this.marginWidth+1,this.rootClientPanel.padding=this.marginWidth,d=!0);this.updateCloseButton()}d&&
cPanel.prototype.render.call(this,a,c,b)}};cTabMenuPanel.prototype.updateOverlayPanel=function(){0<=this.selectedTabIndex&&(this.tabMenuAlignSet==eTabMenuAlign.eLeft?(this.selectOverlayPanel.setLeft(this.tabWidth-this.marginWidth-this.marginWidth),this.selectOverlayPanel.setTop(this.selectedTabIndex*this.tabWidth+this.marginWidth+this.marginWidth),this.selectOverlayPanel.setWidth(3*this.marginWidth),this.selectOverlayPanel.setHeight(this.tabWidth-2*this.marginWidth-this.marginWidth),this.selectOverlayPanelCorner.setLeft(this.tabWidth-
this.marginWidth-this.marginWidth),this.selectOverlayPanelCorner.setTop(this.selectedTabIndex*this.tabWidth+this.marginWidth),0==this.selectedTabIndex?this.selectOverlayPanelCorner.setWidth(4*this.marginWidth):this.selectOverlayPanelCorner.setWidth(3*this.marginWidth),this.selectOverlayPanelCorner.setHeight(this.marginWidth)):(this.selectOverlayPanel.setLeft(this.selectedTabIndex*this.tabWidth+this.marginWidth+this.marginWidth),this.selectOverlayPanel.setTop(this.tabWidth-this.marginWidth-this.marginWidth),
this.selectOverlayPanel.setWidth(this.tabWidth-2*this.marginWidth-this.marginWidth),this.selectOverlayPanel.setHeight(3*this.marginWidth),this.selectOverlayPanelCorner.setLeft(this.selectedTabIndex*this.tabWidth+this.marginWidth),this.selectOverlayPanelCorner.setTop(this.tabWidth-this.marginWidth-this.marginWidth),this.selectOverlayPanelCorner.setWidth(this.marginWidth),0==this.selectedTabIndex?this.selectOverlayPanelCorner.setHeight(4*this.marginWidth):this.selectOverlayPanelCorner.setHeight(3*this.marginWidth)))};
cTabMenuPanel.prototype.updateCloseButton=function(){0<=this.selectedTabIndex?(this.tabMenuAlignSet==eTabMenuAlign.eLeft?(this.closePanel.setLeft(this.tabWidth-2*this.marginWidth),this.closePanel.setTop(2*this.marginWidth+this.selectedTabIndex*(this.tabWidth+0))):(this.closePanel.setLeft(2*this.marginWidth+this.selectedTabIndex*(this.tabWidth+0)),this.closePanel.setTop(this.tabWidth-2*this.marginWidth)),this.closePanel.setWidth(this.tabWidth/4|0),this.closePanel.setHeight(this.tabWidth/4|0),this.closePanel.visible||
this.closePanel.show()):this.closePanel.visible&&this.closePanel.hide()};cTabMenuPanel.prototype.updateVisibility=function(a,c){if(c){if(a.onVisible)if(a.onVisibleCallee)a.onVisible.apply(a.onVisibleCallee,[]);else a.onVisible()}else if(a.onInvisible)if(a.onInvisibleCallee)a.onInvisible.apply(a.onInvisibleCallee,[]);else a.onInvisible()};cTabMenuPanel.prototype.getPanelById=function(a){for(var c=null,b=0;b<this.menuTabs.length;b++){var d=this.menuTabs[b];if(d.id==a){c=d.tabPanel;break}}return c};
cTabMenuPanel.prototype.closeMenus=function(){if(0<=this.selectedTabIndex){var a=this,c=this.menuTabs[this.selectedTabIndex],b=this.tabPanels[this.selectedTabIndex];this.rootClientPanel.show();this.selectedTabIndex=-1;this.selectOverlayPanel.hide();this.selectOverlayPanelCorner.hide();this.updateCloseButton();cLib.animate(0,70,120,function(a){b.setTransparencyPercentage(a|0)},function(){b.hide();b.setTransparencyPercentage(0);a.updateVisibility(b,!1)},c)}};cTabMenuPanel.prototype.selectTabIndex=function(a){this.selectedTabIndex!=
a&&(a=this.menuTabs[a],a.onClick.call(a))}})();function cIFramePanel(a){cPanel.call(this,a);this.iFrameElement=null;this.iFrameHTML=a?"undefined"!=typeof a.iFrameHTML?a.iFrameHTML:"":"";this.iFrameHTMLWritten="";this.supportScroll=a?"undefined"!=typeof a.supportScroll?a.supportScroll:!0:!0;this.zoom=a?0<a.zoom?a.zoom:1:1}cIFramePanel.deriveFrom(cPanel);
(function(){cIFramePanel.prototype.iFrameElement=null;cIFramePanel.prototype.iFrameHTML="";cIFramePanel.prototype.iFrameHTMLWritten="";cIFramePanel.prototype.supportScroll=!0;cIFramePanel.prototype.zoom=1;cIFramePanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);if(null!=this.element){if(null==this.iFrameElement){this.iFrameElement=document.createElement("iframe");this.iFrameElement.id="pnl_"+this.instanceId+"_"+this.innerId+"_iframe";this.iFrameElement.style.border="0px";
this.iFrameElement.style.margin="0px";this.iFrameElement.style.padding="0px";this.supportScroll||(this.iFrameElement.setAttribute&&this.iFrameElement.setAttribute("scrolling","no"),this.iFrameElement.style.overflow="hidden");if(0.99>this.zoom||1.01<this.zoom)this.iFrameElement.style.MozTransform="scale("+this.zoom+")",this.iFrameElement.style.MozTransformOrigin="0 0",this.iFrameElement.style.OTransform="scale("+this.zoom+")",this.iFrameElement.style.OTransformOrigin="0 0",this.iFrameElement.style.WebkitTransform=
"scale("+this.zoom+")",this.iFrameElement.style.WebkitTransformOrigin="0 0","undefined"!=typeof this.iFrameElement.style.transform?(this.iFrameElement.style.transform="scale("+this.zoom+")",this.iFrameElement.style.transformOrigin="0 0"):"undefined"!=typeof this.iFrameElement.style.msTransform?(this.iFrameElement.style.msTransform="scale("+this.zoom+")",this.iFrameElement.style.msTransformOrigin="0 0"):"undefined"!=typeof this.iFrameElement.style.msFilter?this.iFrameElement.style.msFilter="progid:DXImageTransform.Microsoft.Matrix(M11="+
this.zoom+", M12=0, M21=0, M22="+this.zoom+", SizingMethod='auto expand')":"undefined"!=typeof this.iFrameElement.style.filter&&(this.iFrameElement.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+this.zoom+", M12=0, M21=0, M22="+this.zoom+", SizingMethod='auto expand')");this.element.appendChild(this.iFrameElement)}0.99>this.zoom||1.01<this.zoom?(this.iFrameElement.style.width=((this.getInnerWidth()-0*this.zoom)/this.zoom|0)+"px",this.iFrameElement.style.height=((this.getInnerHeight()-
0*this.zoom)/this.zoom|0)+"px"):(this.iFrameElement.style.width=this.getInnerWidth()+"px",this.iFrameElement.style.height=this.getInnerHeight()+"px");this.iFrameHTML!=this.iFrameHTMLWritten&&(this.iFrameElement.src="about:blank",a=this.getDocument(),a.open(),a.write(""!=this.iFrameHTML?this.iFrameHTML:""),a.close(),this.iFrameHTMLWritten=this.iFrameHTML)}};cIFramePanel.prototype.getDocument=function(){if(null!=this.iFrameElement){var a=this.iFrameElement.contentWindow||this.iFrameElement.contentDocument;
a.document&&(a=a.document);return a}return null};cIFramePanel.prototype.getWindow=function(){return null!=this.iFrameElement?this.iFrameElement.contentWindow:null};cIFramePanel.prototype.setContent=function(a){this.iFrameHTML=a;null!=this.element&&null!=this.iFrameElement&&(this.iFrameHTML=a,this.iFrameHTML!=this.iFrameHTMLWritten&&(this.iFrameElement.src="about:blank",a=this.getDocument(),a.open("text/html","replace"),a.write(this.iFrameHTML),a.close(),this.iFrameHTMLWritten=this.iFrameHTML))};cIFramePanel.prototype.setCSS=
function(a){var c=this.getDocument().getElementsByTagName("head").item(0);if(c){for(var b=-1,d=0;d<c.children.length;d++){var e=c.children[d];"STYLE"==e.nodeName&&(b=d)}0<b&&(e=c.children[b],e.innerHTML=a)}};cIFramePanel.prototype.setBody=function(a){if(null!=this.element&&null!=this.iFrameElement){var c=this.getDocument().body;c&&(c.innerHTML=a?a:"")}};cIFramePanel.prototype.getBody=function(){if(null!=this.element&&null!=this.iFrameElement){var a=this.getDocument().body;if(a)return a.innerHTML}return""}})();
function cAutoSizePanel(a){cPanel.call(this,a)}cAutoSizePanel.deriveFrom(cPanel);
(function(){cAutoSizePanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);if(null!=this.element){b=c=!1;this.align==eAlign.eNone?b=c=!0:this.align!=eAlign.eClient&&(this.align==eAlign.eTop?b=!0:this.align==eAlign.eBottom?b=!0:this.align==eAlign.eLeft?c=!0:this.align==eAlign.eRight?c=!0:this.align==eAlign.eCenter?b=c=!0:this.align==eAlign.eWidth?b=!0:this.align==eAlign.eHeight&&(c=!0));var d=this.width,e=this.height;if(c){for(c=d=0;c<this.panels.length;c++){var g=this.panels[c].left+
this.panels[c].width;g>d&&(d=g)}d+=this.marginLeft+this.borderLeft+this.paddingLeft+this.paddingRight+this.borderRight+this.marginRight}if(b){for(c=b=0;c<this.panels.length;c++)e=this.panels[c].top+this.panels[c].height,e>b&&(b=e);e=b+(this.marginTop+this.borderTop+this.paddingTop+this.paddingBottom+this.borderBottom+this.marginBottom)}if(d!=this.width||e!=this.height)if(this.width=d,this.height=e,null!=a){for(;null!=a.parentPanel;)a=a.parentPanel;a.rerender()}}}})();
function cScrollboxPanel(a){cPanel.call(this,a);var c=this;this.boxBackgroundColor=a?a.boxBackgroundColor?a.boxBackgroundColor:"#ffffff":"#ffffff";this.scrollBarHandleColor=a?a.scrollBarHandleColor?a.scrollBarHandleColor:"#cccccc":"#cccccc";this.autoHideScrollbar=a?a.autoHideScrollbar?a.autoHideScrollbar:!1:!1;this.panelBoxRoundedBorder=a?!1===a.panelBoxRoundedBorder?a.panelBoxRoundedBorder:!0:!0;this.onScroll=function(a){c.panelScrollBarHandle.setTop(c.panelScrollBarHandle.top-25*a);c.panelBox.setTop(-(c.panelScrollBarHandle.top*
(c.panelBox.height-c.panelViewport.getInnerHeight())/(c.panelScrollBar.getInnerHeight()-c.panelScrollBarHandle.height))|0);c.rerender()};this.panelScrollBar=new cPanel({shape:cPanel.cShapeRoundRect,borderRadius:16,align:eAlign.eRight,width:70,marginLeft:10,backgroundColor:this.boxBackgroundColor});this.panels.push(this.panelScrollBar);this.panelViewport=new cPanel({shape:this.panelBoxRoundedBorder?cPanel.cShapeRoundRect:cPanel.cShapeRectangle,borderRadius:16,align:eAlign.eClient,backgroundColor:this.boxBackgroundColor});
this.panels.push(this.panelViewport);this.panelBox=new cAutoSizePanel({align:eAlign.eWidth,height:100,top:0,marginBottom:50,backgroundColor:this.boxBackgroundColor});this.panelViewport.panels.push(this.panelBox);var b=this.panelScrollBar,d=this.panelViewport,e=this.panelBox;this.panelScrollBarHandle=new cPanel({shape:cPanel.cShapeRoundRect,borderRadius:16,align:eAlign.eWidth,left:0,top:0,height:100,backgroundColor:this.scrollBarHandleColor,onMouseDown:function(a,c,b,d){d.dragObject={panel:this}},
onDrag:function(a,c){0>this.top&&this.setTop(0);this.top+this.height>b.getInnerHeight()&&this.setTop(b.getInnerHeight()-this.height);e.setTop(-(this.top*(e.height-d.getInnerHeight())/(b.getInnerHeight()-this.height))|0)}});this.panelScrollBar.panels.push(this.panelScrollBarHandle)}cScrollboxPanel.deriveFrom(cPanel);
(function(){cScrollboxPanel.prototype.panelViewport=null;cScrollboxPanel.prototype.panelBox=null;cScrollboxPanel.prototype.panelScrollBar=null;cScrollboxPanel.prototype.panelScrollBarHandle=null;cScrollboxPanel.prototype.boxBackgroundColor="#ffffff";cScrollboxPanel.prototype.scrollBarHandleColor="#cccccc";cScrollboxPanel.prototype.autoHideScrollbar=!1;cScrollboxPanel.prototype.panelBoxRoundedBorder=!0;cScrollboxPanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);null!=
this.element&&(a=!1,c=0==this.panelBox.getInnerHeight()?this.panelScrollBar.getInnerHeight():this.panelScrollBar.getInnerHeight()*this.panelViewport.getInnerHeight()/this.panelBox.getInnerHeight()|0,c>=this.panelScrollBar.getInnerHeight()?(c=this.panelScrollBar.getInnerHeight(),this.autoHideScrollbar&&this.panelScrollBar.visible&&(this.panelScrollBar.visible=!1,a=!0)):this.panelScrollBar.visible||(a=this.panelScrollBar.visible=!0),this.panelScrollBarHandle.height!=c&&(this.panelScrollBarHandle.height=
c,a=!0),0>this.panelScrollBarHandle.top&&(this.panelScrollBarHandle.top=0,a=!0),this.panelScrollBarHandle.top+this.panelScrollBarHandle.height>this.panelScrollBar.getInnerHeight()&&(this.panelScrollBarHandle.top=this.panelScrollBar.getInnerHeight()-this.panelScrollBarHandle.height,a=!0),c=-(this.panelScrollBarHandle.top*(this.panelBox.height-this.panelViewport.getInnerHeight())/(this.panelScrollBar.getInnerHeight()-this.panelScrollBarHandle.height))|0,this.panelBox.top!=c&&(this.panelBox.top=c,a=
!0),a&&this.rerender())};cScrollboxPanel.prototype.scrollToTop=function(){this.panelScrollBarHandle.setTop(0);this.panelBox.setTop(-(this.panelScrollBarHandle.top*(this.panelBox.height-this.panelViewport.getInnerHeight())/(this.panelScrollBar.getInnerHeight()-this.panelScrollBarHandle.height))|0)};cScrollboxPanel.prototype.scrollToBottom=function(){this.panelScrollBarHandle.setTop(this.panelScrollBar.getInnerHeight()-this.panelScrollBarHandle.height);this.panelBox.setTop(-(this.panelScrollBarHandle.top*
(this.panelBox.height-this.panelViewport.getInnerHeight())/(this.panelScrollBar.getInnerHeight()-this.panelScrollBarHandle.height))|0)};cScrollboxPanel.prototype.scrollToPercentage=function(a){this.panelScrollBarHandle.setTop((this.panelScrollBar.getInnerHeight()-this.panelScrollBarHandle.height)*a/100|0);this.panelBox.setTop(-(this.panelScrollBarHandle.top*(this.panelBox.height-this.panelViewport.getInnerHeight())/(this.panelScrollBar.getInnerHeight()-this.panelScrollBarHandle.height))|0)}})();
function cDataItem(a){cBase.call(this);this.id=a?"undefined"!=typeof a.id?a.id:0:0;this.name=a?"undefined"!=typeof a.name?a.name:"":"";this.content=a?"undefined"!=typeof a.content?a.content:"":""}cDataItem.deriveFrom(cBase);(function(){cDataItem.prototype.id=0;cDataItem.prototype.name="";cDataItem.prototype.content=""})();function cDataArray(a){cBase.call(this);this.items=[]}cDataArray.deriveFrom(cBase);(function(){cDataArray.prototype.items=[]})();
function cFuture(a){cBase.call(this);cFuture.lastId++;this.id=cFuture.lastId;this.worldHTML="";this.evaluation={like:0,end:!1,same:!1,goal:!1,illegal:!1,ignore:!1};this.evaluationDescription=this.actionDescription="";this.past=null;this.futures=[];this.futuresDetermined=!1;this.level=0;this.multiverseColumns=[];this.modelData={}}cFuture.deriveFrom(cBase);
(function(){cFuture.lastId=0;cFuture.prototype.id=0;cFuture.prototype.worldHTML="";cFuture.prototype.evaluation={like:0,end:!1,same:!1,goal:!1,illegal:!1,ignore:!1,evaluationDescription:""};cFuture.prototype.actionDescription="";cFuture.prototype.past=null;cFuture.prototype.futures=[];cFuture.prototype.futuresDetermined=!1;cFuture.prototype.level=0;cFuture.prototype.multiverseColumns=[];cFuture.prototype.modelData={};cFuture.prototype.resetFutures=function(){this.futures=[]};cFuture.prototype.setWorldHTML=
function(a){this.worldHTML=a};cFuture.prototype.getPastWorld=function(a){var c=this.worldHTML.replace(/\s+/g,""),b=a.replace(/\s+/g,"");return c==b?this:null!=this.past?this.past.getPastWorld(a):null};cFuture.prototype.sameAsWorld=function(a){var c=this.worldHTML.replace(/\s+/g,"");a=a.replace(/\s+/g,"");return c==a?!0:!1};cFuture.prototype.isInColumnNumber=function(a){for(var c=!1,b=0,d=this.multiverseColumns.length;b<d;b++)if(this.multiverseColumns[b].columnNumber==a){c=!0;break}return c}})();
function cMultiverseColumn(a){cBase.call(this);this.futures=[];this.columnNumber=a?"undefined"!=typeof a.columnNumber?a.columnNumber:0:0}cMultiverseColumn.deriveFrom(cBase);(function(){cMultiverseColumn.prototype.futures=[];cMultiverseColumn.prototype.columnNumber=0})();function cMultiverse(a){cBase.call(this);this.worldNow=new cFuture;this.columns=[];this.totalNumberOfFutures=1;this.resetFutures()}cMultiverse.deriveFrom(cBase);
(function(){cMultiverse.prototype.worldNow=null;cMultiverse.prototype.columns=[];cMultiverse.prototype.totalNumberOfFutures=0;cMultiverse.prototype.resetFutures=function(){this.worldNow.resetFutures();this.worldNow.futuresDetermined=!1;this.worldNow.level=0;this.worldNow.evaluation.like=0;this.worldNow.evaluation.end=!1;this.worldNow.evaluation.same=!1;this.worldNow.evaluation.goal=!1;this.worldNow.evaluation.illegal=!1;this.worldNow.evaluation.ignore=!1;this.worldNow.evaluation.evaluationDescription=
"";this.columns=[];var a=new cMultiverseColumn({columnNumber:0});this.columns.push(a);a.futures.push(this.worldNow);this.totalNumberOfFutures=1;this.worldNow.multiverseColumns=[];this.worldNow.multiverseColumns.push(a)};cMultiverse.prototype.indexOfColumnNumber=function(a){for(var c=-1,b=0,d=this.columns.length;b<d;b++)if(this.columns[b].columnNumber==a){c=b;break}return c};cMultiverse.prototype.indexForNewColumnNumber=function(a){for(var c=this.columns.length,b=0,d=this.columns.length;b<d;b++)if(this.columns[b].columnNumber>=
a){c=b;break}return c};cMultiverse.prototype.getColumnByColumnNumber=function(a){for(var c=null,b=0,d=this.columns.length;b<d;b++)if(this.columns[b].columnNumber==a){c=this.columns[b];break}return c};cMultiverse.prototype.addFuture=function(a,c,b){c.futures.push(a);a.past=c;this.totalNumberOfFutures++;a.level=c.level+1;if(1==c.futures.length)b=c.multiverseColumns[0];else{var d=c.multiverseColumns[c.multiverseColumns.length-1];b=d.columnNumber+1;d=this.indexForNewColumnNumber(d.columnNumber)+1;if(0<=
this.indexOfColumnNumber(b))for(var e=this.columns.length-1;e>=d;e--){var g=this.columns[e];g.columnNumber+=1}b=new cMultiverseColumn({columnNumber:b});this.columns.splice(d,0,b);for(d=[];null!=c;)d.push(c),c=c.past;for(c=d.length-1;0<=c;c--)e=d[c],b.futures.push(e),e.multiverseColumns.push(b),e.multiverseColumns.sort(function(a,c){return a.columnNumber-c.columnNumber})}b.futures.push(a);a.multiverseColumns.push(b)};cMultiverse.prototype.removeFutureColumn=function(a){if(0==a.futures.length&&a.id!=
this.worldNow.id){a=a.multiverseColumns[0].columnNumber;var c=this.indexOfColumnNumber(a);if(0<=c){for(var b=this.columns[c],d=b.futures.length-1;0<=d;d--)for(var e=b.futures[d],g=0,l=e.multiverseColumns.length;g<l;g++)if(e.multiverseColumns[g].columnNumber==a){e.multiverseColumns.splice(g,1);if(0==e.multiverseColumns.length&&e.id!=this.worldNow.id&&(this.totalNumberOfFutures--,null!=e.past))for(g=0,l=e.past.futures.length;g<l;g++)if(e.past.futures[g].id==e.id){e.past.futures.splice(g,1);break}break}this.columns.splice(c,
1);a=c;for(c=this.columns.length;a<c;a++)b=this.columns[a],b.columnNumber-=1;a=0;for(c=this.columns.length;a<c;a++)b=this.columns[a],b.columnNumber!=a&&console.log("uh oh")}}};cMultiverse.prototype.breadthFirstFuture=function(){for(var a=null,c=0;c<this.columns.length;c++){var b=this.columns[c];0<b.futures.length&&(b=b.futures[b.futures.length-1],!b.futuresDetermined&&(null==a||b!==a&&b.level<a.level)&&(a=b))}return a};cMultiverse.prototype.highScoreFuture=function(){for(var a=null,c=0;c<this.columns.length;c++){var b=
this.columns[c];0<b.futures.length&&(b=b.futures[b.futures.length-1],!b.futuresDetermined&&(null==a||b!==a&&(b.evaluation.like>a.evaluation.like||b.evaluation.like==a.evaluation.like&&b.level<a.level))&&(a=b))}return a};cMultiverse.prototype.leftSideFuture=function(){for(var a=null,c=0;c<this.columns.length;c++){var b=this.columns[c];if(0<b.futures.length&&(b=b.futures[b.futures.length-1],!b.futuresDetermined)){a=b;break}}return a};cMultiverse.prototype.rightSideFuture=function(){for(var a=null,c=
this.columns.length-1;0<=c;c--){var b=this.columns[c];if(0<b.futures.length&&(b=b.futures[b.futures.length-1],!b.futuresDetermined&&null==a)){a=b;break}}return a};cMultiverse.prototype.getGoalFuture=function(){for(var a=null,c=0;c<this.columns.length;c++){var b=this.columns[c];if(0<b.futures.length&&(b=b.futures[b.futures.length-1],b.futuresDetermined&&b.evaluation.goal)){a=b;break}}return a}})();function cAgent(a){cBase.call(this)}cAgent.deriveFrom(cBase);
(function(){cAgent.prototype.evaluations="";cAgent.prototype.actions=""})();
function cModel(a){cBase.call(this);this.worldCSS="";this.agent=new cAgent;this.multiverse=new cMultiverse;this.evaluationSandbox=this.actionSandbox=null;this.allUndeterminedFutures=[];this.searchAlgorithm=cModel.searchAlgorithms.msaLeftSideFirst;this.stopSearchWhenGoalFound=!0;this.newestGoalFuture=null;this.ignoreIllegalFutures=this.ignoreSameAsParentOrSibling=!0;this.onInitActionSandboxComplete=function(){};this.onInitEvaluationSandboxComplete=function(){}}cModel.deriveFrom(cBase);
(function(){cModel.searchAlgorithms={msaBreadthFirst:1,msaHighScoreFirst:2,msaLeftSideFirst:3,msaRightSideFirst:4};cModel.prototype.worldCSS="";cModel.prototype.agent=null;cModel.prototype.multiverse=null;cModel.prototype.actionSandbox=null;cModel.prototype.evaluationSandbox=null;cModel.prototype.allUndeterminedFutures=[];cModel.prototype.searchAlgorithm=cModel.searchAlgorithms.msaLeftSideFirst;cModel.prototype.stopSearchWhenGoalFound=!1;cModel.prototype.newestGoalFuture=null;cModel.prototype.ignoreSameAsParentOrSibling=
!0;cModel.prototype.ignoreIllegalFutures=!0;cModel.prototype.onInitActionSandboxComplete=function(){};cModel.prototype.onInitEvaluationSandboxComplete=function(){};var a=!1,c=!1,b=[],d=0,e=!1,g=!1,l=!1,k=!1,m="",h=!1;cModel.prototype.initActionSandbox=function(c,b){this.onInitActionSandboxComplete=b?"undefined"!=typeof b?b:function(){}:function(){};a=!1;if(this.actionSandbox=c){var d;d="<!DOCTYPE html>\n<html>\n";d+="<head>\n";d+="<style>\n";d+="body {\n";d+="  background-color: #ff00ff;\n";d+="  font-family: Calibri, Arial, helvetica, sans-serif;\n";
d+="}\n";d+="</style>\n";d+='<script type="text/javascript" src="js/lib/jquery-1.10.2.min.js">\x3c/script>\n';d+='<script type="text/javascript" src="js/lib/jchoose-min.js">\x3c/script>\n';d+='<script type="text/javascript">\n';d+="  var multiverse = {\n";d+='    _memory: "",\n';d+="    _memories: {},\n";d+="    _init: function() {\n";d+="      parent.Model.onActionIFrameReady();\n";d+="    },\n";d+="    spawn: function(aActionDescription) {\n";d+='      parent.Model.spawnFuture($("body").html(), aActionDescription);\n';
d+="    },\n";d+="    world: function(aActionDescription) {\n";d+='      parent.Model.spawnFuture($("body").html(), aActionDescription);\n';d+="    },\n";d+="    forgetAll: function() {\n";d+='      multiverse._memory = "";\n';d+="      multiverse._memories = {};\n";d+="    },\n";d+="    remember: function(aMomentName) {\n";d+="      if(aMomentName) {\n";d+='        multiverse._memories[aMomentName] = $("body").html();\n';d+="      } else {\n";d+='        multiverse._memory = $("body").html();\n';
d+="      }\n";d+="    },\n";d+="    recall: function(aMomentName) {\n";d+="      if(aMomentName && multiverse._memories[aMomentName]) {\n";d+='        $("body").html(multiverse._memories[aMomentName]);\n';d+="      } else {\n";d+='        $("body").html(multiverse._memory);\n';d+="      }\n";d+="    }\n";d+="  };\n";d+="  function _runCode(aCode) {\n";d+="    var _codeResult = {\n";d+="      syntaxError: true,\n";d+='      syntaxErrorMessage: "",\n';d+="      runError: true,\n";d+='      runErrorMessage: ""\n';
d+="    };\n";d+="    var _func;\n";d+="    try {\n";d+="      _func = eval(\n";d+='        "(function() {\\n" +\n';d+='          "multiverse.remember();\\n" +\n';d+='          aCode + "\\n" +\n';d+='        "})"\n';d+="      );\n";d+="      _codeResult.syntaxError = false;\n";d+="    } catch (e) {\n";d+="      _codeResult.syntaxErrorMessage = e.message ? e.message : e;\n";d+="    }\n";d+="    if (!_codeResult.syntaxError) {\n";d+="      try {\n";d+="        _func.call(window);\n";d+="        _codeResult.runError = false;\n";
d+="      } catch (e) {\n";d+="        _codeResult.runErrorMessage = e.message ? e.message : e;\n";d+="      }\n";d+="    }\n";d+="    return _codeResult;\n";d+="  }\n";d+="\x3c/script>\n";d+="</head>\n";d+='<body onload="multiverse._init()">\n';d+="</body>\n";d+="</html>";this.actionSandbox.setContent(d);this.actionSandbox.lastRunResult=null}};cModel.prototype.onActionIFrameReady=function(){!1==a&&(a=!0,this.onInitActionSandboxComplete())};cModel.prototype.initEvaluationSandbox=function(a,d){this.onInitEvaluationSandboxComplete=
d?"undefined"!=typeof d?d:function(){}:function(){};c=!1;if(this.evaluationSandbox=a){var b;b="<!DOCTYPE html>\n<html>\n";b+="<head>\n";b+="<style>\n";b+="body {\n";b+="  background-color: #ff00ff;\n";b+="  font-family: Calibri, Arial, helvetica, sans-serif;\n";b+="}\n";b+="</style>\n";b+='<script type="text/javascript" src="js/lib/jquery-1.10.2.min.js">\x3c/script>\n';b+='<script type="text/javascript">\n';b+="  function _runCode(aCode) {\n";b+="    var _codeResult = {\n";b+="      syntaxError: true,\n";
b+='      syntaxErrorMessage: "",\n';b+="      runError: true,\n";b+='      runErrorMessage: ""\n';b+="    };\n";b+="    var _func;\n";b+="    try {\n";b+="      _func = eval(\n";b+='        "(function() { \\n" +\n';b+='        "  world._reset();\\n" + \n';b+='        "  world._isSameAsBefore = parent.Model.isSameFutureAsBefore();\\n" + \n';b+='           aCode + "\\n" + \n';b+='        "  world._processEvaluation();\\n" + \n';b+='        "})"\n';b+="      );\n";b+="      _codeResult.syntaxError = false;\n";
b+="    } catch (e) {\n";b+="      _codeResult.syntaxErrorMessage = e.message ? e.message : e;\n";b+="    }\n";b+="    if (!_codeResult.syntaxError) {\n";b+="      try {\n";b+="        _func.call(window);\n";b+="        _codeResult.runError = false;\n";b+="      } catch (e) {\n";b+="        _codeResult.runErrorMessage = e.message ? e.message : e;\n";b+="      }\n";b+="    }\n";b+="    return _codeResult;\n";b+="  }\n";b+="  var world = {\n";b+="    evaluation: {\n";b+="      like : 0,\n";b+="      end : false,\n";
b+="      goal : false,\n";b+="      illegal : false,\n";b+="      ignore : false\n";b+="    },\n";b+="    _isSameAsBefore: false,\n";b+="    _init: function() {\n";b+="      parent.Model.onEvaluationIFrameReady();\n";b+="    },\n";b+="    _reset: function() {\n";b+="      world.evaluation.like = 0;\n";b+="      world.evaluation.end = false;\n";b+="      world.evaluation.goal = false;\n";b+="      world.evaluation.illegal = false;\n";b+="      world.evaluation.ignore = false;\n";b+="      world.evaluation.evaluationDescription = '';\n";
b+="    },\n";b+="    _processEvaluation: function() {\n";b+="      if (world.evaluation.like) {\n";b+="        parent.Model.likeFuture(world.evaluation.like);\n";b+="      }\n";b+="      if (world.evaluation.end) {\n";b+="        parent.Model.endFuture(world.evaluation.evaluationDescription);\n";b+="      }\n";b+="      if (world.evaluation.goal) {\n";b+="         parent.Model.goalFuture(world.evaluation.evaluationDescription);\n";b+="      }\n";b+="      if (world.evaluation.illegal) {\n";b+="        parent.Model.illegalFuture(world.evaluation.evaluationDescription);\n";
b+="      }\n";b+="      if (world.evaluation.ignore) {\n";b+="        parent.Model.ignoreFuture();\n";b+="      }\n";b+="    },\n";b+="    like: function(aLikeScore) {\n";b+="      if (typeof aLikeScore == 'number') {\n";b+="        world.evaluation.like += aLikeScore;\n";b+="      } else {\n";b+="        world.evaluation.like++;\n";b+="      }\n";b+="    },\n";b+="    dislike: function(aDislikeScore) {\n";b+="      if (typeof aDislikeScore == 'number') {\n";b+="        world.evaluation.like -= aDislikeScore;\n";
b+="      } else {\n";b+="        world.evaluation.like--;\n";b+="      }\n";b+="    },\n";b+="    end: function(aEvaluationDescription) {\n";b+="      world.evaluation.end = true;\n";b+="      world.evaluation.evaluationDescription = aEvaluationDescription ? aEvaluationDescription : '';\n";b+="    },\n";b+="    isSameAsBefore: function() {\n";b+="      return world._isSameAsBefore;\n";b+="    },\n";b+="    goal: function(aEvaluationDescription) {\n";b+="      world.evaluation.goal = true;\n";b+=
"      world.evaluation.evaluationDescription = aEvaluationDescription ? aEvaluationDescription : '';\n";b+="    },\n";b+="    illegal: function(aEvaluationDescription) {\n";b+="      world.evaluation.illegal = true;\n";b+="      world.evaluation.evaluationDescription = aEvaluationDescription ? aEvaluationDescription : '';\n";b+="    },\n";b+="    ignore: function() {\n";b+="      world.evaluation.ignore = true;\n";b+="    }\n";b+="  };\n";b+="\x3c/script>\n";b+="</head>\n";b+='<body onload="world._init()">\n';
b+="</body>\n";b+="</html>";this.evaluationSandbox.setContent(b);this.evaluationSandbox.lastRunResult=null}};cModel.prototype.onEvaluationIFrameReady=function(){!1==c&&(c=!0,this.onInitEvaluationSandboxComplete())};cModel.prototype.spawnFuture=function(a,c){"string"==typeof a&&b.push({html:a,actionDescription:c?c:""})};cModel.prototype.likeFuture=function(a){"number"==typeof a?d+=a:d++};cModel.prototype.dislikeFuture=function(a){"number"==typeof a?d-=a:d--};cModel.prototype.endFuture=function(a){e=
!0;m=a};cModel.prototype.isSameFutureAsBefore=function(){return h};cModel.prototype.goalFuture=function(a){g=!0;m=a};cModel.prototype.illegalFuture=function(a){l=!0;m=a};cModel.prototype.ignoreFuture=function(){k=!0};cModel.prototype.runWorldInActionSandbox=function(b,c){var d={},e=!1;a&&(this.actionSandbox.setBody(b),e=this.actionSandbox.getWindow(),d=e._runCode(c),e=e.jChoose.validChoice());e={codeResult:d,validChoice:e};this.actionSandbox.lastRunResult=d;return e};cModel.prototype.evaluateWorld=
function(a,b,p){d=0;k=l=g=e=!1;m="";h=!1;null!=a&&null!=a.getPastWorld(b)&&(h=!0);a={};c&&p&&(this.evaluationSandbox.setBody(b),a=this.evaluationSandbox.getWindow()._runCode(p));b={codeResult:a,like:d,end:e,same:h,goal:g,illegal:l,ignore:k,evaluationDescription:m};this.evaluationSandbox.lastRunResult=a;return b};cModel.prototype.resetActionSandboxChooseCallStack=function(){a&&this.actionSandbox.getWindow().jChoose.resetCallStack()};cModel.prototype.getActionSandboxChooseCallStack=function(){return a?
this.actionSandbox.getWindow().jChoose.callStack:null};cModel.prototype.resetActionSandboxChooseCallStackIndexAndValidChoice=function(){a&&this.actionSandbox.getWindow().jChoose.resetCallStackIndexAndValidChoice()};cModel.prototype.getActionSandboxBodyHTML=function(){return a?this.actionSandbox.getBody():""};cModel.prototype.getWorldCSS=function(){return this.worldCSS};cModel.prototype.getWorldNowHTML=function(){return null!=this.multiverse.worldNow?this.multiverse.worldNow.worldHTML:""};cModel.prototype.getWorldNowFullHTML=
function(){return null!=this.multiverse.worldNow?this.compileFullHTML(this.multiverse.worldNow.worldHTML):""};cModel.prototype.getFutureFullHTML=function(a){return this.compileFullHTML(a.worldHTML)};cModel.prototype.compileFullHTML=function(a){return"<!DOCTYPE html>\n<html>\n<head>\n<style>\nbody {\n  margin: 0px;\n  border: 0px;\n  padding: 0px;\n  background-color: #ffffff;\n  font-family: Calibri, Arial, helvetica, sans-serif;\n}\n"+this.worldCSS+"\n</style>\n</head>\n<body>"+a+"\n</body>\n</html>"};
cModel.prototype.setWorldCSS=function(a){this.worldCSS=a;this.updateWorldNow()};cModel.prototype.setWorldNowHTML=function(a){null!=this.multiverse.worldNow&&(this.multiverse.worldNow.worldHTML=a,this.updateWorldNow())};cModel.prototype.getEvaluations=function(){return this.agent.evaluations};cModel.prototype.setEvaluations=function(a){this.agent.evaluations!=a&&(this.agent.evaluations=a,this.updateWorldNow())};cModel.prototype.getActions=function(){return this.agent.actions};cModel.prototype.setActions=
function(a){this.agent.actions!=a&&(this.agent.actions=a,this.multiverse.resetFutures(),this.actionSandbox.lastRunResult=null)};cModel.prototype.ClearAll=function(a){null!=this.multiverse.worldNow&&(this.multiverse.worldNow.worldHTML="");this.worldCSS="";this.agent.actions="";this.agent.evaluations="";this.updateWorldNow()};cModel.prototype.loadFile=function(a){var b=!1;a.project&&("string"==typeof a.project.html&&null!=this.multiverse.worldNow&&(this.multiverse.worldNow.worldHTML=a.project.html),
"string"==typeof a.project.css&&(this.worldCSS=a.project.css),"string"==typeof a.project.actions&&(this.agent.actions=a.project.actions),"string"==typeof a.project.evaluations&&(this.agent.evaluations=a.project.evaluations),"string"==typeof a.project.searchAlgorithm&&("breadth-first"==a.project.searchAlgorithm?this.searchAlgorithm=cModel.searchAlgorithms.msaBreadthFirst:"high-score-first"==a.project.searchAlgorithm?this.searchAlgorithm=cModel.searchAlgorithms.msaHighScoreFirst:"left-side-first"==
a.project.searchAlgorithm?this.searchAlgorithm=cModel.searchAlgorithms.msaLeftSideFirst:"right-side-first"==a.project.searchAlgorithm&&(this.searchAlgorithm=cModel.searchAlgorithms.msaRightSideFirst)),b=!0);this.updateWorldNow();return b};cModel.prototype.generateFileContent=function(a){var b="",c="";this.searchAlgorithm==cModel.searchAlgorithms.msaBreadthFirst?c="breadth-first":this.searchAlgorithm==cModel.searchAlgorithms.msaHighScoreFirst?"high-score-first"==c:this.searchAlgorithm==cModel.searchAlgorithms.msaLeftSideFirst?
c="left-side-first":this.searchAlgorithm==cModel.searchAlgorithms.msaRightSideFirst&&(c="right-side-first");b+="{\n  application:\n";b+="  {\n";b+='    name: "ProblemSolver",\n';b+='    home: "http://complexity.zone/problem_solver",\n';b+='    version: "0.0.1"\n';b+="  },\n";b+="  project:\n";b+="  {\n";b+='    date: "'+(new Date).toJSON()+'",\n';b+='    name: "'+cLib.textToJSONString(a)+'",\n';b+='    html: "'+cLib.textToJSONString(this.multiverse.worldNow.worldHTML)+'",\n';b+='    css: "'+cLib.textToJSONString(this.worldCSS)+
'",\n';b+='    actions: "'+cLib.textToJSONString(this.agent.actions)+'",\n';b+='    evaluations: "'+cLib.textToJSONString(this.agent.evaluations)+'",\n';b+='    searchAlgorithm: "'+c+'"\n';b+="  }\n";return b+="}\n"};cModel.prototype.updateWorldNow=function(){this.multiverse.resetFutures();this.actionSandbox.lastRunResult=null;var a=this.evaluateWorld(null,this.multiverse.worldNow.worldHTML,this.agent.evaluations);this.multiverse.worldNow.evaluation=a;this.multiverse.worldNow.futuresDetermined=this.multiverse.worldNow.evaluation.end||
this.multiverse.worldNow.evaluation.goal||this.multiverse.worldNow.evaluation.illegal||this.multiverse.worldNow.evaluation.ignore?!0:!1};cModel.prototype.resetFutures=function(){this.multiverse.resetFutures();this.allUndeterminedFutures=[];this.updateWorldNow()};cModel.prototype.planNextUndeterminedFuture=function(){this.allUndeterminedFutures=[];var a=null;this.searchAlgorithm==cModel.searchAlgorithms.msaBreadthFirst?a=this.multiverse.breadthFirstFuture():this.searchAlgorithm==cModel.searchAlgorithms.msaHighScoreFirst?
a=this.multiverse.highScoreFuture():this.searchAlgorithm==cModel.searchAlgorithms.msaLeftSideFirst?a=this.multiverse.leftSideFuture():this.searchAlgorithm==cModel.searchAlgorithms.msaRightSideFirst&&(a=this.multiverse.rightSideFuture());null!=a&&this.allUndeterminedFutures.push(a)};cModel.prototype.completedDeterminingFutures=function(){1E3<=this.multiverse.totalNumberOfFutures&&(this.allUndeterminedFutures=[]);return 0==this.allUndeterminedFutures.length};cModel.prototype.continueDeterminingFutures=
function(a){var c=a?"undefined"!=typeof a.maxTimeMs?a.maxTimeMs:100:100,d=a?"undefined"!=typeof a.maxTotalFutures?a.maxTotalFutures:100:100,e=a?"undefined"!=typeof a.maxDepth?a.maxDepth:5:5;a=a?"undefined"!=typeof a.focusColumnNumber?a.focusColumnNumber:0:0;for(var g=(new Date).getTime(),f,h,m=!0;m;)if(this.multiverse.totalNumberOfFutures>=d&&(this.allUndeterminedFutures=[]),0<this.allUndeterminedFutures.length)if(this.multiverse.totalNumberOfFutures<d){f=this.allUndeterminedFutures[0];f.modelData.removeFutureColumn=
!1;this.allUndeterminedFutures.splice(0,1);if(!f.futuresDetermined&&f.level<e)if(f.modelData.removeFutureColumn=1<Model.multiverse.columns.length,b=[],this.resetActionSandboxChooseCallStack(),h=this.runWorldInActionSandbox(f.worldHTML,this.agent.actions),h.codeResult.syntaxError||h.codeResult.runError)m=!1;else if(h.validChoice){for(h=0;h<b.length;h++){var k=!1,l=this.evaluateWorld(f,b[h].html,this.agent.evaluations);if(l.codeResult.syntaxError||l.codeResult.runError)m=!1;else if(this.ignoreSameAsParentOrSibling&&
(l.same||k)?l.ignore=!0:this.ignoreIllegalFutures&&l.illegal&&(l.ignore=!0),l.ignore)f.modelData.removeFutureColumn=f.modelData.removeFutureColumn;else{f.modelData.removeFutureColumn=!1;k=new cFuture;k.worldHTML=b[h].html;k.actionDescription=b[h].actionDescription;k.evaluation=l;if(l.illegal||l.end||l.goal)k.futuresDetermined=!0;l.goal&&(this.newestGoalFuture=k);this.multiverse.addFuture(k,f,a)}}if(m){b=[];for(var w=this.getActionSandboxChooseCallStack(),x=!0;x;){h=w.length-1;for(l=!0;0<=h;){k=w[h];
k.choiceIndex++;if(k.choiceIndex<k.choiceCount){l=!1;break}else k.choiceIndex=0;h--}if(l)x=!1;else{this.resetActionSandboxChooseCallStackIndexAndValidChoice();h=this.runWorldInActionSandbox(f.worldHTML,this.agent.actions);if(h.codeResult.syntaxError||h.codeResult.runError)m=x=!1;else if(h.validChoice){for(h=0;h<b.length;h++)if(k=!1,l=this.evaluateWorld(f,b[h].html,this.agent.evaluations),l.codeResult.syntaxError||l.codeResult.runError)m=x=!1;else if(this.ignoreSameAsParentOrSibling&&(l.same||k)?l.ignore=
!0:this.ignoreIllegalFutures&&l.illegal&&(l.ignore=!0),l.ignore)f.modelData.removeFutureColumn=f.modelData.removeFutureColumn;else{f.modelData.removeFutureColumn=!1;k=new cFuture;k.worldHTML=b[h].html;k.actionDescription=b[h].actionDescription;k.evaluation=l;if(l.illegal||l.end||l.goal)k.futuresDetermined=!0;l.goal&&(this.newestGoalFuture=k);this.multiverse.addFuture(k,f,a)}this.multiverse.totalNumberOfFutures>=d&&(m=x=!1)}b=[]}}}}f.futuresDetermined=!0;0==f.futures.length&&f.modelData.removeFutureColumn&&
this.multiverse.removeFutureColumn(f);f=new Date;f=f.getTime();f-g>c&&(m=!1)}else this.allUndeterminedFutures=[],m=!1;else m=!1}})();var Model=new cModel;
function cMainPagePanel(a){cPanel.call(this,a);this.screen=a.screen;this.scrollPanel=new cScrollboxPanel({align:eAlign.eClient,backgroundColor:"transparent",boxBackgroundColor:"#262626",scrollBarHandleColor:"#666666",autoHideScrollbar:!0});this.panels.push(this.scrollPanel);this.introPanel=new cPanel({align:eAlign.eNone,left:0,top:0,height:620,width:620,backgroundColor:"#333333",padding:20});this.scrollPanel.panelBox.panels.push(this.introPanel);a.logoImage&&(this.introLogoPanel=new cPanel({align:eAlign.eNone,
width:393,height:100,backgroundColor:"transparent",image:this.screen.getImageClone(a.logoImage),imageStretch:!0}),this.introPanel.panels.push(this.introLogoPanel));this.introTextPanel=new cPanel({align:eAlign.eClient,backgroundColor:"#333333",color:"#ffffff",innerHTML:'Problem Solver is a novel online problem-solver and problem-analyser for (JavaScript) programmers.\nLoad examples from the "EXAMPLES" menu\nand look at the code in the "world",\n"changes" and "evaluate" screens. \nBy default, Problem Solver is pre-loaded with the "Towers of Hanoi" example.<br />\n<b>To see Problem Solver in action, go to the <span style="background-color: #777777;">&nbsp;multiverse&nbsp;</span> viewer and click\n"<span style="color: #00bb00;">GO!</span>"</b><br />\nGot a puzzle or problem to analyse? Follow these steps:\n<ol>\n  <li>Describe the <span style="background-color: #88cc66;">&nbsp;world&nbsp;</span> (situation) with HTML/CSS.</li>\n  <li>Describe possible <span style="background-color: #88bbaa;">&nbsp;changes&nbsp;</span> using JavaScript/jQuery and the choose() method/plugin.</li>\n  <li>Describe how you would <span style="background-color: #FFAE3C;">&nbsp;evaluate&nbsp;</span> a world using JavaScript/jQuery.</li>\n  <li>Click <span style="color: #00bb00;">GO!</span> in the <span style="background-color: #777777;">&nbsp;multiverse&nbsp;</span> viewer.</li>\n</ol>\nYou can then explore the "multiverse" to navigate through\nthe space of all future "worlds",\nfor all possible combinations of "changes".\nClick on any world in the multiverse viewer to see the sequence of changes that preceded.<br />\n<br />\nIn CS and AI this is known as the "game tree".\nIn Problem Solver this is called the "multiverse".\n'});
this.introPanel.panels.push(this.introTextPanel);this.worldPanel=new cPanel({align:eAlign.eNone,left:0,top:420,height:300,width:300,backgroundColor:"#333333"});this.scrollPanel.panelBox.panels.push(this.worldPanel);this.worldPanel.imagePanel=new cPanel({align:eAlign.eNone,left:50,top:20,width:200,height:167,backgroundColor:"transparent",image:this.screen.getImageClone(a.viewWorldImageId),imageStretchWidth:200,imageStretchHeight:167,onClick:function(){}});this.worldPanel.panels.push(this.worldPanel.imagePanel);
this.worldPanel.textPanel=new cPanel({align:eAlign.eNone,left:20,top:210,width:260,height:100,backgroundColor:"transparent",color:"#ffffff",fontSize:19,innerHTML:'<span style="font-size: 22px; font-weight: bold;">STEP 1</span><br />Describe the "now" world with HTML and CSS.'});this.worldPanel.panels.push(this.worldPanel.textPanel);this.evaluationPanel=new cPanel({align:eAlign.eNone,left:0,top:740,height:300,width:300,backgroundColor:"#333333",color:"#ffffff"});this.scrollPanel.panelBox.panels.push(this.evaluationPanel);
this.evaluationPanel.imagePanel=new cPanel({align:eAlign.eNone,left:50,top:20,width:200,height:167,backgroundColor:"transparent",image:this.screen.getImageClone(a.viewEvaluateImageId),imageStretchWidth:200,imageStretchHeight:167,onClick:function(){}});this.evaluationPanel.panels.push(this.evaluationPanel.imagePanel);this.evaluationPanel.textPanel=new cPanel({align:eAlign.eNone,left:20,top:210,width:260,height:100,backgroundColor:"transparent",color:"#ffffff",fontSize:19,innerHTML:'<span style="font-size: 22px; font-weight: bold;">STEP 3</span><br />Evaluate a world using JavaScript / jQuery.'});
this.evaluationPanel.panels.push(this.evaluationPanel.textPanel);this.actionsPanel=new cPanel({align:eAlign.eNone,left:320,top:420,height:300,width:300,backgroundColor:"#333333",color:"#ffffff"});this.scrollPanel.panelBox.panels.push(this.actionsPanel);this.actionsPanel.imagePanel=new cPanel({align:eAlign.eNone,left:50,top:20,width:200,height:167,backgroundColor:"transparent",image:this.screen.getImageClone(a.viewChangesImageId),imageStretchWidth:200,imageStretchHeight:167,onClick:function(){}});
this.actionsPanel.panels.push(this.actionsPanel.imagePanel);this.actionsPanel.textPanel=new cPanel({align:eAlign.eNone,left:20,top:210,width:260,height:100,backgroundColor:"transparent",color:"#ffffff",fontSize:19,innerHTML:'<span style="font-size: 22px; font-weight: bold;">STEP 2</span><br />Describe possible changes to a world with JavaScript / jQuery.'});this.actionsPanel.panels.push(this.actionsPanel.textPanel);this.multiversePanel=new cPanel({align:eAlign.eNone,left:320,top:740,height:300,width:300,
backgroundColor:"#333333",color:"#ffffff"});this.scrollPanel.panelBox.panels.push(this.multiversePanel);this.multiversePanel.imagePanel=new cPanel({align:eAlign.eNone,left:50,top:20,width:200,height:167,backgroundColor:"transparent",image:this.screen.getImageClone(a.viewMultiverseImageId),imageStretchWidth:200,imageStretchHeight:167,onClick:function(){}});this.multiversePanel.panels.push(this.multiversePanel.imagePanel);this.multiversePanel.textPanel=new cPanel({align:eAlign.eNone,left:20,top:210,
width:260,height:100,backgroundColor:"transparent",color:"#ffffff",fontSize:19,innerHTML:'<span style="font-size: 22px; font-weight: bold;">STEP 4</span><br />Click GO! in the multiverse viewer.'});this.multiversePanel.panels.push(this.multiversePanel.textPanel)}cMainPagePanel.deriveFrom(cPanel);
(function(){cMainPagePanel.prototype.screen=null;cMainPagePanel.prototype.scrollPanel=null;cMainPagePanel.prototype.introPanel=null;cMainPagePanel.prototype.introLogoPanel=null;cMainPagePanel.prototype.introTextPanel=null;cMainPagePanel.prototype.worldPanel=null;cMainPagePanel.prototype.evaluationPanel=null;cMainPagePanel.prototype.actionsPanel=null;cMainPagePanel.prototype.multiversePanel=null;cMainPagePanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);null!=this.element&&
(1280<this.scrollPanel.panelBox.getInnerWidth()?(this.worldPanel.left=640,this.worldPanel.top=0,this.actionsPanel.left=960,this.actionsPanel.top=0,this.evaluationPanel.left=640,this.evaluationPanel.top=320,this.multiversePanel.left=960,this.multiversePanel.top=320):(this.worldPanel.left=0,this.worldPanel.top=640,this.actionsPanel.left=320,this.actionsPanel.top=640,this.evaluationPanel.left=0,this.evaluationPanel.top=960,this.multiversePanel.left=320,this.multiversePanel.top=960))}})();
function cTextEditPanel(a){cPanel.call(this,a);this.textEditElement=null;this.initValue=a?a.value?a.value:"":"";this.onChange=a?a.onChange?a.onChange:null:null;this.onEdit=a?a.onEdit?a.onEdit:null:null;this.readOnly=a?a.readOnly?!0:!1:!1}cTextEditPanel.deriveFrom(cPanel);
(function(){cTextEditPanel.prototype.textEditElement=null;cTextEditPanel.prototype.initValue="";cTextEditPanel.prototype.onChange=null;cTextEditPanel.prototype.onEdit=null;cTextEditPanel.prototype.readOnly=!1;cTextEditPanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);null!=this.element&&(null==this.textEditElement&&(this.textEditElement=document.createElement("TEXTAREA"),this.textEditElement.id="pnl_"+this.instanceId+"_"+this.innerId+"_textarea",this.element.appendChild(this.textEditElement),
this.textEditElement.value=this.initValue,this.textEditElement.style.fontFamily='"Courier New", Courier, monospace',this.textEditElement.style.fontSize=this.fontSize+"px",this.textEditElement.style.whiteSpace="nowrap",this.textEditElement.style.overflow="auto",this.textEditElement.setAttribute("wrap","off"),this.textEditElement.setAttribute("spellcheck","false"),this.textEditElement.style.whiteSpace="pre",this.textEditElement.style.resize="none",this.textEditElement.style.position="absolute",this.textEditElement.style.left=
"0px",this.textEditElement.style.top="0px",this.textEditElement.style.margin="0px",this.textEditElement.style.border="1px solid black",this.textEditElement.style.color=this.color,this.textEditElement.style.backgroundColor=this.backgroundColor,this.textEditElement.style.paddingLeft="4px",this.readOnly&&(this.textEditElement.readOnly=!0),null!==this.onChange&&(this.textEditElement.onchange=this.onChange),null!==this.onEdit&&(this.textEditElement.onkeypress=this.onEdit)),this.textEditElement.style.width=
this.getInnerWidth()-8+"px",this.textEditElement.style.height=this.getInnerHeight()-6+"px")};cTextEditPanel.prototype.getValue=function(){var a="";null!=this.textEditElement&&(a=this.textEditElement.value);return a};cTextEditPanel.prototype.setValue=function(a){null!=this.textEditElement?this.textEditElement.value=a:this.initValue=a}})();
function cAutoSpanPanel(a){cPanel.call(this,a);this.spanMethod=a?a.spanMethod?a.spanMethod:cAutoSpanPanel.spanMethod_auto:cAutoSpanPanel.spanMethod_auto;this.separationMargin=a?"undefined"!=typeof a.separationMargin?a.separationMargin:16:16}cAutoSpanPanel.deriveFrom(cPanel);
(function(){cAutoSpanPanel.spanMethod_auto=0;cAutoSpanPanel.spanMethod_horizontal=1;cAutoSpanPanel.spanMethod_vertical=2;cAutoSpanPanel.prototype.spanMethod=cAutoSpanPanel.spanMethod_auto;cAutoSpanPanel.prototype.separationMargin=16;cAutoSpanPanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);if(null!=this.element&&0<this.panels.length){a=!1;if((this.getInnerHeight()>this.getInnerWidth()||this.spanMethod==cAutoSpanPanel.spanMethod_vertical)&&this.spanMethod!=cAutoSpanPanel.spanMethod_horizontal)for(b=
(this.getInnerHeight()+this.separationMargin)/this.panels.length|0,c=0;c<this.panels.length;c++)lPanel=this.panels[c],lPanel.align!=eAlign.eTop&&(lPanel.align=eAlign.eTop,a=!0),0!=lPanel.marginLeft&&(lPanel.marginLeft=0,a=!0),0!=lPanel.marginTop&&(lPanel.marginTop=0,a=!0),0!=lPanel.marginRight&&(lPanel.marginRight=0,a=!0),c==this.panels.length-1?(lPanel.height!=b-this.separationMargin&&(lPanel.height=b-this.separationMargin,a=!0),0!=lPanel.marginBottom&&(lPanel.marginBottom=0,a=!0)):(lPanel.height!=
b&&(lPanel.height=b,a=!0),lPanel.marginBottom!=this.separationMargin&&(lPanel.marginBottom=this.separationMargin,a=!0));else for(b=(this.getInnerWidth()+this.separationMargin)/this.panels.length|0,c=0;c<this.panels.length;c++)lPanel=this.panels[c],lPanel.align!=eAlign.eLeft&&(lPanel.align=eAlign.eLeft,a=!0),0!=lPanel.marginLeft&&(lPanel.marginLeft=0,a=!0),0!=lPanel.marginTop&&(lPanel.marginTop=0,a=!0),0!=lPanel.marginBottom&&(lPanel.marginBottom=0,a=!0),c==this.panels.length-1?(lPanel.width!=b-this.separationMargin&&
(lPanel.width=b-this.separationMargin,a=!0),0!=lPanel.marginRight&&(lPanel.marginRight=0,a=!0)):(lPanel.width!=b&&(lPanel.width=b,a=!0),lPanel.marginRight!=this.separationMargin&&(lPanel.marginRight=this.separationMargin,a=!0));a&&this.rerender()}}})();function cTextLineEditPanel(a){cPanel.call(this,a);this.textLineEditElement=null;this.initValue=a?a.value?a.value:"":"";this.onChange=a?a.onChange?a.onChange:null:null;this.onEdit=a?a.onEdit?a.onEdit:null:null}cTextLineEditPanel.deriveFrom(cPanel);
(function(){cTextLineEditPanel.prototype.textLineEditElement=null;cTextLineEditPanel.prototype.initValue="";cTextLineEditPanel.prototype.onChange=null;cTextLineEditPanel.prototype.onEdit=null;cTextLineEditPanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);null!=this.element&&(null==this.textLineEditElement&&(this.textLineEditElement=document.createElement("INPUT"),this.textLineEditElement.type="text",this.textLineEditElement.id="pnl_"+this.instanceId+"_"+this.innerId+
"_inputtext",this.element.appendChild(this.textLineEditElement),this.textLineEditElement.value=this.initValue,this.textLineEditElement.style.fontFamily="Calibri, Arial, helvetica, sans-serif",this.textLineEditElement.style.fontSize=this.fontSize+"px",this.textLineEditElement.style.whiteSpace="nowrap",this.textLineEditElement.style.overflow="auto",this.textLineEditElement.setAttribute("wrap","off"),this.textLineEditElement.style.whiteSpace="pre",this.textLineEditElement.style.resize="none",this.textLineEditElement.style.position=
"absolute",this.textLineEditElement.style.left="0px",this.textLineEditElement.style.top="0px",this.textLineEditElement.style.margin="0px",this.textLineEditElement.style.border="1px solid black",this.textLineEditElement.style.color=this.color,this.textLineEditElement.style.backgroundColor=this.backgroundColor,this.textLineEditElement.style.paddingLeft="4px",null!==this.onEdit?(this.textLineEditElement.onchange=this.onEdit,this.textLineEditElement.onkeypress=this.onEdit,this.textLineEditElement.onpaste=
this.onEdit,this.textLineEditElement.oninput=this.onEdit):null!==this.onChange&&(this.textLineEditElement.onchange=this.onChange)),this.textLineEditElement.style.width=this.getInnerWidth()-6+"px",this.textLineEditElement.style.height=this.getInnerHeight()-4+"px")};cTextLineEditPanel.prototype.getValue=function(){var a="";null!=this.textLineEditElement&&(a=this.textLineEditElement.value);return a};cTextLineEditPanel.prototype.setValue=function(a){null!=this.textLineEditElement&&(this.textLineEditElement.value=
a)}})();
function cMasterDetailPanel(a){cPanel.call(this,a);var c=this,b=a.screen;this.data=a?"undefined"!=typeof a.data?a.data:new cDataArray:new cDataArray;this.selectedItemId=this.lastItemId=0;this.itemName=a?"undefined"!=typeof a.itemName?a.itemName:"":"";this.mainPanel=new cAutoSpanPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.panels.push(this.mainPanel);this.mainPanel_Master=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.mainPanel.panels.push(this.mainPanel_Master);this.mainPanel_DetailContainer=
new cPanel({shape:cPanel.cShapeRoundRect,borderRadius:12,align:eAlign.eClient,backgroundColor:"#b4b4b4",padding:10});this.mainPanel.panels.push(this.mainPanel_DetailContainer);this.mainPanel_DetailContainer_root=new cPanel({align:eAlign.eClient,backgroundColor:"transparent",innerHTML:""});this.mainPanel_DetailContainer.panels.push(this.mainPanel_DetailContainer_root);this.mainPanel_DetailContainer_Panel=new cPanel({align:eAlign.eClient,backgroundColor:"#b4b4b4",visible:!1});this.mainPanel_DetailContainer.panels.push(this.mainPanel_DetailContainer_Panel);
this.mainPanel_DetailContainer_Panel_ControlPanel=new cPanel({align:eAlign.eTop,height:51,backgroundColor:"transparent",borderBottom:1,borderColor:"#000000",paddingBottom:8,marginBottom:6});this.mainPanel_DetailContainer_Panel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel);this.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel=new cPanel({shape:cPanel.cShapeRoundRect,borderRadius:6,align:eAlign.eLeft,width:110,padding:4,marginRight:10,backgroundColor:"#6d6d6d",onMouseUp:function(){if(0<
c.selectedItemId){for(var a=!1,e=0;e<c.data.items.length;e++)if(c.data.items[e].id==c.selectedItemId){0<e&&(a=c.data.items[e],c.data.items[e]=c.data.items[e-1],c.data.items[e-1]=a,a=!0);break}if(a){for(e=0;e<c.mainPanel_Master_Scrollbox.panelBox.panels.length;e++)if(c.mainPanel_Master_Scrollbox.panelBox.panels[e].itemId==c.selectedItemId){0<e&&(c.mainPanel_Master_Scrollbox.panelBox.moveUpPanel(c.mainPanel_Master_Scrollbox.panelBox.panels[e]),c.mainPanel_Master_Scrollbox.scrollToPercentage(100*(e-
1)/c.mainPanel_Master_Scrollbox.panelBox.panels.length));break}c.selectItemId(c.selectedItemId);b.panel.rerender()}}}});this.mainPanel_DetailContainer_Panel_ControlPanel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel);this.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel_Button=new cPanel({align:eAlign.eLeft,width:28,backgroundColor:"transparent",image:b.getImageClone(a.upImage),imageStretch:!0});this.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel_Button);
this.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel_Label=new cPanel({align:eAlign.eClient,marginLeft:6,paddingTop:1,color:"#ffffff",backgroundColor:"transparent",innerHTML:"up",fontSize:20,fontBold:!0,noWrap:!0});this.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel_Label);this.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel=new cPanel({shape:cPanel.cShapeRoundRect,borderRadius:6,align:eAlign.eLeft,
width:110,padding:4,marginRight:10,backgroundColor:"#6d6d6d",onMouseUp:function(){if(0<c.selectedItemId){for(var a=!1,e=0;e<c.data.items.length;e++)if(c.data.items[e].id==c.selectedItemId){e<c.data.items.length-1&&(a=c.data.items[e],c.data.items[e]=c.data.items[e+1],c.data.items[e+1]=a,a=!0);break}if(a){for(e=0;e<c.mainPanel_Master_Scrollbox.panelBox.panels.length;e++)if(c.mainPanel_Master_Scrollbox.panelBox.panels[e].itemId==c.selectedItemId){e<c.mainPanel_Master_Scrollbox.panelBox.panels.length-
1&&(c.mainPanel_Master_Scrollbox.panelBox.moveDownPanel(c.mainPanel_Master_Scrollbox.panelBox.panels[e]),c.mainPanel_Master_Scrollbox.scrollToPercentage(100*(e+1)/c.mainPanel_Master_Scrollbox.panelBox.panels.length));break}c.selectItemId(c.selectedItemId);b.panel.rerender()}}}});this.mainPanel_DetailContainer_Panel_ControlPanel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel);this.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel_Button=new cPanel({align:eAlign.eLeft,
width:28,backgroundColor:"transparent",image:b.getImageClone(a.downImage),imageStretch:!0});this.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel_Button);this.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel_Label=new cPanel({align:eAlign.eClient,marginLeft:6,paddingTop:1,color:"#ffffff",backgroundColor:"transparent",innerHTML:"down",fontSize:20,fontBold:!0,noWrap:!0});this.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel_Label);
this.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel=new cPanel({shape:cPanel.cShapeRoundRect,borderRadius:6,align:eAlign.eLeft,width:110,padding:4,marginRight:10,backgroundColor:"#6d6d6d",onMouseUp:function(){if(0<c.selectedItemId){for(var a=0;a<c.data.items.length;a++)if(c.data.items[a].id==c.selectedItemId){c.data.items.splice(a,1);break}for(a=0;a<c.mainPanel_Master_Scrollbox.panelBox.panels.length;a++)if(c.mainPanel_Master_Scrollbox.panelBox.panels[a].itemId==c.selectedItemId){c.mainPanel_Master_Scrollbox.panelBox.removePanel(c.mainPanel_Master_Scrollbox.panelBox.panels[a]);
break}c.selectItemId(0);b.panel.rerender()}}});this.mainPanel_DetailContainer_Panel_ControlPanel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel);this.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel_Button=new cPanel({align:eAlign.eLeft,width:28,backgroundColor:"transparent",image:b.getImageClone(a.deleteImage),imageStretch:!0});this.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel_Button);
this.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel_Label=new cPanel({align:eAlign.eClient,marginLeft:6,paddingTop:1,color:"#ffffff",backgroundColor:"transparent",innerHTML:"delete",fontSize:20,fontBold:!0,noWrap:!0});this.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel_Label);this.mainPanel_DetailContainer_Panel_ControlPanel_HidePanel=new cPanel({align:eAlign.eRight,width:37,backgroundColor:"transparent",
image:b.getImageClone(a.closeImage),imageStretch:!0,onMouseUp:function(){c.selectItemId(0)}});this.mainPanel_DetailContainer_Panel_ControlPanel.panels.push(this.mainPanel_DetailContainer_Panel_ControlPanel_HidePanel);this.mainPanel_DetailContainer_Panel_NamePanel=new cPanel({align:eAlign.eTop,height:40,backgroundColor:"transparent"});this.mainPanel_DetailContainer_Panel.panels.push(this.mainPanel_DetailContainer_Panel_NamePanel);this.mainPanel_DetailContainer_Panel_NamePanel_Label=new cPanel({align:eAlign.eLeft,
width:90,color:"#ffffff",backgroundColor:"transparent",fontSize:24,fontBold:!0,innerHTML:"name:"});this.mainPanel_DetailContainer_Panel_NamePanel.panels.push(this.mainPanel_DetailContainer_Panel_NamePanel_Label);this.mainPanel_DetailContainer_Panel_NamePanel_Name=new cTextLineEditPanel({align:eAlign.eClient,color:"#000000",backgroundColor:"#ffffff",fontSize:24,value:"",onEdit:function(){if(0<c.selectedItemId){for(var a=null,b=0;b<c.data.items.length;b++)if(c.data.items[b].id==c.selectedItemId){a=
c.data.items[b];break}if(null!=a){a.name=c.mainPanel_DetailContainer_Panel_NamePanel_Name.getValue();for(var b=c.mainPanel_Master_Scrollbox.panelBox,g=0;g<b.panels.length;g++)if(b.panels[g].itemId==c.selectedItemId){b.panels[g].setInnerHTML(cLib.textToHTML(a.name));break}}}}});this.mainPanel_DetailContainer_Panel_NamePanel.panels.push(this.mainPanel_DetailContainer_Panel_NamePanel_Name);this.mainPanel_DetailContainer_Panel_ContentLabel=new cPanel({align:eAlign.eTop,height:45,marginTop:10,color:"#ffffff",
backgroundColor:"transparent",fontSize:24,fontBold:!0,innerHTML:"definition:"});this.mainPanel_DetailContainer_Panel.panels.push(this.mainPanel_DetailContainer_Panel_ContentLabel);this.mainPanel_DetailContainer_Panel_Content=new cTextEditPanel({align:eAlign.eClient,color:"#dddddd",backgroundColor:"#333333",fontSize:16,value:"",onChange:function(){if(0<c.selectedItemId){for(var a=null,b=0;b<c.data.items.length;b++)if(c.data.items[b].id==c.selectedItemId){a=c.data.items[b];break}null!=a&&(a.content=
c.mainPanel_DetailContainer_Panel_Content.getValue())}}});this.mainPanel_DetailContainer_Panel.panels.push(this.mainPanel_DetailContainer_Panel_Content);this.mainPanel_Master_Menu=new cPanel({align:eAlign.eTop,height:70,paddingBottom:10,backgroundColor:"transparent"});this.mainPanel_Master.panels.push(this.mainPanel_Master_Menu);this.mainPanel_Master_Menu_ButtonAdd=new cPanel({shape:cPanel.cShapeRoundRect,borderRadius:12,align:eAlign.eClient,width:200,padding:6,backgroundColor:"#6d6d6d",onMouseUp:function(){c.lastItemId++;
var a=new cDataItem({id:c.lastItemId,name:c.itemName+" "+c.lastItemId,content:""});c.data.items.push(a);a=new cPanel({shape:cPanel.cShapeRoundRect,borderRadius:12,border:1,borderColor:"#000000",align:eAlign.eTop,height:60,backgroundColor:"#6d6d6d",marginTop:6,marginLeft:6,marginRight:6,padding:10,color:"#ffffff",fontSize:24,fontBold:!0,noWrap:!0,innerHTML:cLib.textToHTML(a.name),onMouseUp:function(){c.selectedItemId==this.itemId?c.selectItemId(0):c.selectItemId(this.itemId)}});a.itemId=c.lastItemId;
c.mainPanel_Master_Scrollbox.panelBox.panels.push(a);b.panel.rerender();c.mainPanel_Master_Scrollbox.scrollToBottom();c.selectItemId(c.lastItemId)}});this.mainPanel_Master_Menu.panels.push(this.mainPanel_Master_Menu_ButtonAdd);this.mainPanel_Master_Menu_ButtonAdd.panels.push(new cPanel({align:eAlign.eLeft,width:58,marginLeft:10,backgroundColor:"transparent",image:b.getImageClone(a.addImage),imageStretch:!0}));this.mainPanel_Master_Menu_ButtonAdd.panels.push(new cPanel({align:eAlign.eClient,marginLeft:6,
paddingTop:6,color:"#ffffff",backgroundColor:"transparent",innerHTML:"new "+this.itemName,fontSize:24,fontBold:!0,noWrap:!0}));this.mainPanel_Master_Scrollbox=new cScrollboxPanel({align:eAlign.eClient,backgroundColor:"transparent",boxBackgroundColor:"#b4b4b4",scrollBarHandleColor:"#6d6d6d",autoHideScrollbar:!0});this.mainPanel_Master.panels.push(this.mainPanel_Master_Scrollbox)}cMasterDetailPanel.deriveFrom(cPanel);
(function(){cMasterDetailPanel.prototype.data=null;cMasterDetailPanel.prototype.lastItemId=0;cMasterDetailPanel.prototype.selectedItemId=0;cMasterDetailPanel.prototype.itemName="item";cMasterDetailPanel.prototype.mainPanel=null;cMasterDetailPanel.prototype.mainPanel_Master=null;cMasterDetailPanel.prototype.mainPanel_Master_Menu=null;cMasterDetailPanel.prototype.mainPanel_Master_Menu_ButtonAdd=null;cMasterDetailPanel.prototype.mainPanel_Master_Scrollbox=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer=
null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_root=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel_Button=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel_MoveUpPanel_Label=null;
cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel_Button=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel_MoveDownPanel_Label=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel_Button=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel_DeletePanel_Label=
null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ControlPanel_HidePanel=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_NamePanel=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_NamePanel_Label=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_NamePanel_Name=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_ContentLabel=null;cMasterDetailPanel.prototype.mainPanel_DetailContainer_Panel_Content=null;cMasterDetailPanel.prototype.selectItemId=
function(a){this.selectedItemId=0;this.mainPanel_DetailContainer_Panel.hide();for(var c=this.mainPanel_Master_Scrollbox.panelBox,b=0;b<c.panels.length;b++)c.panels[b].setBackgroundColor("#6d6d6d");if(0<a){for(var d=null,b=0;b<this.data.items.length;b++)if(this.data.items[b].id==a){d=this.data.items[b];break}if(null!=d){this.selectedItemId=a;for(b=0;b<c.panels.length;b++)if(c.panels[b].itemId==a){c.panels[b].setBackgroundColor("#404040");break}this.mainPanel_DetailContainer_Panel_NamePanel_Name.setValue(d.name);
this.mainPanel_DetailContainer_Panel_Content.setValue(d.content);this.mainPanel_DetailContainer_Panel.show()}}this.mainPanel_DetailContainer_Panel.rerender()};cMasterDetailPanel.prototype.setRootPanelHTMLContent=function(a){this.mainPanel_DetailContainer_root.setInnerHTML(a)}})();
function cViewWorldPanel(a){cPanel.call(this,a);var c=this;this.onEditWorld=a.onEditWorld;this.onEditWorld_This=a.onEditWorld_This;this.screen=a.screen;this.viewWorld=new cAutoSpanPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.panels.push(this.viewWorld);this.viewWorld_Edit_Master=new cAutoSpanPanel({align:eAlign.eClient,backgroundColor:"transparent",spanMethod:cAutoSpanPanel.spanMethod_vertical});this.viewWorld.panels.push(this.viewWorld_Edit_Master);this.viewWorld_Edit_Master_HTML=
new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.viewWorld_Edit_Master.panels.push(this.viewWorld_Edit_Master_HTML);this.viewWorld_Edit_Master_HTML_Header=new cPanel({align:eAlign.eTop,height:40,backgroundColor:"transparent",innerHTML:"<b>HTML body</b>"});this.viewWorld_Edit_Master_HTML.panels.push(this.viewWorld_Edit_Master_HTML_Header);this.viewWorld_Edit_Master_HTML_Edit=new cTextEditPanel({align:eAlign.eClient,color:"#dddddd",backgroundColor:"#333333",fontSize:16,value:"",
onChange:function(){Model.setWorldNowHTML(c.viewWorld_Edit_Master_HTML_Edit.getValue());c.updateWorld()}});this.viewWorld_Edit_Master_HTML.panels.push(this.viewWorld_Edit_Master_HTML_Edit);this.viewWorld_Edit_Master_CSS=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.viewWorld_Edit_Master.panels.push(this.viewWorld_Edit_Master_CSS);this.viewWorld_Edit_Master_CSS_Header=new cPanel({align:eAlign.eTop,height:40,backgroundColor:"transparent",innerHTML:"<b>CSS</b>"});this.viewWorld_Edit_Master_CSS.panels.push(this.viewWorld_Edit_Master_CSS_Header);
this.viewWorld_Edit_Master_CSS_Edit=new cTextEditPanel({align:eAlign.eClient,color:"#dddddd",backgroundColor:"#333333",fontSize:16,value:"",onChange:function(){Model.setWorldCSS(c.viewWorld_Edit_Master_CSS_Edit.getValue());c.updateWorld()}});this.viewWorld_Edit_Master_CSS.panels.push(this.viewWorld_Edit_Master_CSS_Edit);this.viewWorld_Edit_Detail=new cAutoSpanPanel({align:eAlign.eClient,backgroundColor:"transparent",spanMethod:cAutoSpanPanel.spanMethod_vertical});this.viewWorld.panels.push(this.viewWorld_Edit_Detail);
this.viewWorld_Edit_Detail_Document=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.viewWorld_Edit_Detail.panels.push(this.viewWorld_Edit_Detail_Document);this.viewWorld_Edit_Detail_Document_Header=new cPanel({align:eAlign.eTop,height:40,backgroundColor:"transparent"});this.viewWorld_Edit_Detail_Document.panels.push(this.viewWorld_Edit_Detail_Document_Header);this.viewWorld_Edit_Detail_Document_Header_Caption=new cPanel({align:eAlign.eLeft,width:80,backgroundColor:"transparent",
innerHTML:"<b>World</b>"});this.viewWorld_Edit_Detail_Document_Header.panels.push(this.viewWorld_Edit_Detail_Document_Header_Caption);this.viewWorld_Edit_Detail_Document_Header_Refresh=new cPanel({align:eAlign.eLeft,width:34,marginBottom:6,backgroundColor:"transparent",image:this.screen.getImageClone(a.refreshImage),imageStretch:!0,onClick:function(){c.updateWorld()}});this.viewWorld_Edit_Detail_Document_Header.panels.push(this.viewWorld_Edit_Detail_Document_Header_Refresh);this.viewWorld_Edit_Detail_Document_View=
new cIFramePanel({align:eAlign.eClient,backgroundColor:"transparent",border:1,borderColor:"#000000",iFrameHTML:"",supportScroll:!0,zoom:1});this.viewWorld_Edit_Detail_Document.panels.push(this.viewWorld_Edit_Detail_Document_View)}cViewWorldPanel.deriveFrom(cPanel);
(function(){cViewWorldPanel.prototype.screen=null;cViewWorldPanel.prototype.viewWorld=null;cViewWorldPanel.prototype.viewWorld_Edit_Master=null;cViewWorldPanel.prototype.viewWorld_Edit_Master_HTML=null;cViewWorldPanel.prototype.viewWorld_Edit_Master_HTML_Header=null;cViewWorldPanel.prototype.viewWorld_Edit_Master_HTML_Edit=null;cViewWorldPanel.prototype.viewWorld_Edit_Master_CSS=null;cViewWorldPanel.prototype.viewWorld_Edit_Master_CSS_Header=null;cViewWorldPanel.prototype.viewWorld_Edit_Master_CSS_Edit=
null;cViewWorldPanel.prototype.viewWorld_Edit_Detail=null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Document=null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Document_Header=null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Document_Header_Caption=null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Document_Header_Refresh=null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Document_View=null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Help=null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Help_Header=
null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Help_Header_Caption=null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Help_View=null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Help_View_scrollPanel=null;cViewWorldPanel.prototype.viewWorld_Edit_Detail_Help_View_scrollPanel_content=null;cViewWorldPanel.prototype.onEditWorld=null;cViewWorldPanel.prototype.onEditWorld_This=null;cViewWorldPanel.prototype.reloadWorld=function(){this.viewWorld_Edit_Master_HTML_Edit&&this.viewWorld_Edit_Master_HTML_Edit.setValue(Model.getWorldNowHTML());
this.viewWorld_Edit_Master_CSS_Edit&&this.viewWorld_Edit_Master_CSS_Edit.setValue(Model.getWorldCSS());this.updateWorld()};cViewWorldPanel.prototype.updateWorld=function(){if(this.viewWorld_Edit_Detail_Document_View){var a=this;setTimeout(function(){var c=Model.getWorldNowFullHTML();a.viewWorld_Edit_Detail_Document_View.setContent(c);if(a.onEditWorld)if(a.onEditWorld_This)a.onEditWorld.apply(a.onEditWorld_This,[]);else a.onEditWorld()},100)}}})();
function cViewChangesPanel(a){cPanel.call(this,a);var c=this;this.screen=a.screen;this.viewChanges=new cAutoSpanPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.panels.push(this.viewChanges);this.viewChanges_Edit_Master_Actions=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.viewChanges.panels.push(this.viewChanges_Edit_Master_Actions);this.viewChanges_Edit_Master_Actions_Header=new cPanel({align:eAlign.eTop,height:40,backgroundColor:"transparent",innerHTML:"<b>Changes (JavaScript/jQuery)</b>"});
this.viewChanges_Edit_Master_Actions.panels.push(this.viewChanges_Edit_Master_Actions_Header);this.viewChanges_Edit_Master_Actions_Edit=new cTextEditPanel({align:eAlign.eClient,color:"#dddddd",backgroundColor:"#333333",fontSize:16,value:"",onChange:function(){Model.setActions(c.viewChanges_Edit_Master_Actions_Edit.getValue())}});this.viewChanges_Edit_Master_Actions.panels.push(this.viewChanges_Edit_Master_Actions_Edit);this.viewChanges_Edit_Detail=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});
this.viewChanges.panels.push(this.viewChanges_Edit_Detail);this.viewChanges_Edit_Detail_Header=new cPanel({align:eAlign.eTop,height:40,backgroundColor:"transparent",innerHTML:"<b>Problem Solver Changes API documentation</b>"});this.viewChanges_Edit_Detail.panels.push(this.viewChanges_Edit_Detail_Header);this.viewChanges_Edit_Detail_View=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.viewChanges_Edit_Detail.panels.push(this.viewChanges_Edit_Detail_View);this.viewChanges_Edit_Detail_View_scrollPanel=
new cScrollboxPanel({align:eAlign.eClient,backgroundColor:"transparent",boxBackgroundColor:"#ffeead",scrollBarHandleColor:"#666666",autoHideScrollbar:!0});this.viewChanges_Edit_Detail_View.panels.push(this.viewChanges_Edit_Detail_View_scrollPanel);this.viewChanges_Edit_Detail_View_scrollPanel_content=new cPanel({align:eAlign.eTop,height:4E3,padding:20,backgroundColor:"transparent",textSelectable:!0,innerHTML:'<div style="position: static; font-size: 32px; font-weight: bold;">\n  Changes\n</div>\nThe "changes" define the voluntary and involuntary actions - the dynamic rules of the game.\nThe code entered here is applied to a world (world = HTML document), and the purpose of this\ncode is to create new worlds - new possible worlds which may succeed the current world.\nThis code is then applied to those new worlds too, and so on. This results in many worlds,\nbranching out like a tree, growing exponentially. The tree of all these possible worlds is\ncalled the "multiverse". The term "multiverse" is borrowed from quantum mechanics,\nbecause of the similarities to the\n<a href="http://en.wikipedia.org/wiki/Many-worlds_interpretation" target="_blank">many-worlds interpretation</a>.\nThe multiverse is also similar to the\n<a href="http://en.wikipedia.org/wiki/Game_tree" target="_blank">game tree</a> in\n<a href="http://en.wikipedia.org/wiki/Game_theory" target="_blank">game theory</a>,\nor the <a href="http://en.wikipedia.org/wiki/Decision_tree" target="_blank">decision tree</a> in\n<a href="http://en.wikipedia.org/wiki/Decision_analysis" target="_blank">decision analysis</a>.\n<br />\nWith JavaScript code you can generate multiple possible worlds (world = HTML document) as follows:\n<ol>\n  <li>Create multiple choices using one of the choose() methods.</li>\n  <li>Manipulate the current world (HTML document) using DOM and/or jQuery commands.</li>\n  <li>Register the manipulated HTML document as a new world with the\n      <span style="font-family: \'Courier New\', Courier, monospace;">multiverse.world()</span> function.</li>\n</ol>\nTo create multiple branches of options, you can use\n<span style="font-family: \'Courier New\', Courier, monospace;">Array.choose()</span> or\n<span style="font-family: \'Courier New\', Courier, monospace;">jQuery.choose()</span> to\ntell Problem Solver to apply this code multiple times to a single world, for each combination of\noptions returned by the choose() method. This is how you create multiple voluntary options.\nThis code may (depending on conditions set in the "evaluate" code) then automatically be\napplied to any of the newly created documents, which in turn will generate more worlds,\nand so on. This is how the "multiverse" gets created.<br />\nNote: the code you enter may contain multiple calls to choose()!<br />\n<br />\n<br />\n<div style="position: static; background-color: #2A2A1A; padding: 10px;\n font-family: \'Courier New\', Courier, monospace; font-size: 18px;\n color: #dddddd;">\n  Array.choose( atLeast, atMost )\n</div>\n<div style="position: static; background-color: #cccccc; border: 2px solid #2A2A1A; padding: 10px; font-size: 16px;">\n  The Array.choose() method performs the following:\n  <div style="position: static; margin-left: 20px; font-size: 16px;">\n    1. Determine all the combinations of subsets of items in the array, where the subset contains\n    at least <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atLeast</span> items, and at most\n    <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atMost</span> items.\n    <br />\n    2. Tell Problem Solver to run the entire code in the current world for each possible combination.<br />\n    3. During each run of the code, the method returns the selected combination (subset) of items.\n  </div>\n  The <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atMost</span> argument must be greater than or equal to\n  <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atLeast</span>.\n  If <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atMost</span> is undefined\n  then it is assumed to be equal to <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atLeast</span>.\n  <br />\n  &nbsp;<br />\n  <b>Example:</b>\n  <div style="position: static; margin-left: 20px;">\n    The example code below will get executed 3 times in a single run.\n    This is because there are three ways of selecting at least 1 item and at most 2 items from a set of 2 items.<br />\n    In the first run the choice variable will be set to ["A"].<br />\n    In the second run the choice variable will be set to ["B"].<br />\n    In the third run the choice variable will be set to ["A", "B"].\n  </div>\n  <div style="position: static; margin-left: 20px; background-color: #333333; padding: 10px;\n     font-family: \'Courier New\', Courier, monospace; font-size: 16px;\n     color: #dddddd;">\n    var choice = [ "A", "B" ].choose( 1, 2 );<br />\n    new multiverse.world( choice.toString() );\n  </div>\n</div>\n<br />\n<div style="position: static; background-color: #2A2A1A; padding: 10px;\n font-family: \'Courier New\', Courier, monospace; font-size: 18px;\n color: #dddddd;">\n  Array.chooseOne()\n</div>\n<div style="position: static; background-color: #cccccc; border: 2px solid #2A2A1A; padding: 10px; font-size: 16px;">\n  The Array.chooseOne() method is equivalent to calling Array.choose( 1, 1 )[0] or Array.choose( 1 )[0].\n  Note that the method returns a single element, and not an array.\n  <br />\n  &nbsp;<br />\n  <b>Example:</b>\n  <div style="position: static; margin-left: 20px;">\n    The example code below will get executed twice in a single run.\n    This is because there are two ways of selecting a single item from a set of 2 items.<br />\n    In the first run the toss variable will be set to ["heads"].<br />\n    In the second run the toss variable will be set to ["tails"].\n  </div>\n  <div style="position: static; margin-left: 20px; background-color: #333333; padding: 10px;\n     font-family: \'Courier New\', Courier, monospace; font-size: 16px;\n     color: #dddddd;">\n    var toss = [ "heads", "tails" ].chooseOne();<br />\n    new multiverse.world( toss );\n  </div>\n  &nbsp;<br />\n  <b>Example:</b>\n  <div style="position: static; margin-left: 20px;">\n    The example code below will get executed twice in a single run.\n    This is because there are two ways of selecting a single item from a set of 2 items.<br />\n    In the first run the measurement variable will be set to 0.<br />\n    In the second run the measurement variable will be set to 1.\n  </div>\n  <div style="position: static; margin-left: 20px; background-color: #333333; padding: 10px;\n     font-family: \'Courier New\', Courier, monospace; font-size: 16px;\n     color: #dddddd;">\n    var qubit = [ 0, 1 ];<br />\n    var measurement = qubit.chooseOne();<br />\n    new multiverse.world( "measured: " + measurement );\n  </div>\n</div>\n<br />\n<div style="position: static; background-color: #2A2A1A; padding: 10px;\n font-family: \'Courier New\', Courier, monospace; font-size: 18px;\n color: #dddddd;">\njQuery.choose( atLeast, atMost )\n</div>\n<div style="position: static; background-color: #cccccc; border: 2px solid #2A2A1A; padding: 10px; font-size: 16px;">\n  The jQuery.choose() method (a jQuery plugin) is similar to the Array.choose() method, except it deals\n  with jQuery\'s DOM elements instead of array elements.<br />\n  The jQuery.choose() method performs the following:\n  <div style="position: static; margin-left: 20px; font-size: 16px;">\n    1. Given a jQuery object that represents a set of DOM elements,\n    determine all the combinations of subsets of elements, where the subset consists of\n    at least <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atLeast</span> elements, and at most\n    <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atMost</span> elements.\n    <br />\n    2. Tell Problem Solver to run the entire code in the current world for each possible combination.<br />\n    3. During each run of the code, the method returns a new jQuery object containing the selected\n    combination (subset) of elements.\n  </div>\n  The <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atMost</span> argument must be greater than or equal to\n  <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atLeast</span>.\n  If <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atMost</span> is undefined\n  then it is assumed to be equal to <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A; color: #dddddd;">atLeast</span>.\n  <br />\n  &nbsp;<br />\n  <b>Example:</b>\n  <div style="position: static; margin-left: 20px;">\n    The example code below will ...\n  </div>\n  <div style="position: static; margin-left: 20px; background-color: #333333; padding: 10px;\n     font-family: \'Courier New\', Courier, monospace; font-size: 16px;\n     color: #dddddd;">\n    $( ".matchstick" ).choose( 1, 3 ).remove();<br />\n    new multiverse.world();\n  </div>\n</div>\n<br />\n<div style="position: static; background-color: #2A2A1A; padding: 10px;\n font-family: \'Courier New\', Courier, monospace; font-size: 18px;\n color: #dddddd;">\njQuery.chooseOne()\n</div>\n<div style="position: static; background-color: #cccccc; border: 2px solid #2A2A1A; padding: 10px; font-size: 16px;">\n  The jQuery.chooseOne() method (a jQuery plugin) is equivalent to calling jQuery.choose( 1, 1 ) or\n  jQuery.choose( 1 ).<br />\n  The jQuery.chooseOne() method performs the following:\n  <div style="position: static; margin-left: 20px; font-size: 16px;">\n    1. Given a jQuery object that represents a set of DOM elements,\n    select a single element.<br />\n    2. Tell Problem Solver to re-run the entire code, selecting a different element each time,\n    until each element has been selected.<br />\n    3. During each run of the code, the method returns a new jQuery object containing the selected\n    element.\n  </div>\n  <br />\n  &nbsp;<br />\n  <b>Example:</b>\n  <div style="position: static; margin-left: 20px;">\n    The example code below will select a single td cell and fill it with the text "X".\n    It will run this code for each empty cell, generating a new world for each cell it selected.\n    The resulting multiverse will be finite, because eventually all cells will be filled with "X".\n  </div>\n  <div style="position: static; margin-left: 20px; background-color: #333333; padding: 10px;\n     font-family: \'Courier New\', Courier, monospace; font-size: 16px;\n     color: #dddddd;">\n    $( "#td:empty" ).chooseOne().text( "X" );<br />\n    new multiverse.world();\n  </div>\n</div>\n<br />\n<div style="position: static; background-color: #2A2A1A; padding: 10px;\n font-family: \'Courier New\', Courier, monospace; font-size: 18px;\n color: #dddddd;">\nmultiverse.world( changeDescription )\n</div>\n<div style="position: static; background-color: #cccccc; border: 2px solid #2A2A1A; padding: 10px; font-size: 16px;">\n  The multiverse.world() function tells Problem Solver to create a new world that represents a\n  possible future, a possible succession to the current world. The new world will be set with\n  with the current state of the manipulated HTML. Note that the "new" operator (frequently used in the\n  examples) is optional.<br />\n  The optional <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A;\n    color: #dddddd;">changeDescription</span> argument is a string that describes the action,\n  how the new world was created. This string is displayed as part of the newly created world,\n  made visible in the multiverse viewer.\n  <br />\n  &nbsp;<br />\n  <b>Example:</b>\n  <div style="position: static; margin-left: 20px;">\n    The example code below will select a one of the numbers in the array and create a new (identical) world, recording the\n    chosen number.\n    It will run this code for each new world created, generating six new worlds each run, and so on.\n  </div>\n  <div style="position: static; margin-left: 20px; background-color: #333333; padding: 10px;\n     font-family: \'Courier New\', Courier, monospace; font-size: 16px;\n     color: #dddddd;">\n    var dice = [ 1, 2, 3, 4, 5, 6 ];<br />\n    var diceRoll = dice.chooseOne();<br />\n    new multiverse.world( "threw " + diceRoll );\n  </div>\n</div>\n<br />\n'});
this.viewChanges_Edit_Detail_View_scrollPanel.panelBox.panels.push(this.viewChanges_Edit_Detail_View_scrollPanel_content)}cViewChangesPanel.deriveFrom(cPanel);
(function(){cViewChangesPanel.prototype.screen=null;cViewChangesPanel.prototype.viewChanges=null;cViewChangesPanel.prototype.viewChanges_Edit_Master_Actions=null;cViewChangesPanel.prototype.viewChanges_Edit_Master_Actions_Header=null;cViewChangesPanel.prototype.viewChanges_Edit_Master_Actions_Edit=null;cViewChangesPanel.prototype.viewChanges_Edit_Detail=null;cViewChangesPanel.prototype.viewChanges_Edit_Detail_Header=null;cViewChangesPanel.prototype.viewChanges_Edit_Detail_View=null;cViewChangesPanel.prototype.viewChanges_Edit_Detail_View_scrollPanel=
null;cViewChangesPanel.prototype.viewChanges_Edit_Detail_View_scrollPanel_content=null;cViewChangesPanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);null!=this.element&&(a=1E3+(16E5/(this.viewChanges_Edit_Detail_View_scrollPanel.panelBox.getInnerWidth()+1)|0),this.viewChanges_Edit_Detail_View_scrollPanel_content.height!=a&&(this.viewChanges_Edit_Detail_View_scrollPanel_content.setHeight(a),this.viewChanges_Edit_Detail_View_scrollPanel.rerender()))};cViewChangesPanel.prototype.reloadWorld=
function(){this.viewChanges_Edit_Master_Actions_Edit&&this.viewChanges_Edit_Master_Actions_Edit.setValue(Model.getActions())}})();
function cViewEvaluatePanel(a){cPanel.call(this,a);var c=this;this.screen=a.screen;this.viewEvaluate=new cAutoSpanPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.panels.push(this.viewEvaluate);this.viewEvaluate_Edit_Master_Evaluations=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.viewEvaluate.panels.push(this.viewEvaluate_Edit_Master_Evaluations);this.viewEvaluate_Edit_Master_Evaluations_Header=new cPanel({align:eAlign.eTop,height:40,backgroundColor:"transparent",
innerHTML:"<b>Evaluations (JavaScript/jQuery)</b>"});this.viewEvaluate_Edit_Master_Evaluations.panels.push(this.viewEvaluate_Edit_Master_Evaluations_Header);this.viewEvaluate_Edit_Master_Evaluations_Edit=new cTextEditPanel({align:eAlign.eClient,color:"#dddddd",backgroundColor:"#333333",fontSize:16,value:"",onChange:function(){Model.setEvaluations(c.viewEvaluate_Edit_Master_Evaluations_Edit.getValue())}});this.viewEvaluate_Edit_Master_Evaluations.panels.push(this.viewEvaluate_Edit_Master_Evaluations_Edit);
this.viewEvaluate_Edit_Detail=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.viewEvaluate.panels.push(this.viewEvaluate_Edit_Detail);this.viewEvaluate_Edit_Detail_Header=new cPanel({align:eAlign.eTop,height:40,backgroundColor:"transparent",innerHTML:"<b>Problem Solver Evaluations API documentation</b>"});this.viewEvaluate_Edit_Detail.panels.push(this.viewEvaluate_Edit_Detail_Header);this.viewEvaluate_Edit_Detail_View=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});
this.viewEvaluate_Edit_Detail.panels.push(this.viewEvaluate_Edit_Detail_View);this.viewEvaluate_Edit_Detail_View_scrollPanel=new cScrollboxPanel({align:eAlign.eClient,backgroundColor:"transparent",boxBackgroundColor:"#ffeead",scrollBarHandleColor:"#666666",autoHideScrollbar:!0});this.viewEvaluate_Edit_Detail_View.panels.push(this.viewEvaluate_Edit_Detail_View_scrollPanel);this.viewEvaluate_Edit_Detail_View_scrollPanel_content=new cPanel({align:eAlign.eTop,height:2E3,padding:20,backgroundColor:"transparent",
textSelectable:!0,innerHTML:'<div style="position: static; font-size: 32px; font-weight: bold;">\n  Evaluations\n</div>\nThe "evaluations" define a world\'s score, whether a world is favorable or not, whether a goal has been reached,\nor whether a world is illegal (as with games or puzzles). These are known as the static rules of the game.\nIt is similar to the <a href="http://en.wikipedia.org/wiki/Evaluation_function" target="_blank">evaluation function</a> or "payoff function" in game theory.\nAs you will notice in the multiverse viewer, the multiverse usually grows very fast (exponentially),\nlike many <a href="http://en.wikipedia.org/wiki/Game_tree" target="_blank">game trees</a> do.\nThe evaluations are <a href="http://en.wikipedia.org/wiki/Heuristic" target="_blank">heuristics</a>\nthat help limit the growth of the multiverse.\nEvaluations help in restricting the number of choices, possibly constraining the path towards a\ndesirable outcome, making it easier to overview the multiverse and find a favorable path.\nEvaluations can also help to highlight good paths, or warn for bad outcomes.\nWith JavaScript code you can evaluate a world (world = HTML document) as follows:\n<ol>\n  <li>Access the world (HTML document) using DOM and/or jQuery commands, and determine whether the world satisfies some condition.\n  <li>Mark the world with any of the built-in evaluation functions (e.g. \n      <span style="font-family: \'Courier New\', Courier, monospace;">world.like()</span>).</li>\n</ol>\n<br />\n<br />\n<div style="position: static; background-color: #2A2A1A; padding: 10px;\n font-family: \'Courier New\', Courier, monospace; font-size: 18px;\n color: #dddddd;">\n  world.goal( goalDescription )\n</div>\n<div style="position: static; background-color: #cccccc; border: 2px solid #2A2A1A; padding: 10px; font-size: 16px;">\n  The world.goal() method tells Problem Solver to mark the current world as qualifying as having achieved the goal.\n  The search expansion ends at such a goal world, and further expansion from this world is disabled.\n  A goal-world is colored <span style="background-color: #339933;">&nbsp;green&nbsp;</span> in the multiverse viewer.\n  The optional <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A;\n    color: #dddddd;">goalDescription</span> argument is a string to describe the goal, which is shown in the multiverse viewer.\n  \n  <br />\n  <br />\n  <b>Example:</b>\n  <div style="position: static; margin-left: 20px;">\n    The example code below will determine whether there are 8 queens on the chessboard and, if so, mark the world as a goal.\n  </div>\n  <div style="position: static; margin-left: 20px; background-color: #333333; padding: 10px;\n     font-family: \'Courier New\', Courier, monospace; font-size: 16px;\n     color: #dddddd;">\n    if ($("chessboard queen").length == 8) {<br />\n    &nbsp;&nbsp;world.goal("Solution!");<br />\n    }\n  </div>\n</div>\n<br />\n<br />\n<div style="position: static; background-color: #2A2A1A; padding: 10px;\n font-family: \'Courier New\', Courier, monospace; font-size: 18px;\n color: #dddddd;">\n  world.illegal( illegalReason )\n</div>\n<div style="position: static; background-color: #cccccc; border: 2px solid #2A2A1A; padding: 10px; font-size: 16px;">\n  The world.goal() method tells Problem Solver to mark the current world as illegal.\n  The search expansion ends at such am illegal world, and further expansion from this world is disabled.\n  An illegal world is colored <span style="background-color: #ff4444;">&nbsp;red&nbsp;</span> in the multiverse viewer.\n  The optional <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A;\n    color: #dddddd;">illegalReason</span> argument is a string to describe the reason why the world is illegal, which is shown in the multiverse viewer.<br />\n  <span style="font-weight: bold;">*</span> Note that the illegal worlds can be ommitted from the multiverse viewer by disabling the "hide/ignore illegal world" within the "options" panel.\n  \n  <br />\n  <br />\n  <b>Example:</b>\n  <div style="position: static; margin-left: 20px;">\n    The example code below will determine whether there is more than one piece on any position on the chessboard and, if so, mark the world as a illegal.\n  </div>\n  <div style="position: static; margin-left: 20px; background-color: #333333; padding: 10px;\n     font-family: \'Courier New\', Courier, monospace; font-size: 16px;\n     color: #dddddd;">\n    if ($("chessboard position piece").length > 1) {<br />\n    &nbsp;&nbsp;world.illegal("A position is not allowed to hold more than one piece.");<br />\n    }\n  </div>\n</div>\n<br />\n<br />\n<div style="position: static; background-color: #2A2A1A; padding: 10px;\n font-family: \'Courier New\', Courier, monospace; font-size: 18px;\n color: #dddddd;">\n  world.like( likeScore )\n</div>\n<div style="position: static; background-color: #cccccc; border: 2px solid #2A2A1A; padding: 10px; font-size: 16px;">\n  The world.like() method tells Problem Solver to increment the like-score of the current world.\n  The optional <span style="font-family: \'Courier New\', Courier, monospace; background-color: #2A2A1A;\n    color: #dddddd;">likeScore</span> argument is the like-score to add to the world\'s current like-score.\n  The default value is "1".\n  The initial like-score of a world is zero. If a world\'s like-score is non-zero, then its value is shown\n  in the multiverse viewer. If the like-score is positive, then the background is colored <span style="background-color: #FFAE3C;">orange</span>.\n  If the like-score is negative, then the background is colored <span style="background-color: #FFBBBB;">&nbsp;light&nbsp;red&nbsp;</span>.<br />\n  <span style="font-weight: bold;">*</span> Note that when the search method in the multiverse-viewer is set to "high like-score first", then auto-search\n  function will follow the path of the world\'s highest score.\n  <br />\n  <br />\n  <b>Example:</b>\n  <div style="position: static; margin-left: 20px;">\n    The example code below will determine the number of "person" tags with the class set to "happy" and set this as the like-score.\n  </div>\n  <div style="position: static; margin-left: 20px; background-color: #333333; padding: 10px;\n     font-family: \'Courier New\', Courier, monospace; font-size: 16px;\n     color: #dddddd;">\n    world.like($(\'person.happy\').length);\n  </div>\n</div>\n<br />\n'});
this.viewEvaluate_Edit_Detail_View_scrollPanel.panelBox.panels.push(this.viewEvaluate_Edit_Detail_View_scrollPanel_content)}cViewEvaluatePanel.deriveFrom(cPanel);
(function(){cViewEvaluatePanel.prototype.screen=null;cViewEvaluatePanel.prototype.viewEvaluate=null;cViewEvaluatePanel.prototype.viewEvaluate_Edit_Master_Evaluations=null;cViewEvaluatePanel.prototype.viewEvaluate_Edit_Master_Evaluations_Header=null;cViewEvaluatePanel.prototype.viewEvaluate_Edit_Master_Evaluations_Edit=null;cViewEvaluatePanel.prototype.viewEvaluate_Edit_Detail=null;cViewEvaluatePanel.prototype.viewEvaluate_Edit_Detail_Header=null;cViewEvaluatePanel.prototype.viewEvaluate_Edit_Detail_View=
null;cViewEvaluatePanel.prototype.viewEvaluate_Edit_Detail_View_scrollPanel=null;cViewEvaluatePanel.prototype.viewEvaluate_Edit_Detail_View_scrollPanel_content=null;cViewEvaluatePanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);null!=this.element&&(a=1E3+(8E5/(this.viewEvaluate_Edit_Detail_View_scrollPanel.panelBox.getInnerWidth()+1)|0),this.viewEvaluate_Edit_Detail_View_scrollPanel_content.height!=a&&(this.viewEvaluate_Edit_Detail_View_scrollPanel_content.setHeight(a),
this.viewEvaluate_Edit_Detail_View_scrollPanel.rerender()))};cViewEvaluatePanel.prototype.reloadWorld=function(){this.viewEvaluate_Edit_Master_Evaluations_Edit&&this.viewEvaluate_Edit_Master_Evaluations_Edit.setValue(Model.getEvaluations())}})();
function cMultiverseFuturePanel(a){cPanel.call(this,a);var c=this;this.backgroundColor="transparent";this.screen=a.screen;this.future=a.future?a.future:null;this.state=a.state?a.state:"";this.stateColor=a.stateColor?a.stateColor:"#000000";this.changesImageId=a.changesImageId;this.evaluateImageId=a.evaluateImageId;this.containerPanel=new cPanel({align:eAlign.eHeight,left:0,width:cMultiverseFuturePanel.cViewColumnWidth-8,backgroundColor:"transparent",onTap:function(){this.stopBubble=!0;c.openDetailPanel()}});
this.panels.push(this.containerPanel);this.iFramePanel=new cIFramePanel({align:eAlign.eLeft,width:(cMultiverseFuturePanel.cViewColumnWidth/2|0)-4,backgroundColor:"transparent",iFrameHTML:"",supportScroll:!1,zoom:0.3});this.containerPanel.panels.push(this.iFramePanel);this.iFramePanel.setContent(Model.getFutureFullHTML(this.future));this.infoPanel=new cPanel({align:eAlign.eClient,backgroundColor:"#96ceb4",color:"#000000",fontSize:12});this.containerPanel.panels.push(this.infoPanel);this.infoPanelAction=
new cPanel({align:eAlign.eTop,height:cMultiverseFuturePanel.cViewHeight/2|0,backgroundColor:"#96ceb4",color:"#000000",fontSize:12,textAlign:eTextAlign.eCenter,innerHTML:this.future.id==Model.multiverse.worldNow.id?"now":cLib.textToHTML(this.future.actionDescription)});this.infoPanel.panels.push(this.infoPanelAction);this.infoPanelEvaluation=new cPanel({align:eAlign.eTop,height:cMultiverseFuturePanel.cViewHeight/2|0,backgroundColor:this.stateColor,color:"#000000",fontSize:12,textAlign:eTextAlign.eCenter,
innerHTML:this.state});this.infoPanel.panels.push(this.infoPanelEvaluation)}cMultiverseFuturePanel.deriveFrom(cPanel);
(function(){cMultiverseFuturePanel.cViewColumnWidth=180;cMultiverseFuturePanel.cViewHeight=100;cMultiverseFuturePanel.evaluationColor=function(a){var c="#ffeead";a.evaluation.illegal?c="#ff4444":a.evaluation.goal?c="#339933":a.evaluation.ignore?c="#666666":a.evaluation.end?c="#666666":0<a.evaluation.like?c="#FFAE3C":0>a.evaluation.like&&(c="#FFBBBB");return c};cMultiverseFuturePanel.evaluationText=function(a){var c="";""!=a.evaluation.evaluationDescription?c=a.evaluation.evaluationDescription:a.evaluation.illegal?
c="illegal":a.evaluation.goal?c="goal":a.evaluation.ignore?c="ignore":a.evaluation.end?c="end":0<a.evaluation.like?c=""+a.evaluation.like:0>a.evaluation.like&&(c=""+a.evaluation.like);return c};cMultiverseFuturePanel.prototype.screen=null;cMultiverseFuturePanel.prototype.future=null;cMultiverseFuturePanel.prototype.state="";cMultiverseFuturePanel.prototype.stateColor="#000000";cMultiverseFuturePanel.prototype.containerPanel=null;cMultiverseFuturePanel.prototype.iFramePanel=null;cMultiverseFuturePanel.prototype.infoPanel=
null;cMultiverseFuturePanel.prototype.infoPanelAction=null;cMultiverseFuturePanel.prototype.infoPanelEvaluation=null;cMultiverseFuturePanel.prototype.changesImageId=null;cMultiverseFuturePanel.prototype.evaluateImageId=null;cMultiverseFuturePanel.prototype.setState=function(a){this.state!=a&&(this.state=a,this.infoPanelEvaluation.setInnerHTML(cLib.textToHTML(this.state)))};cMultiverseFuturePanel.prototype.setStateColor=function(a){this.stateColor!=a&&(this.stateColor=a,this.infoPanelEvaluation.backgroundColor=
this.stateColor)};cMultiverseFuturePanel.prototype.setFocusLine=function(a){a=(this.getInnerWidth()-(cMultiverseFuturePanel.cViewColumnWidth-8))/2|0;this.containerPanel.setLeft(a)};cMultiverseFuturePanel.prototype.openDetailPanel=function(a){var c=this,b=new clsModalPanel({onClick:function(){setTimeout(function(){c.screen.panel.removePanel(b)},10)}});this.screen.panel.appendPanel(b);b.futureDetailPanel=new cPanel({align:eAlign.eClient,shape:cPanel.cShapeRoundRect,marginLeft:100,marginTop:40,marginRight:100,
marginBottom:40,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",color:"#ffffff",fontSize:36,onClick:function(){this.stopBubble=!0}});b.contentPanel.panels.push(b.futureDetailPanel);b.futureDetailPanel.headerPanel=new cPanel({align:eAlign.eTop,height:50,paddingLeft:20,backgroundColor:"#444444",color:"#eeeeee",fontSize:36,innerHTML:"Future world"});b.futureDetailPanel.panels.push(b.futureDetailPanel.headerPanel);b.futureDetailPanel.bottomPanel=new cPanel({align:eAlign.eBottom,
height:70,paddingLeft:20,backgroundColor:"#444444"});b.futureDetailPanel.panels.push(b.futureDetailPanel.bottomPanel);b.futureDetailPanel.bottomPanel.cancelButton=new cPanel({align:eAlign.eCenterVertical,shape:cPanel.cShapeRoundRect,width:200,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"close",onClick:function(){this.stopBubble=!0;setTimeout(function(){c.screen.panel.removePanel(b)},
10)}});b.futureDetailPanel.bottomPanel.panels.push(b.futureDetailPanel.bottomPanel.cancelButton);b.futureDetailPanel.spanPanel=new cAutoSpanPanel({align:eAlign.eClient,backgroundColor:"transparent",spanMethod:cAutoSpanPanel.spanMethod_auto});b.futureDetailPanel.panels.push(b.futureDetailPanel.spanPanel);b.futureDetailPanel.masterPanel=new cScrollboxPanel({align:eAlign.eClient,panelBoxRoundedBorder:!1,marginLeft:10,marginRight:10,paddingTop:20,paddingBottom:20,backgroundColor:"transparent",boxBackgroundColor:"#262626",
scrollBarHandleColor:"#666666",autoHideScrollbar:!0});b.futureDetailPanel.spanPanel.panels.push(b.futureDetailPanel.masterPanel);a=[];for(var d=this.future;null!=d;)a.splice(0,0,d),d=d.past;for(var e=[],g=0,l=a.length;g<l;g++){var d=a[g],k=new cPanel({align:eAlign.eTop,marginTop:4,marginBottom:4,height:cMultiverseFuturePanel.cViewHeight+8,backgroundColor:d.id==this.future.id?"#cccccc":"#333333",onClick:function(){for(var a=0,c=e.length;a<c;a++){var d=e[a];d.future.id==this.future.id?d.setBackgroundColor("#cccccc"):
d.setBackgroundColor("#333333")}b.futureDetailPanel.detailPanel.spanPanel.worldPanel.iFramePanel.setContent(Model.getFutureFullHTML(this.future));b.futureDetailPanel.detailPanel.spanPanel.worldPanel.htmlCodePanel.setValue(this.future.worldHTML);b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel.textPanel.setInnerHTML(cLib.textToHTML(this.future.actionDescription));b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.textPanel.setBackgroundColor(cMultiverseFuturePanel.evaluationColor(this.future));
b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.textPanel.setInnerHTML(cLib.textToHTML(cMultiverseFuturePanel.evaluationText(this.future)))}});k.future=d;b.futureDetailPanel.masterPanel.panelBox.panels.push(k);e.push(k);k.containerPanel=new cPanel({align:eAlign.eCenterVertical,width:cMultiverseFuturePanel.cViewColumnWidth-8,backgroundColor:"transparent",borderLeft:1,borderRight:1,borderColor:"#000000"});k.panels.push(k.containerPanel);k.iFramePanel=new cIFramePanel({align:eAlign.eLeft,
width:(cMultiverseFuturePanel.cViewColumnWidth/2|0)-4,backgroundColor:"transparent",iFrameHTML:"",supportScroll:!1,zoom:0.3});k.containerPanel.panels.push(k.iFramePanel);k.iFramePanel.setContent(Model.getFutureFullHTML(d));k.infoPanel=new cPanel({align:eAlign.eClient,backgroundColor:"#96ceb4",color:"#000000",fontSize:12});k.containerPanel.panels.push(k.infoPanel);k.infoPanelAction=new cPanel({align:eAlign.eTop,height:cMultiverseFuturePanel.cViewHeight/2|0,backgroundColor:"#96ceb4",color:"#000000",
fontSize:12,textAlign:eTextAlign.eCenter,innerHTML:d.id==Model.multiverse.worldNow.id?"now":cLib.textToHTML(d.actionDescription)});k.infoPanel.panels.push(k.infoPanelAction);k.infoPanelEvaluation=new cPanel({align:eAlign.eTop,height:cMultiverseFuturePanel.cViewHeight/2|0,backgroundColor:cMultiverseFuturePanel.evaluationColor(d),color:"#000000",fontSize:12,textAlign:eTextAlign.eCenter,innerHTML:cLib.textToHTML(cMultiverseFuturePanel.evaluationText(d))});k.infoPanel.panels.push(k.infoPanelEvaluation);
k.levelIndicator=new cPanel({align:eAlign.eRight,width:cMultiverseFuturePanel.cViewColumnWidth/2|0,paddingTop:cMultiverseFuturePanel.cViewHeight/5|0,backgroundColor:"#666666",transparencyPercentage:50,color:"#ffffff",fontSize:36,borderColor:"#333333",borderTop:1,borderBottom:1,textAlign:eTextAlign.eCenter,innerHTML:0==g?"now":g+""});k.panels.push(k.levelIndicator)}b.futureDetailPanel.detailPanel=new cPanel({align:eAlign.eClient,backgroundColor:"#ffffff"});b.futureDetailPanel.spanPanel.panels.push(b.futureDetailPanel.detailPanel);
b.futureDetailPanel.detailPanel.spanPanel=new cAutoSpanPanel({align:eAlign.eClient,backgroundColor:"transparent",spanMethod:cAutoSpanPanel.spanMethod_auto,separationMargin:0});b.futureDetailPanel.detailPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel);b.futureDetailPanel.detailPanel.spanPanel.worldPanel=new cAutoSpanPanel({align:eAlign.eClient,backgroundColor:"transparent",spanMethod:cAutoSpanPanel.spanMethod_auto,separationMargin:0});b.futureDetailPanel.detailPanel.spanPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.worldPanel);
b.futureDetailPanel.detailPanel.spanPanel.worldPanel.iFramePanel=new cIFramePanel({align:eAlign.eClient,backgroundColor:"transparent",iFrameHTML:"",supportScroll:!0,zoom:1});b.futureDetailPanel.detailPanel.spanPanel.worldPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.worldPanel.iFramePanel);b.futureDetailPanel.detailPanel.spanPanel.worldPanel.iFramePanel.setContent(Model.getFutureFullHTML(this.future));b.futureDetailPanel.detailPanel.spanPanel.worldPanel.htmlCodePanel=new cTextEditPanel({align:eAlign.eClient,
color:"#dddddd",backgroundColor:"#333333",fontSize:16,value:this.future.worldHTML,readOnly:!0});b.futureDetailPanel.detailPanel.spanPanel.worldPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.worldPanel.htmlCodePanel);b.futureDetailPanel.detailPanel.spanPanel.infoPanel=new cAutoSpanPanel({align:eAlign.eClient,backgroundColor:"transparent",spanMethod:cAutoSpanPanel.spanMethod_auto,separationMargin:0});b.futureDetailPanel.detailPanel.spanPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.infoPanel);
b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel=new cPanel({align:eAlign.eClient,backgroundColor:"#96ceb4"});b.futureDetailPanel.detailPanel.spanPanel.infoPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel);b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel.imageContainerPanel=new cPanel({align:eAlign.eTop,height:100,backgroundColor:"transparent"});b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel.imageContainerPanel);
b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel.imageContainerPanel.imagePanel=new cPanel({align:eAlign.eCenter,width:90,height:90,backgroundColor:"transparent",image:this.screen.getImageClone(this.changesImageId),imageStretchWidth:90,imageStretchHeight:90});b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel.imageContainerPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel.imageContainerPanel.imagePanel);b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel.textPanel=
new cPanel({align:eAlign.eClient,backgroundColor:"transparent",color:"#000000",fontSize:30,textAlign:eTextAlign.eCenter,innerHTML:cLib.textToHTML(this.future.actionDescription)});b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.infoPanel.actionPanel.textPanel);b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel=new cPanel({align:eAlign.eClient,backgroundColor:"#FFAE3C"});b.futureDetailPanel.detailPanel.spanPanel.infoPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel);
b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.imageContainerPanel=new cPanel({align:eAlign.eTop,height:100,backgroundColor:"transparent"});b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.imageContainerPanel);b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.imageContainerPanel.imagePanel=new cPanel({align:eAlign.eCenter,width:90,height:90,backgroundColor:"transparent",
image:this.screen.getImageClone(this.evaluateImageId),imageStretchWidth:90,imageStretchHeight:90});b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.imageContainerPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.imageContainerPanel.imagePanel);b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.textPanel=new cPanel({align:eAlign.eClient,backgroundColor:this.stateColor,borderLeft:30,borderRight:30,borderBottom:30,borderColor:"#FFAE3C",
padding:20,color:"#000000",fontSize:30,textAlign:eTextAlign.eCenter,innerHTML:this.state});b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.panels.push(b.futureDetailPanel.detailPanel.spanPanel.infoPanel.evaluationPanel.textPanel);b.contentPanel.rerender();b.futureDetailPanel.rerender();b.futureDetailPanel.masterPanel.scrollToBottom()}})();
function clsCheckBox(a){var c=a||{};c.shape=c.radioButtonStyle?cPanel.cShapeCircleRect:cPanel.cShapeRectangle;cPanel.call(this,c);this.checked=!0===a.checked?!0:!1;this.onCheckedChange=a?a.onCheckedChange?a.onCheckedChange:null:null;this.radioButtonStyle=a?a.radioButtonStyle?!0:!1:!1;this.checkedPanel=new cPanel({shape:this.radioButtonStyle?cPanel.cShapeCircleRect:cPanel.cShapeRectangle,align:eAlign.eClient,margin:8,backgroundColor:this.checked?"#22b14c":"#444444",border:6,borderColor:"#444444"});
this.panels.push(this.checkedPanel)}clsCheckBox.deriveFrom(cPanel);
(function(){clsCheckBox.prototype.checked=!1;clsCheckBox.prototype.onCheckedChange=null;clsCheckBox.prototype.radioButtonStyle=!1;clsCheckBox.prototype.checkedPanel=null;clsCheckBox.prototype.setChecked=function(a){if(this.checked!=a&&(this.checked=a,this.checkedPanel.setBackgroundColor(this.checked?"#22b14c":"#444444"),this.onCheckedChange))this.onCheckedChange()};clsCheckBox.prototype.onClick=function(){this.checked=!this.checked;this.checkedPanel.setBackgroundColor(this.checked?"#22b14c":"#444444");
if(this.onCheckedChange)this.onCheckedChange()}})();
function cViewMultiversePanel(a){cPanel.call(this,a);var c=this;this.screen=a.screen;this.futureGeneratorThreadActive=!1;this.maxTotalFutures=1E3;this.firstOnVisible=!0;this.expansionMode=cViewMultiversePanel.eExpansionMode_Manual;this.viewMode=cViewMultiversePanel.eViewMode_Fit;this.viewOffset={left:0,top:0};this.changesImageId=a.changesImage;this.evaluateImageId=a.evaluateImage;this.viewMultiverse=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.panels.push(this.viewMultiverse);
this.viewOverlay=null;this.topControlPanel=new cPanel({align:eAlign.eTop,height:48,paddingBottom:4,backgroundColor:"#777777"});this.viewMultiverse.panels.push(this.topControlPanel);this.topControlPanel.innerControlPanel=new cPanel({align:eAlign.eClient,width:624,backgroundColor:"#777777"});this.topControlPanel.panels.push(this.topControlPanel.innerControlPanel);this.topControlPanel.innerControlPanel.homePanel=new cPanel({align:eAlign.eLeft,width:100,paddingTop:10,shape:cPanel.cShapeRoundRect,borderRadius:8,
backgroundColor:"#333333",color:"#cccccc",fontSize:20,fontBold:!0,textAlign:eTextAlign.eCenter,innerHTML:"HOME",onClick:function(){var a=c.viewFlat.viewMultiverse_Future.getInnerWidth()/2|0;c.viewOffset.left=a;240<c.viewOffset.left&&(c.viewOffset.left=240);c.viewOffset.top=140;c.onUpdateMultiverse()}});this.topControlPanel.innerControlPanel.panels.push(this.topControlPanel.innerControlPanel.homePanel);this.topControlPanel.innerControlPanel.viewModePanel=new cPanel({align:eAlign.eLeft,width:292,marginLeft:10,
backgroundColor:"transparent"});this.topControlPanel.innerControlPanel.panels.push(this.topControlPanel.innerControlPanel.viewModePanel);this.topControlPanel.innerControlPanel.viewModePanel.labelPanel=new cPanel({align:eAlign.eLeft,width:86,marginLeft:20,marginRight:10,paddingTop:12,backgroundColor:"transparent",color:"#eeeeee",fontSize:16,fontBold:!0,textAlign:eTextAlign.eRight,innerHTML:"ZOOM:"});this.topControlPanel.innerControlPanel.viewModePanel.panels.push(this.topControlPanel.innerControlPanel.viewModePanel.labelPanel);
this.topControlPanel.innerControlPanel.viewModePanel.fitPanel=new cPanel({align:eAlign.eLeft,width:96,marginRight:4,shape:cPanel.cShapeRoundRect,borderRadius:8,backgroundColor:"#333333",onClick:function(){c.viewMode!=cViewMultiversePanel.eViewMode_Fit&&(c.viewMode=cViewMultiversePanel.eViewMode_Fit,c.topControlPanel.innerControlPanel.viewModePanel.fitPanel.labelPanel.setColor("#ffffff"),c.topControlPanel.innerControlPanel.viewModePanel.fitPanel.indicatorPanel.setBackgroundColor("#993333"),c.topControlPanel.innerControlPanel.viewModePanel.flatPanel.labelPanel.setColor("#cccccc"),
c.topControlPanel.innerControlPanel.viewModePanel.flatPanel.indicatorPanel.setBackgroundColor("transparent"),c.viewFlat.hide(),c.viewFit.show(),c.onUpdateMultiverse())}});this.topControlPanel.innerControlPanel.viewModePanel.panels.push(this.topControlPanel.innerControlPanel.viewModePanel.fitPanel);this.topControlPanel.innerControlPanel.viewModePanel.fitPanel.labelPanel=new cPanel({align:eAlign.eClient,paddingTop:12,backgroundColor:"transparent",color:this.viewMode==cViewMultiversePanel.eViewMode_Fit?
"#ffffff":"#cccccc",fontSize:12,fontBold:!0,textAlign:eTextAlign.eCenter,innerHTML:"OUT",cursor:"pointer"});this.topControlPanel.innerControlPanel.viewModePanel.fitPanel.panels.push(this.topControlPanel.innerControlPanel.viewModePanel.fitPanel.labelPanel);this.topControlPanel.innerControlPanel.viewModePanel.fitPanel.indicatorPanel=new cPanel({align:eAlign.eNone,left:12,top:32,width:70,height:4,backgroundColor:this.viewMode==cViewMultiversePanel.eViewMode_Fit?"#993333":"transparent"});this.topControlPanel.innerControlPanel.viewModePanel.fitPanel.panels.push(this.topControlPanel.innerControlPanel.viewModePanel.fitPanel.indicatorPanel);
this.topControlPanel.innerControlPanel.viewModePanel.flatPanel=new cPanel({align:eAlign.eLeft,width:96,marginRight:4,shape:cPanel.cShapeRoundRect,borderRadius:8,backgroundColor:"#333333",onClick:function(){c.viewMode!=cViewMultiversePanel.eViewMode_Flat&&(c.viewMode=cViewMultiversePanel.eViewMode_Flat,c.topControlPanel.innerControlPanel.viewModePanel.fitPanel.labelPanel.setColor("#cccccc"),c.topControlPanel.innerControlPanel.viewModePanel.fitPanel.indicatorPanel.setBackgroundColor("transparent"),
c.topControlPanel.innerControlPanel.viewModePanel.flatPanel.labelPanel.setColor("#ffffff"),c.topControlPanel.innerControlPanel.viewModePanel.flatPanel.indicatorPanel.setBackgroundColor("#993333"),c.viewFlat.show(),c.viewFit.hide(),c.onUpdateMultiverse())}});this.topControlPanel.innerControlPanel.viewModePanel.panels.push(this.topControlPanel.innerControlPanel.viewModePanel.flatPanel);this.topControlPanel.innerControlPanel.viewModePanel.flatPanel.labelPanel=new cPanel({align:eAlign.eClient,paddingTop:2,
backgroundColor:"transparent",color:this.viewMode==cViewMultiversePanel.eViewMode_Flat?"#ffffff":"#cccccc",fontSize:26,fontBold:!0,textAlign:eTextAlign.eCenter,innerHTML:"IN",cursor:"pointer"});this.topControlPanel.innerControlPanel.viewModePanel.flatPanel.panels.push(this.topControlPanel.innerControlPanel.viewModePanel.flatPanel.labelPanel);this.topControlPanel.innerControlPanel.viewModePanel.flatPanel.indicatorPanel=new cPanel({align:eAlign.eNone,left:12,top:32,width:70,height:4,backgroundColor:this.viewMode==
cViewMultiversePanel.eViewMode_Flat?"#993333":"transparent"});this.topControlPanel.innerControlPanel.viewModePanel.flatPanel.panels.push(this.topControlPanel.innerControlPanel.viewModePanel.flatPanel.indicatorPanel);this.topControlPanel.innerControlPanel.muliverseSizePanel=new cPanel({align:eAlign.eLeft,width:220,marginLeft:20,marginTop:2,marginBottom:2,backgroundColor:"#333333"});this.topControlPanel.innerControlPanel.panels.push(this.topControlPanel.innerControlPanel.muliverseSizePanel);this.topControlPanel.innerControlPanel.muliverseSizePanel.scrollPanel=
new cPanel({align:eAlign.eNone,left:0,top:0,height:40,width:1,backgroundColor:"#444444"});this.topControlPanel.innerControlPanel.muliverseSizePanel.panels.push(this.topControlPanel.innerControlPanel.muliverseSizePanel.scrollPanel);this.topControlPanel.innerControlPanel.muliverseSizePanel.labelPanel=new cPanel({align:eAlign.eClient,paddingTop:8,backgroundColor:"transparent",color:"#cccccc",fontSize:20,fontBold:!0,textAlign:eTextAlign.eCenter,innerHTML:""});this.topControlPanel.innerControlPanel.muliverseSizePanel.panels.push(this.topControlPanel.innerControlPanel.muliverseSizePanel.labelPanel);
this.topControlPanel.innerControlPanel.muliverseSizePanel.setNumberOfWorlds=function(a,d){c.topControlPanel.innerControlPanel.muliverseSizePanel.scrollPanel.setWidth((c.topControlPanel.innerControlPanel.muliverseSizePanel.width-20)*a/d|0);c.topControlPanel.innerControlPanel.muliverseSizePanel.labelPanel.setInnerHTML(""+a+" "+(1==a?"world":"worlds"))};this.bottomControlPanel=new cPanel({align:eAlign.eBottom,height:48,paddingTop:4,backgroundColor:"#777777"});this.viewMultiverse.panels.push(this.bottomControlPanel);
this.bottomControlPanel.innerControlPanel=new cPanel({align:eAlign.eClient,width:624,backgroundColor:"#777777"});this.bottomControlPanel.panels.push(this.bottomControlPanel.innerControlPanel);this.bottomControlPanel.innerControlPanel.resetMuliversePanel=new cPanel({align:eAlign.eLeft,width:100,paddingTop:10,shape:cPanel.cShapeRoundRect,borderRadius:8,backgroundColor:"#333333",color:"#cccccc",fontSize:20,fontBold:!0,textAlign:eTextAlign.eCenter,innerHTML:"RESET",onClick:function(){c.resetMultiverse()}});
this.bottomControlPanel.innerControlPanel.panels.push(this.bottomControlPanel.innerControlPanel.resetMuliversePanel);this.bottomControlPanel.innerControlPanel.expansionModePanel=new cPanel({align:eAlign.eLeft,width:292,borderRadius:12,backgroundColor:"transparent"});this.bottomControlPanel.innerControlPanel.panels.push(this.bottomControlPanel.innerControlPanel.expansionModePanel);this.bottomControlPanel.innerControlPanel.expansionModePanel.labelPanel=new cPanel({align:eAlign.eLeft,width:96,marginLeft:10,
marginRight:10,paddingTop:3,backgroundColor:"transparent",color:"#eeeeee",fontSize:16,fontBold:!0,textAlign:eTextAlign.eRight,innerHTML:"AUTO SEARCH:"});this.bottomControlPanel.innerControlPanel.expansionModePanel.panels.push(this.bottomControlPanel.innerControlPanel.expansionModePanel.labelPanel);this.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel=new cPanel({align:eAlign.eLeft,width:96,marginRight:4,shape:cPanel.cShapeRoundRect,borderRadius:8,backgroundColor:"#333333",onClick:function(){c.expansionMode=
cViewMultiversePanel.eExpansionMode_Manual;c.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.labelPanel.setColor("#ffffff");c.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.indicatorPanel.setBackgroundColor("#993333");c.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel.labelPanel.setColor("#33cc33");c.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel.indicatorPanel.setBackgroundColor("transparent");c.onUpdateMultiverse()}});
this.bottomControlPanel.innerControlPanel.expansionModePanel.panels.push(this.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel);this.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.labelPanel=new cPanel({align:eAlign.eClient,paddingTop:4,backgroundColor:"transparent",color:"#ffffff",fontSize:20,fontBold:!0,textAlign:eTextAlign.eCenter,innerHTML:"PAUSE",cursor:"pointer"});this.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.panels.push(this.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.labelPanel);
this.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.indicatorPanel=new cPanel({align:eAlign.eNone,left:12,top:32,width:70,height:4,backgroundColor:"#993333"});this.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.panels.push(this.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.indicatorPanel);this.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel=new cPanel({align:eAlign.eLeft,width:96,marginRight:4,shape:cPanel.cShapeRoundRect,
borderRadius:8,backgroundColor:"#333333",onClick:function(){c.expansionMode=cViewMultiversePanel.eExpansionMode_Auto;c.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.labelPanel.setColor("#cccccc");c.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.indicatorPanel.setBackgroundColor("transparent");c.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel.labelPanel.setColor("#33cc33");c.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel.indicatorPanel.setBackgroundColor("#993333");
c.onUpdateMultiverse()}});this.bottomControlPanel.innerControlPanel.expansionModePanel.panels.push(this.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel);this.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel.labelPanel=new cPanel({align:eAlign.eClient,paddingTop:4,backgroundColor:"transparent",color:"#33cc33",fontSize:20,fontBold:!0,textAlign:eTextAlign.eCenter,innerHTML:"GO!",cursor:"pointer"});this.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel.panels.push(this.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel.labelPanel);
this.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel.indicatorPanel=new cPanel({align:eAlign.eNone,left:12,top:32,width:70,height:4,backgroundColor:"transparent"});this.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel.panels.push(this.bottomControlPanel.innerControlPanel.expansionModePanel.autoPanel.indicatorPanel);this.bottomControlPanel.innerControlPanel.searchMethodOptionsPanel=new cPanel({align:eAlign.eLeft,width:180,marginLeft:20,paddingTop:3,shape:cPanel.cShapeRoundRect,
borderRadius:8,backgroundColor:"#333333",color:"#cccccc",fontSize:15,fontBold:!0,textAlign:eTextAlign.eCenter,innerHTML:'Search method<br /><span style="color: #ffffff;">breadth-first</span>',onClick:function(){var a=new clsModalPanel({onClick:function(){setTimeout(function(){c.screen.panel.removePanel(a)},10)}});c.screen.panel.appendPanel(a);a.optionsPanel=new cPanel({align:eAlign.eCenter,shape:cPanel.cShapeRoundRect,width:720,height:480,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",
color:"#ffffff",fontSize:36,onClick:function(){this.stopBubble=!0}});a.contentPanel.panels.push(a.optionsPanel);a.optionsPanel.headerPanel=new cPanel({align:eAlign.eTop,height:50,paddingLeft:20,backgroundColor:"#444444",color:"#eeeeee",fontSize:36,innerHTML:"Search method"});a.optionsPanel.panels.push(a.optionsPanel.headerPanel);a.optionsPanel.bottomPanel=new cPanel({align:eAlign.eBottom,height:70,paddingLeft:20,backgroundColor:"#444444"});a.optionsPanel.panels.push(a.optionsPanel.bottomPanel);a.optionsPanel.bottomPanel.closeButton=
new cPanel({align:eAlign.eCenterVertical,shape:cPanel.cShapeRoundRect,width:200,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"close",onClick:function(){this.stopBubble=!0;setTimeout(function(){c.screen.panel.removePanel(a)},10)}});a.optionsPanel.bottomPanel.panels.push(a.optionsPanel.bottomPanel.closeButton);a.optionsPanel.contentPanel=new cPanel({align:eAlign.eClient,
paddingTop:20,backgroundColor:"transparent"});a.optionsPanel.panels.push(a.optionsPanel.contentPanel);a.optionsPanel.contentPanel.optionBreadthFirstPanel=new cPanel({align:eAlign.eTop,height:80,backgroundColor:"transparent",onClick:function(){this.stopBubble=!0;a.optionsPanel.contentPanel.optionBreadthFirstPanel.checkBoxPanel.setChecked(!0)}});a.optionsPanel.contentPanel.panels.push(a.optionsPanel.contentPanel.optionBreadthFirstPanel);a.optionsPanel.contentPanel.optionBreadthFirstPanel.checkBoxPanel=
new clsCheckBox({align:eAlign.eLeft,width:100,marginLeft:30,marginTop:10,marginRight:10,marginBottom:10,backgroundColor:"#101010",radioButtonStyle:!0,checked:Model.searchAlgorithm==cModel.searchAlgorithms.msaBreadthFirst,onCheckedChange:function(){this.checked&&(Model.searchAlgorithm=cModel.searchAlgorithms.msaBreadthFirst,a.optionsPanel.contentPanel.optionHighScoreFirstPanel.checkBoxPanel.setChecked(!1),a.optionsPanel.contentPanel.optionLeftSideFirstPanel.checkBoxPanel.setChecked(!1),a.optionsPanel.contentPanel.optionRightSideFirstPanel.checkBoxPanel.setChecked(!1),
c.bottomControlPanel.innerControlPanel.searchMethodOptionsPanel.updateSearchMethodCaption())}});a.optionsPanel.contentPanel.optionBreadthFirstPanel.panels.push(a.optionsPanel.contentPanel.optionBreadthFirstPanel.checkBoxPanel);a.optionsPanel.contentPanel.optionBreadthFirstPanel.labelPanel=new cPanel({align:eAlign.eLeft,width:600,paddingLeft:30,paddingTop:20,backgroundColor:"transparent",fontSize:32,color:"#eeeeee",innerHTML:"breadth first"});a.optionsPanel.contentPanel.optionBreadthFirstPanel.panels.push(a.optionsPanel.contentPanel.optionBreadthFirstPanel.labelPanel);
a.optionsPanel.contentPanel.optionHighScoreFirstPanel=new cPanel({align:eAlign.eTop,height:80,backgroundColor:"transparent",onClick:function(){this.stopBubble=!0;a.optionsPanel.contentPanel.optionHighScoreFirstPanel.checkBoxPanel.setChecked(!0)}});a.optionsPanel.contentPanel.panels.push(a.optionsPanel.contentPanel.optionHighScoreFirstPanel);a.optionsPanel.contentPanel.optionHighScoreFirstPanel.checkBoxPanel=new clsCheckBox({align:eAlign.eLeft,width:100,marginLeft:30,marginTop:10,marginRight:10,marginBottom:10,
backgroundColor:"#101010",radioButtonStyle:!0,checked:Model.searchAlgorithm==cModel.searchAlgorithms.msaHighScoreFirst,onCheckedChange:function(){this.checked&&(Model.searchAlgorithm=cModel.searchAlgorithms.msaHighScoreFirst,a.optionsPanel.contentPanel.optionBreadthFirstPanel.checkBoxPanel.setChecked(!1),a.optionsPanel.contentPanel.optionLeftSideFirstPanel.checkBoxPanel.setChecked(!1),a.optionsPanel.contentPanel.optionRightSideFirstPanel.checkBoxPanel.setChecked(!1),c.bottomControlPanel.innerControlPanel.searchMethodOptionsPanel.updateSearchMethodCaption())}});
a.optionsPanel.contentPanel.optionHighScoreFirstPanel.panels.push(a.optionsPanel.contentPanel.optionHighScoreFirstPanel.checkBoxPanel);a.optionsPanel.contentPanel.optionHighScoreFirstPanel.labelPanel=new cPanel({align:eAlign.eLeft,width:600,paddingLeft:30,paddingTop:20,backgroundColor:"transparent",fontSize:32,color:"#eeeeee",innerHTML:"high like-score first"});a.optionsPanel.contentPanel.optionHighScoreFirstPanel.panels.push(a.optionsPanel.contentPanel.optionHighScoreFirstPanel.labelPanel);a.optionsPanel.contentPanel.optionLeftSideFirstPanel=
new cPanel({align:eAlign.eTop,height:80,backgroundColor:"transparent",onClick:function(){this.stopBubble=!0;a.optionsPanel.contentPanel.optionLeftSideFirstPanel.checkBoxPanel.setChecked(!0)}});a.optionsPanel.contentPanel.panels.push(a.optionsPanel.contentPanel.optionLeftSideFirstPanel);a.optionsPanel.contentPanel.optionLeftSideFirstPanel.checkBoxPanel=new clsCheckBox({align:eAlign.eLeft,width:100,marginLeft:30,marginTop:10,marginRight:10,marginBottom:10,backgroundColor:"#101010",radioButtonStyle:!0,
checked:Model.searchAlgorithm==cModel.searchAlgorithms.msaLeftSideFirst,onCheckedChange:function(){this.checked&&(Model.searchAlgorithm=cModel.searchAlgorithms.msaLeftSideFirst,a.optionsPanel.contentPanel.optionBreadthFirstPanel.checkBoxPanel.setChecked(!1),a.optionsPanel.contentPanel.optionHighScoreFirstPanel.checkBoxPanel.setChecked(!1),a.optionsPanel.contentPanel.optionRightSideFirstPanel.checkBoxPanel.setChecked(!1),c.bottomControlPanel.innerControlPanel.searchMethodOptionsPanel.updateSearchMethodCaption())}});
a.optionsPanel.contentPanel.optionLeftSideFirstPanel.panels.push(a.optionsPanel.contentPanel.optionLeftSideFirstPanel.checkBoxPanel);a.optionsPanel.contentPanel.optionLeftSideFirstPanel.labelPanel=new cPanel({align:eAlign.eLeft,width:600,paddingLeft:30,paddingTop:20,backgroundColor:"transparent",fontSize:32,color:"#eeeeee",innerHTML:"left side first"});a.optionsPanel.contentPanel.optionLeftSideFirstPanel.panels.push(a.optionsPanel.contentPanel.optionLeftSideFirstPanel.labelPanel);a.optionsPanel.contentPanel.optionRightSideFirstPanel=
new cPanel({align:eAlign.eTop,height:80,backgroundColor:"transparent",onClick:function(){this.stopBubble=!0;a.optionsPanel.contentPanel.optionRightSideFirstPanel.checkBoxPanel.setChecked(!0)}});a.optionsPanel.contentPanel.panels.push(a.optionsPanel.contentPanel.optionRightSideFirstPanel);a.optionsPanel.contentPanel.optionRightSideFirstPanel.checkBoxPanel=new clsCheckBox({align:eAlign.eLeft,width:100,marginLeft:30,marginTop:10,marginRight:10,marginBottom:10,backgroundColor:"#101010",radioButtonStyle:!0,
checked:Model.searchAlgorithm==cModel.searchAlgorithms.msaRightSideFirst,onCheckedChange:function(){this.checked&&(Model.searchAlgorithm=cModel.searchAlgorithms.msaRightSideFirst,a.optionsPanel.contentPanel.optionBreadthFirstPanel.checkBoxPanel.setChecked(!1),a.optionsPanel.contentPanel.optionHighScoreFirstPanel.checkBoxPanel.setChecked(!1),a.optionsPanel.contentPanel.optionLeftSideFirstPanel.checkBoxPanel.setChecked(!1),c.bottomControlPanel.innerControlPanel.searchMethodOptionsPanel.updateSearchMethodCaption())}});
a.optionsPanel.contentPanel.optionRightSideFirstPanel.panels.push(a.optionsPanel.contentPanel.optionRightSideFirstPanel.checkBoxPanel);a.optionsPanel.contentPanel.optionRightSideFirstPanel.labelPanel=new cPanel({align:eAlign.eLeft,width:600,paddingLeft:30,paddingTop:20,backgroundColor:"transparent",fontSize:32,color:"#eeeeee",innerHTML:"right side first"});a.optionsPanel.contentPanel.optionRightSideFirstPanel.panels.push(a.optionsPanel.contentPanel.optionRightSideFirstPanel.labelPanel);a.contentPanel.rerender();
a.optionsPanel.rerender();a.contentPanel.rerender()}});this.bottomControlPanel.innerControlPanel.panels.push(this.bottomControlPanel.innerControlPanel.searchMethodOptionsPanel);this.bottomControlPanel.innerControlPanel.searchMethodOptionsPanel.updateSearchMethodCaption=function(){var a='Search method<br /><span style="color: #ffffff;">';Model.searchAlgorithm==cModel.searchAlgorithms.msaBreadthFirst?a+="breadth first":Model.searchAlgorithm==cModel.searchAlgorithms.msaHighScoreFirst?a+="high like-score first":
Model.searchAlgorithm==cModel.searchAlgorithms.msaLeftSideFirst?a+="left side first":Model.searchAlgorithm==cModel.searchAlgorithms.msaRightSideFirst&&(a+="right side first");this.setInnerHTML(a+"</span>")};this.bottomControlPanel.innerControlPanel.searchMethodOptionsPanel.updateSearchMethodCaption();this.bottomControlPanel.innerControlPanel.optionsPanel=new cPanel({align:eAlign.eLeft,width:140,marginLeft:20,paddingTop:10,shape:cPanel.cShapeRoundRect,borderRadius:8,backgroundColor:"#333333",color:"#cccccc",
fontSize:20,fontBold:!0,textAlign:eTextAlign.eCenter,innerHTML:"OPTIONS",onClick:function(){var a=new clsModalPanel({onClick:function(){setTimeout(function(){c.screen.panel.removePanel(a)},10)}});c.screen.panel.appendPanel(a);a.optionsPanel=new cPanel({align:eAlign.eCenter,shape:cPanel.cShapeRoundRect,width:720,height:400,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",color:"#ffffff",fontSize:36,onClick:function(){this.stopBubble=!0}});a.contentPanel.panels.push(a.optionsPanel);
a.optionsPanel.headerPanel=new cPanel({align:eAlign.eTop,height:50,paddingLeft:20,backgroundColor:"#444444",color:"#eeeeee",fontSize:36,innerHTML:"Multiverse options"});a.optionsPanel.panels.push(a.optionsPanel.headerPanel);a.optionsPanel.bottomPanel=new cPanel({align:eAlign.eBottom,height:70,paddingLeft:20,backgroundColor:"#444444"});a.optionsPanel.panels.push(a.optionsPanel.bottomPanel);a.optionsPanel.bottomPanel.closeButton=new cPanel({align:eAlign.eCenterVertical,shape:cPanel.cShapeRoundRect,
width:200,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"close",onClick:function(){this.stopBubble=!0;setTimeout(function(){c.screen.panel.removePanel(a)},10)}});a.optionsPanel.bottomPanel.panels.push(a.optionsPanel.bottomPanel.closeButton);a.optionsPanel.contentPanel=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});a.optionsPanel.panels.push(a.optionsPanel.contentPanel);
a.optionsPanel.contentPanel.topHeaderPanel=new cPanel({align:eAlign.eTop,height:60,backgroundColor:"transparent"});a.optionsPanel.contentPanel.panels.push(a.optionsPanel.contentPanel.topHeaderPanel);a.optionsPanel.contentPanel.topHeaderPanel.labelPanel=new cPanel({align:eAlign.eClient,paddingLeft:30,paddingTop:10,backgroundColor:"#111111",textAlign:eTextAlign.eLeft,fontSize:32,color:"#eeeeee",innerHTML:"For each new created world:"});a.optionsPanel.contentPanel.topHeaderPanel.panels.push(a.optionsPanel.contentPanel.topHeaderPanel.labelPanel);
a.optionsPanel.contentPanel.optionStopPanel=new cPanel({align:eAlign.eTop,height:70,backgroundColor:"transparent"});a.optionsPanel.contentPanel.panels.push(a.optionsPanel.contentPanel.optionStopPanel);a.optionsPanel.contentPanel.optionStopPanel.labelPanel=new cPanel({align:eAlign.eLeft,width:600,paddingRight:30,paddingTop:15,backgroundColor:"transparent",textAlign:eTextAlign.eRight,fontSize:32,color:"#eeeeee",innerHTML:"pause search if new goal"});a.optionsPanel.contentPanel.optionStopPanel.panels.push(a.optionsPanel.contentPanel.optionStopPanel.labelPanel);
a.optionsPanel.contentPanel.optionStopPanel.checkBoxPanel=new clsCheckBox({align:eAlign.eLeft,width:70,margin:5,backgroundColor:"#101010",checked:Model.stopSearchWhenGoalFound,onCheckedChange:function(){Model.stopSearchWhenGoalFound=this.checked}});a.optionsPanel.contentPanel.optionStopPanel.panels.push(a.optionsPanel.contentPanel.optionStopPanel.checkBoxPanel);a.optionsPanel.contentPanel.optionIgnoreRepeatsPanel=new cPanel({align:eAlign.eTop,height:70,backgroundColor:"transparent"});a.optionsPanel.contentPanel.panels.push(a.optionsPanel.contentPanel.optionIgnoreRepeatsPanel);
a.optionsPanel.contentPanel.optionIgnoreRepeatsPanel.labelPanel=new cPanel({align:eAlign.eLeft,width:600,paddingRight:30,paddingTop:15,backgroundColor:"transparent",textAlign:eTextAlign.eRight,fontSize:32,color:"#eeeeee",innerHTML:"remove if repeating sequence"});a.optionsPanel.contentPanel.optionIgnoreRepeatsPanel.panels.push(a.optionsPanel.contentPanel.optionIgnoreRepeatsPanel.labelPanel);a.optionsPanel.contentPanel.optionIgnoreRepeatsPanel.checkBoxPanel=new clsCheckBox({align:eAlign.eLeft,width:70,
margin:5,backgroundColor:"#101010",checked:Model.ignoreSameAsParentOrSibling,onCheckedChange:function(){Model.ignoreSameAsParentOrSibling=this.checked}});a.optionsPanel.contentPanel.optionIgnoreRepeatsPanel.panels.push(a.optionsPanel.contentPanel.optionIgnoreRepeatsPanel.checkBoxPanel);a.optionsPanel.contentPanel.optionIgnoreIllegalPanel=new cPanel({align:eAlign.eTop,height:70,backgroundColor:"transparent"});a.optionsPanel.contentPanel.panels.push(a.optionsPanel.contentPanel.optionIgnoreIllegalPanel);
a.optionsPanel.contentPanel.optionIgnoreIllegalPanel.labelPanel=new cPanel({align:eAlign.eLeft,width:600,paddingRight:30,paddingTop:15,backgroundColor:"transparent",textAlign:eTextAlign.eRight,fontSize:32,color:"#eeeeee",innerHTML:"remove if illegal"});a.optionsPanel.contentPanel.optionIgnoreIllegalPanel.panels.push(a.optionsPanel.contentPanel.optionIgnoreIllegalPanel.labelPanel);a.optionsPanel.contentPanel.optionIgnoreIllegalPanel.checkBoxPanel=new clsCheckBox({align:eAlign.eLeft,width:70,margin:5,
backgroundColor:"#101010",checked:Model.ignoreIllegalFutures,onCheckedChange:function(){Model.ignoreIllegalFutures=this.checked}});a.optionsPanel.contentPanel.optionIgnoreIllegalPanel.panels.push(a.optionsPanel.contentPanel.optionIgnoreIllegalPanel.checkBoxPanel);a.contentPanel.rerender();a.optionsPanel.rerender();a.contentPanel.rerender()}});this.bottomControlPanel.innerControlPanel.panels.push(this.bottomControlPanel.innerControlPanel.optionsPanel);this.viewFlat=new cPanel({align:eAlign.eClient,
backgroundColor:this.viewMode==cViewMultiversePanel.eViewMode_Flat?"#333333":"transparent",visible:this.viewMode==cViewMultiversePanel.eViewMode_Flat});this.viewMultiverse.panels.push(this.viewFlat);this.viewFlat.offsetLeft=0;this.viewFlat.offsetTop=0;this.viewFlat.draggingOffset=!1;this.viewFlat.draggingOffsetStartLeft=0;this.viewFlat.draggingOffsetStartTop=0;this.viewFlat.draggingOffsetStartX=0;this.viewFlat.draggingOffsetStartY=0;this.viewFlat.futurePanels=[];this.viewFlat.columnIndicatorPanels=
[];this.viewFlat.levelIndicatorPanels=[];this.viewFlat.centerLinePanel=null;this.viewFlat.leftBlurPanel=null;this.viewFlat.rightBlurPanel=null;this.viewFlat.topBlurPanel=null;this.viewFlat.futureAxisImage=this.screen.getImageClone(a.futureAxisImage);this.viewFlat.optionsAxisImage=this.screen.getImageClone(a.optionsAxisImage);this.viewFlat.expandImageId=a.expandImage;this.viewFlat.viewMultiverse_FutureBackground=new cPanel({align:eAlign.eClient,backgroundColor:"#333333"});this.viewFlat.panels.push(this.viewFlat.viewMultiverse_FutureBackground);
this.viewFlat.visibleMultiversePanel=null;this.viewFlat.outerMultiversePanel=null;this.viewFlat.viewMultiverse_Future=new cPanel({align:eAlign.eClient,backgroundColor:"transparent",onMouseDown:function(a,d){c.onViewFlatFuturePanelMouseDown(a,d)},onMouseMove:function(a,d){c.onViewFlatFuturePanelMouseMove(a,d)},onMouseUp:function(a,d){c.onViewFlatFuturePanelMouseUp(a,d)},cursor:"pointer",onScroll:function(a){c.onViewFlatFuturePanelScroll(a)},onTap:function(a,d){c.onViewFlatFuturePanelTap(a,d)}});this.viewFlat.panels.push(this.viewFlat.viewMultiverse_Future);
this.viewFlat.viewMultiverse_FutureOverlay=new cPanel({align:eAlign.eClient,backgroundColor:"transparent",invisibleToMouseEvents:!0});this.viewFlat.panels.push(this.viewFlat.viewMultiverse_FutureOverlay);this.viewFit=new cPanel({align:eAlign.eClient,backgroundColor:this.viewMode==cViewMultiversePanel.eViewMode_Fit?"#333333":"transparent",visible:this.viewMode==cViewMultiversePanel.eViewMode_Fit});this.viewMultiverse.panels.push(this.viewFit);this.viewFit.offsetLeft=0;this.viewFit.offsetTop=0;this.viewFit.draggingOffset=
!1;this.viewFit.draggingOffsetStartLeft=0;this.viewFit.draggingOffsetStartTop=0;this.viewFit.draggingOffsetStartX=0;this.viewFit.draggingOffsetStartY=0;this.viewFit.futurePanels=[];this.viewFit.columnIndicatorPanels=[];this.viewFit.levelIndicatorPanels=[];this.viewFit.futureAxisImage=this.screen.getImageClone(a.futureAxisImage);this.viewFit.optionsAxisImage=this.screen.getImageClone(a.optionsAxisImage);this.viewFit.viewBackground=new cPanel({align:eAlign.eNone,left:0,top:0,width:2E4,height:2E4,backgroundColor:"#222222"});
this.viewFit.panels.push(this.viewFit.viewBackground);this.viewFit.viewFuture=new cPanel({align:eAlign.eClient,backgroundColor:"transparent",onMouseDown:function(a,d){c.onViewFitFuturePanelMouseDown(a,d)},onMouseMove:function(a,d){c.onViewFitFuturePanelMouseMove(a,d)},onMouseUp:function(a,d){c.onViewFitFuturePanelMouseUp(a,d)},cursor:"pointer",onTap:function(a,d){c.onViewFitFuturePanelTap(a,d)},onScroll:function(a){c.onViewFitFuturePanelScroll(a)}});this.viewFit.panels.push(this.viewFit.viewFuture);
this.viewFit.viewFutureOrigin=new cPanel({align:eAlign.eNone,left:0,top:0,width:2E4,height:2E4,backgroundColor:"transparent"});this.viewFit.viewFuture.panels.push(this.viewFit.viewFutureOrigin);this.viewFit.futureAxisLabel=new cPanel({align:eAlign.eNone,left:0,top:0,width:39,height:57,backgroundColor:"transparent",image:this.viewFit.futureAxisImage,imageStretch:!0});this.viewFit.viewFuture.panels.push(this.viewFit.futureAxisLabel);this.viewFit.optionsAxisLabel=new cPanel({align:eAlign.eNone,left:0,
top:0,width:275/3|0,height:65/3|0,backgroundColor:"transparent",image:this.viewFit.optionsAxisImage,imageStretch:!0});this.viewFit.viewFuture.panels.push(this.viewFit.optionsAxisLabel);this.viewFit.viewOverlay=new cPanel({align:eAlign.eClient,backgroundColor:"transparent",invisibleToMouseEvents:!0});this.viewFit.panels.push(this.viewFit.viewOverlay)}cViewMultiversePanel.deriveFrom(cPanel);
(function(){cViewMultiversePanel.eViewMode_Flat=1;cViewMultiversePanel.eViewMode_Fit=2;cViewMultiversePanel.eExpansionMode_Manual=1;cViewMultiversePanel.eExpansionMode_Auto=2;cViewMultiversePanel.prototype.screen=null;cViewMultiversePanel.prototype.futureGeneratorThreadActive=!1;cViewMultiversePanel.prototype.maxTotalFutures=1E3;cViewMultiversePanel.prototype.firstOnVisible=!0;cViewMultiversePanel.prototype.expansionMode=cViewMultiversePanel.eExpansionMode_Manual;cViewMultiversePanel.prototype.viewMode=
cViewMultiversePanel.eViewMode_Fit;cViewMultiversePanel.prototype.changesImageId=null;cViewMultiversePanel.prototype.evaluateImageId=null;cViewMultiversePanel.prototype.viewMultiverse=null;cViewMultiversePanel.prototype.viewOverlay=null;cViewMultiversePanel.prototype.viewFlat=null;cViewMultiversePanel.prototype.viewFit=null;cViewMultiversePanel.prototype.viewOffset={left:0,top:0};cViewMultiversePanel.prototype.topControlPanel=null;cViewMultiversePanel.prototype.bottomControlPanel=null;cViewMultiversePanel.prototype.render=
function(a,c,b){cPanel.prototype.render.call(this,a,c,b);if(null!=this.element)this.onUpdateMultiverse()};cViewMultiversePanel.prototype.onUpdateMultiverse=function(){if(this.viewMode==cViewMultiversePanel.eViewMode_Flat)this.onUpdateMultiverse_Flat();else if(this.viewMode==cViewMultiversePanel.eViewMode_Fit)this.onUpdateMultiverse_Fit(!1);var a="";null!=Model.actionSandbox.lastRunResult&&(Model.actionSandbox.lastRunResult.syntaxError?a+="Error while processing changes JavaScript code:<br />\n<i>"+
(""!=Model.actionSandbox.lastRunResult.syntaxErrorMessage?Model.actionSandbox.lastRunResult.syntaxErrorMessage:"Syntax error.")+"</i><br />\n":Model.actionSandbox.lastRunResult.runError&&(a+="Error while processing changes JavaScript code:<br />\n<i>"+(""!=Model.actionSandbox.lastRunResult.runErrorMessage?Model.actionSandbox.lastRunResult.runErrorMessage:"Runtime error.")+"</i><br />\n"));null!=Model.evaluationSandbox.lastRunResult&&(Model.evaluationSandbox.lastRunResult.syntaxError?a+="Error while processing evaluations JavaScript code:<br />\n<i>"+
(""!=Model.evaluationSandbox.lastRunResult.syntaxErrorMessage?Model.evaluationSandbox.lastRunResult.syntaxErrorMessage:"Syntax error.")+"</i><br />\n":Model.evaluationSandbox.lastRunResult.runError&&(a+="Error while processing evaluations JavaScript code:<br />\n<i>"+(""!=Model.evaluationSandbox.lastRunResult.runErrorMessage?Model.evaluationSandbox.lastRunResult.runErrorMessage:"Runtime error.")+"</i><br />\n"));""!=a?(null==this.viewOverlay&&(this.viewOverlay=new cPanel({align:eAlign.eClient,backgroundColor:"#ffcccc",
transparencyPercentage:50,onClick:function(){}}),this.panels.push(this.viewOverlay),this.viewOverlay.messageBox=new cPanel({align:eAlign.eCenter,width:700,height:200,padding:20,backgroundColor:"#222222",color:"#00ff00",fontSize:18,onClick:function(){}}),this.panels.push(this.viewOverlay.messageBox),this.rerender()),a="<span style=\"font-family: 'Courier New', Courier, monospace\">"+a+"</span",this.viewOverlay.messageBox.innerHTML!=a&&(this.viewOverlay.messageBox.setInnerHTML(a),this.rerender())):
null!=this.viewOverlay&&(this.removePanelWithoutRerender(this.viewOverlay),this.removePanelWithoutRerender(this.viewOverlay.messageBox),this.viewOverlay=null,this.rerender())};cViewMultiversePanel.prototype.onUpdateMultiverse_Flat=function(){var a,c=this.viewFlat;c.offsetLeft=this.viewOffset.left;c.offsetTop=this.viewOffset.top;var b=c.viewMultiverse_Future.getInnerWidth(),d=b/2|0,e=c.viewMultiverse_Future.getInnerHeight(),g=cMultiverseFuturePanel.cViewColumnWidth/2|0;this.topControlPanel.innerControlPanel.muliverseSizePanel.setNumberOfWorlds(Model.multiverse.totalNumberOfFutures,
this.maxTotalFutures);a=-(g+c.offsetLeft)/cMultiverseFuturePanel.cViewColumnWidth|0;var g=a+(b/cMultiverseFuturePanel.cViewColumnWidth|0)+2,l=-(c.offsetTop/cMultiverseFuturePanel.cViewHeight|0);0>l&&(l=0);var k=l+((e+cMultiverseFuturePanel.cViewHeight)/cMultiverseFuturePanel.cViewHeight|0);0>k&&(k=0);for(var m=0,h=c.levelIndicatorPanels.length;m<h;m++)c.levelIndicatorPanels[m].levelIndicatorHandled=!1;for(var q=l;q<=k;q++){for(var s=null,m=0,h=c.levelIndicatorPanels.length;m<h;m++)if(c.levelIndicatorPanels[m].levelNumber==
q){s=c.levelIndicatorPanels[m];break}null==s&&(s=new cPanel({align:eAlign.eNone,width:cMultiverseFuturePanel.cViewColumnWidth/2|0,height:cMultiverseFuturePanel.cViewHeight,paddingTop:cMultiverseFuturePanel.cViewHeight/5|0,backgroundColor:"#666666",transparencyPercentage:50,color:"#ffffff",fontSize:36,borderColor:"#333333",borderTop:1,borderBottom:1,textAlign:eTextAlign.eCenter,innerHTML:0==q?"now":q+""}),s.levelNumber=q,c.viewMultiverse_FutureOverlay.panels.push(s),c.levelIndicatorPanels.push(s));
s.left=b-s.width;s.top=c.offsetTop+q*cMultiverseFuturePanel.cViewHeight;s.backgroundColor="#666666";s.color="#ffffff";s.levelIndicatorHandled=!0}m=0;for(h=c.levelIndicatorPanels.length;m<h;m++)c.levelIndicatorPanels[m].levelIndicatorHandled||(c.viewMultiverse_FutureOverlay.removePanelWithoutRerender(c.levelIndicatorPanels[m]),c.levelIndicatorPanels.splice(m,1),m--,h--);c.viewMultiverse_FutureOverlay.rerender();m=!1;null==c.outerMultiversePanel&&(c.outerMultiversePanel=new cPanel({align:eAlign.eNone,
backgroundColor:"#333333"}),c.viewMultiverse_FutureBackground.panels.push(c.outerMultiversePanel),m=new cPanel({align:eAlign.eNone,left:270,top:190,width:117,height:171,backgroundColor:"transparent",image:c.futureAxisImage,imageStretch:!0}),c.outerMultiversePanel.panels.push(m),m=new cPanel({align:eAlign.eNone,left:500,top:56,width:275,height:65,backgroundColor:"transparent",image:c.optionsAxisImage,imageStretch:!0}),c.outerMultiversePanel.panels.push(m),m=!0);c.outerMultiversePanel.width!=2*b+400&&
(c.outerMultiversePanel.width=2*b+400,m=!0);c.outerMultiversePanel.height!=2*e+140&&(c.outerMultiversePanel.height=2*e+140,m=!0);q=-b;h=-e;c.offsetLeft>-b&&(q=c.offsetLeft-((cMultiverseFuturePanel.cViewColumnWidth/2|0)+400),q<-(400+b)&&(q=-(400+b)));c.offsetTop>-e&&(h=c.offsetTop-140-40,h<-(140+e)&&(h=-(140+e)));c.outerMultiversePanel.left!=q&&(c.outerMultiversePanel.left=q,m=!0);c.outerMultiversePanel.top!=h&&(c.outerMultiversePanel.top=h,m=!0);null==c.visibleMultiversePanel&&(c.visibleMultiversePanel=
new cPanel({align:eAlign.eNone,backgroundColor:"#222222"}),c.viewMultiverse_FutureBackground.panels.push(c.visibleMultiversePanel),m=!0);c.visibleMultiversePanel.width!=b&&(c.visibleMultiversePanel.width=b,m=!0);c.visibleMultiversePanel.height!=e&&(c.visibleMultiversePanel.height=e,m=!0);b=q=0;0<c.offsetLeft&&(q=c.offsetLeft-((cMultiverseFuturePanel.cViewColumnWidth/2|0)+10),0>q&&(q=0));0<c.offsetTop&&(b=c.offsetTop-40,0>b&&(b=0));c.visibleMultiversePanel.left!=q&&(c.visibleMultiversePanel.left=q,
m=!0);c.visibleMultiversePanel.top!=b&&(c.visibleMultiversePanel.top=b,m=!0);for(var b=!1,e=[],p=0,r=c.futurePanels.length;p<r;p++)c.futurePanels[p].futurePanelHandled=!1;for(;a<=g;a++)if(h=Model.multiverse.getColumnByColumnNumber(a),null!=h)for(q=l;q<=k&&q<h.futures.length;q++){for(var n=h.futures[q],s=!1,p=0,r=e.length;p<r;p++)if(e[p]==n.id){s=!0;break}if(!s){e.push(n.id);for(var f=null,p=0,r=c.futurePanels.length;p<r;p++)if(c.futurePanels[p].future.id==n.id){f=c.futurePanels[p];break}null==f&&
(f=new cMultiverseFuturePanel({align:eAlign.eNone,left:0,top:0,width:cMultiverseFuturePanel.cViewColumnWidth,height:cMultiverseFuturePanel.cViewHeight,backgroundColor:"transparent",screen:this.screen,future:n,changesImageId:this.changesImageId,evaluateImageId:this.evaluateImageId}),c.viewMultiverse_Future.panels.push(f),c.futurePanels.push(f),b=!0);var p=cMultiverseFuturePanel.evaluationColor(n),r=cMultiverseFuturePanel.evaluationText(n),t=n.multiverseColumns[0].columnNumber*cMultiverseFuturePanel.cViewColumnWidth-
(cMultiverseFuturePanel.cViewColumnWidth/2|0),u=n.level*cMultiverseFuturePanel.cViewHeight,s=n.multiverseColumns.length*cMultiverseFuturePanel.cViewColumnWidth,v=cMultiverseFuturePanel.cViewHeight;f.top!=c.offsetTop+u&&(f.top=c.offsetTop+u,b=!0);f.left!=c.offsetLeft+t+2&&(f.left=c.offsetLeft+t+2,b=!0);f.width!=s-4&&(f.width=s-4,b=!0);f.height!=v-4&&(f.setHeight(v-4),b=!0);f.state!=r&&(f.setState(r),b=!0);f.stateColor!=p&&(f.setStateColor(p),b=!0);b&&f.setFocusLine(d);f.futurePanelHandled=!0;0<n.futures.length&&
(f.futureConnectorHorizontal||(f.futureConnectorHorizontal=new cPanel({align:eAlign.eNone,left:0,top:0,width:1,height:8,backgroundColor:"#666666"}),c.viewMultiverse_FutureBackground.panels.push(f.futureConnectorHorizontal),m=!0),f.futureConnectorHorizontal.top!=f.top+(cMultiverseFuturePanel.cViewHeight/2|0)&&(f.futureConnectorHorizontal.top=f.top+(cMultiverseFuturePanel.cViewHeight/2|0),m=!0),p=n.futures[0].multiverseColumns.length*cMultiverseFuturePanel.cViewColumnWidth/2|0,f.futureConnectorHorizontal.left!=
f.left+p-6&&(f.futureConnectorHorizontal.left=f.left+p-6,m=!0),r=n.futures[n.futures.length-1].multiverseColumns.length*cMultiverseFuturePanel.cViewColumnWidth/2|0,f.futureConnectorHorizontal.width!=s-(p+r)&&(f.futureConnectorHorizontal.width=s-(p+r),m=!0));t=null;if(n.past)for(p=0,r=c.futurePanels.length;p<r;p++)if(c.futurePanels[p].future.id==n.past.id){t=c.futurePanels[p];break}null!=t?(f.pastConnectorVertical||(f.pastConnectorVertical=new cPanel({align:eAlign.eNone,left:0,top:0,width:8,height:cMultiverseFuturePanel.cViewHeight,
backgroundColor:"#666666"}),c.viewMultiverse_FutureBackground.panels.push(f.pastConnectorVertical),m=!0),f.pastConnectorVertical.left!=f.left+(s/2|0)-6&&(f.pastConnectorVertical.left=f.left+(s/2|0)-6,m=!0),f.pastConnectorVertical.top!=f.top-(cMultiverseFuturePanel.cViewHeight/2|0)&&(f.pastConnectorVertical.top=f.top-(cMultiverseFuturePanel.cViewHeight/2|0),m=!0)):f.pastConnectorVertical&&(c.viewMultiverse_FutureBackground.removePanelWithoutRerender(f.pastConnectorVertical),f.pastConnectorVertical=
null,m=!0);n.futuresDetermined?f.terminatorPanel&&(c.viewMultiverse_Future.removePanelWithoutRerender(f.terminatorPanel),f.terminatorPanel=null,b=!0):(f.terminatorPanel||(f.terminatorPanel=new cPanel({align:eAlign.eNone,left:0,top:0,width:cMultiverseFuturePanel.cViewColumnWidth,height:cMultiverseFuturePanel.cViewHeight,backgroundColor:"#96ceb4",transparencyPercentage:15,shape:cPanel.cShapeRoundRect,borderRadius:40,textAlign:eTextAlign.eCenter,color:"#000000",fontSize:40}),c.viewMultiverse_Future.panels.push(f.terminatorPanel),
n.futuresDetermined||function(){var a=n;f.terminatorPanel.onTap=function(){this.stopBubble=!0;for(var c=!1,b=0,d=Model.allUndeterminedFutures.length;b<d;b++)if(Model.allUndeterminedFutures[b].future.id==a.id){c=!0;break}c||Model.allUndeterminedFutures.push(a)}}(),f.terminatorPanel.image=this.screen.getImageClone(c.expandImageId),f.terminatorPanel.imageStretchWidth=90,f.terminatorPanel.imageStretchHeight=90,f.terminatorPanel.innerHTML="",b=!0),f.terminatorPanel.left!=f.left+20&&(f.terminatorPanel.left=
f.left+20,b=!0),f.terminatorPanel.top!=f.top+(3*cMultiverseFuturePanel.cViewHeight/5|0)&&(f.terminatorPanel.top=f.top+(3*cMultiverseFuturePanel.cViewHeight/5|0),b=!0),f.terminatorPanel.width!=f.width-40&&(f.terminatorPanel.width=f.width-40,b=!0),f.terminatorPanel.height!=cMultiverseFuturePanel.cViewHeight-10&&(f.terminatorPanel.height=cMultiverseFuturePanel.cViewHeight-10,b=!0))}}p=0;for(r=c.futurePanels.length;p<r;p++)c.futurePanels[p].futurePanelHandled||(c.futurePanels[p].futureConnectorHorizontal&&
(c.viewMultiverse_FutureBackground.removePanelWithoutRerender(c.futurePanels[p].futureConnectorHorizontal),c.futurePanels[p].futureConnectorHorizontal=null,m=!0),c.futurePanels[p].pastConnectorVertical&&(c.viewMultiverse_FutureBackground.removePanelWithoutRerender(c.futurePanels[p].pastConnectorVertical),c.futurePanels[p].pastConnectorVertical=null,m=!0),c.futurePanels[p].terminatorPanel&&(c.viewMultiverse_Future.removePanelWithoutRerender(c.futurePanels[p].terminatorPanel),c.futurePanels[p].terminatorPanel=
null),c.viewMultiverse_Future.removePanelWithoutRerender(c.futurePanels[p]),b=!0,c.futurePanels.splice(p,1),p--,r--);m&&c.viewMultiverse_FutureBackground.rerender();b&&c.viewMultiverse_Future.rerender()};cViewMultiversePanel.prototype.onUpdateMultiverse_Fit=function(a){var c=this.viewFit,b=c.viewFuture.getInnerWidth(),d=b/2|0,e=c.viewFuture.getInnerHeight(),g=Model.multiverse.columns.length,l=b/g,b=b*(32/cMultiverseFuturePanel.cViewColumnWidth)|0,k=e*(32/cMultiverseFuturePanel.cViewHeight)|0,d=d-
(b/2|0),m=(e/2|0)-(k/2|0);c.offsetLeft=d+(this.viewOffset.left*(32/cMultiverseFuturePanel.cViewColumnWidth)|0);c.offsetTop=m+(this.viewOffset.top*(32/cMultiverseFuturePanel.cViewHeight)|0);c.viewFutureOrigin.left!=c.offsetLeft&&(c.viewFutureOrigin.setLeft(c.offsetLeft),this.viewFit.futureAxisLabel.setLeft(c.offsetLeft-40),this.viewFit.optionsAxisLabel.setLeft(c.offsetLeft+36));c.viewFutureOrigin.top!=c.offsetTop&&(c.viewFutureOrigin.setTop(c.offsetTop),this.viewFit.futureAxisLabel.setTop(c.offsetTop+
36),this.viewFit.optionsAxisLabel.setTop(c.offsetTop-26));c.viewBackground.left!=c.offsetLeft&&c.viewBackground.setLeft(c.offsetLeft);c.viewBackground.top!=c.offsetTop&&c.viewBackground.setTop(c.offsetTop);if(!a){this.topControlPanel.innerControlPanel.muliverseSizePanel.setNumberOfWorlds(Model.multiverse.totalNumberOfFutures,this.maxTotalFutures);l=32;c.viewFutureOrigin.width!=(g*(l+1)|0)&&c.viewFutureOrigin.setWidth((g+1)*l);c.viewBackground.width!=c.viewFutureOrigin.width&&c.viewBackground.setWidth(c.viewFutureOrigin.width);
a=40;a>l&&(a=l);e=!1;c.viewOverlay.ZoomBoundaryPanel||(c.viewOverlay.ZoomBoundaryPanel=new cPanel({align:eAlign.eNone,left:0,top:0,width:500,height:500,border:1,borderColor:"#cc0000",backgroundColor:"transparent"}),c.viewOverlay.panels.push(c.viewOverlay.ZoomBoundaryPanel),e=!0);c.viewOverlay.ZoomBoundaryPanel.left=d+32;c.viewOverlay.ZoomBoundaryPanel.top=m;c.viewOverlay.ZoomBoundaryPanel.width=b;c.viewOverlay.ZoomBoundaryPanel.height=k;for(var e=!0,k=b=!1,d=[],h=0,q=c.futurePanels.length;h<q;h++)c.futurePanels[h].futurePanelHandled=
!1;for(m=0;m<g;m++){var s=Model.multiverse.columns[m];if(null!=s)for(var p=0;p<s.futures.length;p++){for(var r=s.futures[p],n=!1,h=0,q=d.length;h<q;h++)if(d[h]==r.id){n=!0;break}if(!n){d.push(r.id);n=null;h=0;for(q=c.futurePanels.length;h<q;h++)if(c.futurePanels[h].future.id==r.id){n=c.futurePanels[h];break}null==n&&(n=new cPanel({align:eAlign.eNone,left:0,top:0,width:cMultiverseFuturePanel.cViewColumnWidth,height:a,border:2,borderColor:"#000000",paddingLeft:5,backgroundColor:"#ffffff",color:"#ffffff",
fontSize:30,onTap:function(){if(!this.future.futuresDetermined){this.stopBubble=!0;for(var a=!1,c=0,b=Model.allUndeterminedFutures.length;c<b;c++)if(Model.allUndeterminedFutures[c].future.id==this.future.id){a=!0;break}a||Model.allUndeterminedFutures.push(this.future)}}}),n.future=r,c.viewFutureOrigin.panels.push(n),c.futurePanels.push(n),k=!0);var f=cMultiverseFuturePanel.evaluationColor(r),t=" ";cMultiverseFuturePanel.evaluationText(r);r.futuresDetermined||(f="#96ceb4",t="*");var u=20+(r.multiverseColumns[0].columnNumber*
l|0),q=u,v=20+r.level*a,y=l|0,h=r.multiverseColumns.length*l|0,u=u+((r.multiverseColumns.length-1)*l/2|0),w=a;n.top!=v&&(n.top=v,k=!0);n.left!=u+2&&(n.left=u+2,k=!0);n.width!=y-4&&(n.width=y-4,k=!0);n.height!=w-4&&(n.height=w-4,k=!0);n.backgroundColor!=f&&(n.backgroundColor=f,k=!0);n.innerHTML!=t&&(n.innerHTML=t,k=!0);n.futurePanelHandled=!0;0<r.futures.length?(n.futureConnectorHorizontal||(n.futureConnectorHorizontal=new cPanel({align:eAlign.eNone,left:0,top:0,width:1,height:4,backgroundColor:"#666666"}),
c.viewBackground.panels.push(n.futureConnectorHorizontal),b=!0),n.futureConnectorHorizontal.top!=n.top+16&&(n.futureConnectorHorizontal.top=n.top+16,b=!0),f=32*r.futures[0].multiverseColumns.length/2|0,n.futureConnectorHorizontal.left!=q+(0+f-0)&&(n.futureConnectorHorizontal.left=q+(0+f-0),b=!0),q=32*r.futures[r.futures.length-1].multiverseColumns.length/2|0,n.futureConnectorHorizontal.width!=h-(f+q)&&(n.futureConnectorHorizontal.width=h-(f+q),b=!0)):n.futureConnectorHorizontal&&(c.viewBackground.removePanelWithoutRerender(n.futureConnectorHorizontal),
n.futureConnectorHorizontal=null,b=!0);f=null;if(r.past)for(h=0,q=c.futurePanels.length;h<q;h++)if(c.futurePanels[h].future.id==r.past.id){f=c.futurePanels[h];break}null!=f?(n.pastConnectorVertical||(n.pastConnectorVertical=new cPanel({align:eAlign.eNone,left:0,top:0,width:4,height:32,backgroundColor:"#666666"}),c.viewBackground.panels.push(n.pastConnectorVertical),b=!0),n.pastConnectorVertical.left!=n.left+(y/2|0)-4&&(n.pastConnectorVertical.left=n.left+(y/2|0)-4,b=!0),n.pastConnectorVertical.top!=
n.top-16&&(n.pastConnectorVertical.top=n.top-16,b=!0)):n.pastConnectorVertical&&(c.viewBackground.removePanelWithoutRerender(n.pastConnectorVertical),n.pastConnectorVertical=null,b=!0)}}}h=0;for(q=c.futurePanels.length;h<q;h++)c.futurePanels[h].futurePanelHandled||(c.futurePanels[h].futureConnectorHorizontal&&(c.viewBackground.removePanelWithoutRerender(c.futurePanels[h].futureConnectorHorizontal),c.futurePanels[h].futureConnectorHorizontal=null,b=!0),c.futurePanels[h].pastConnectorVertical&&(c.viewBackground.removePanelWithoutRerender(c.futurePanels[h].pastConnectorVertical),
c.futurePanels[h].pastConnectorVertical=null,b=!0),c.futurePanels[h].terminatorPanel&&c.viewFutureOrigin.removePanelWithoutRerender(c.futurePanels[h].terminatorPanel),c.viewFutureOrigin.removePanelWithoutRerender(c.futurePanels[h]),k=!0,c.futurePanels.splice(h,1),h--,q--);b&&c.viewBackground.rerender();k&&(c.viewFuture.rerender(),c.viewFutureOrigin.rerender());e&&c.viewOverlay.rerender()}};cViewMultiversePanel.prototype.resetMultiverse=function(){Model.resetFutures();var a=this.viewFlat.viewMultiverse_Future.getInnerWidth()/
2|0;this.viewOffset.left=a;240<this.viewOffset.left&&(this.viewOffset.left=240);this.viewOffset.top=140;this.viewFlat.viewMultiverse_Future.clearPanels();this.viewFlat.viewMultiverse_FutureBackground.clearPanels();this.viewFlat.viewMultiverse_FutureOverlay.clearPanels();this.viewFlat.columnIndicatorPanels=[];this.viewFlat.levelIndicatorPanels=[];this.viewFlat.futurePanels=[];this.viewFlat.visibleMultiversePanel=null;this.viewFlat.outerMultiversePanel=null;this.viewFlat.leftBlurPanel=null;this.viewFlat.rightBlurPanel=
null;this.viewFlat.topBlurPanel=null;this.viewFlat.centerLinePanel=null;this.viewFlat.viewMultiverse_FutureBackground.rerender();this.viewFlat.viewMultiverse_Future.rerender();this.viewFlat.viewMultiverse_FutureOverlay.rerender();this.viewFit.viewFutureOrigin.clearPanels();this.viewFit.viewBackground.clearPanels();this.viewFit.viewOverlay.clearPanels();this.viewFit.viewOverlay.ZoomBoundaryPanel=null;this.viewFit.columnIndicatorPanels=[];this.viewFit.levelIndicatorPanels=[];this.viewFit.futurePanels=
[];this.viewFit.viewBackground.rerender();this.viewFit.viewFuture.rerender();this.viewFit.viewFutureOrigin.rerender();this.viewFit.viewOverlay.rerender();this.onUpdateMultiverse()};cViewMultiversePanel.prototype.onVisible=function(){if(this.firstOnVisible||1>=Model.multiverse.totalNumberOfFutures)this.firstOnVisible=!1,this.resetMultiverse();else this.onUpdateMultiverse();this.bottomControlPanel.innerControlPanel.searchMethodOptionsPanel.updateSearchMethodCaption();if(!this.futureGeneratorThreadActive){this.futureGeneratorThreadActive=
!0;var a=this;setTimeout(function(){a.generateFuturesThread()},100)}};cViewMultiversePanel.prototype.onInvisible=function(){};cViewMultiversePanel.prototype.onViewFlatFuturePanelMouseDown=function(a,c){this.viewFlat.draggingOffset=!0;this.viewFlat.draggingOffsetStartLeft=this.viewOffset.left;this.viewFlat.draggingOffsetStartTop=this.viewOffset.top;this.viewFlat.draggingOffsetStartX=a;this.viewFlat.draggingOffsetStartY=c};cViewMultiversePanel.prototype.onViewFlatFuturePanelMouseMove=function(a,c){this.viewFlat.draggingOffset&&
(this.viewOffset.left=this.viewFlat.draggingOffsetStartLeft+(a-this.viewFlat.draggingOffsetStartX),this.viewOffset.top=this.viewFlat.draggingOffsetStartTop+(c-this.viewFlat.draggingOffsetStartY),this.onUpdateMultiverse())};cViewMultiversePanel.prototype.onViewFlatFuturePanelMouseUp=function(a,c){this.viewFlat.draggingOffset=!1};cViewMultiversePanel.prototype.onViewFlatFuturePanelScroll=function(a){this.viewOffset.top+=50*a;this.onUpdateMultiverse()};cViewMultiversePanel.prototype.onViewFlatFuturePanelTap=
function(a,c){this.topControlPanel.innerControlPanel.viewModePanel.fitPanel.onClick();this.onUpdateMultiverse()};cViewMultiversePanel.prototype.onViewFitFuturePanelMouseDown=function(a,c){this.viewFit.draggingOffset=!0;this.viewFit.draggingOffsetStartLeft=this.viewOffset.left;this.viewFit.draggingOffsetStartTop=this.viewOffset.top;this.viewFit.draggingOffsetStartX=a;this.viewFit.draggingOffsetStartY=c};cViewMultiversePanel.prototype.onViewFitFuturePanelMouseMove=function(a,c){if(this.viewFit.draggingOffset){var b=
(c-this.viewFit.draggingOffsetStartY)/(32/cMultiverseFuturePanel.cViewHeight)|0;this.viewOffset.left=this.viewFit.draggingOffsetStartLeft+((a-this.viewFit.draggingOffsetStartX)/(32/cMultiverseFuturePanel.cViewColumnWidth)|0);this.viewOffset.top=this.viewFit.draggingOffsetStartTop+b;this.onUpdateMultiverse_Fit(!0)}};cViewMultiversePanel.prototype.onViewFitFuturePanelMouseUp=function(a,c){this.viewFit.draggingOffset=!1};cViewMultiversePanel.prototype.onViewFitFuturePanelScroll=function(a){this.viewOffset.top+=
50*a/(32/cMultiverseFuturePanel.cViewHeight)|0;this.onUpdateMultiverse_Fit(!0)};cViewMultiversePanel.prototype.onViewFitFuturePanelTap=function(a,c){var b=(a-this.viewFit.getInnerWidth()/2-36)/(32/cMultiverseFuturePanel.cViewColumnWidth)|0,d=(c-this.viewFit.getInnerHeight()/2-18)/(32/cMultiverseFuturePanel.cViewHeight)|0;this.viewOffset.left-=b;this.viewOffset.top-=d;this.topControlPanel.innerControlPanel.viewModePanel.flatPanel.onClick();this.onUpdateMultiverse()};cViewMultiversePanel.prototype.focusOnFuture=
function(a){this.viewOffset.left=-2+(this.getInnerWidth()/2|0)-a.multiverseColumns[0].columnNumber*cMultiverseFuturePanel.cViewColumnWidth;this.viewOffset.top=-98+(this.getInnerHeight()/2|0)-a.level*cMultiverseFuturePanel.cViewHeight;this.onUpdateMultiverse()};cViewMultiversePanel.prototype.generateFuturesThread=function(){this.expansionMode==cViewMultiversePanel.eExpansionMode_Auto&&Model.stopSearchWhenGoalFound&&null!=Model.newestGoalFuture&&(Model.allUndeterminedFutures=[],this.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.onClick(),
this.focusOnFuture(Model.newestGoalFuture),Model.newestGoalFuture=null);Model.completedDeterminingFutures()&&(this.expansionMode==cViewMultiversePanel.eExpansionMode_Auto?Model.planNextUndeterminedFuture():Model.allUndeterminedFutures=[]);if(!Model.completedDeterminingFutures())Model.continueDeterminingFutures({maxTimeMs:60,maxTotalFutures:this.maxTotalFutures,maxDepth:999,focusColumnNumber:-((this.viewOffset.left-cMultiverseFuturePanel.cViewColumnWidth/2)/cMultiverseFuturePanel.cViewColumnWidth)|
0}),this.onUpdateMultiverse();else if(this.expansionMode==cViewMultiversePanel.eExpansionMode_Auto)this.bottomControlPanel.innerControlPanel.expansionModePanel.manualPanel.onClick();var a=this;setTimeout(function(){a.generateFuturesThread()},50)}})();var cFilePresets={presets:[]};
cFilePresets.presets.push({application:{name:"ProblemSolver",home:"http://complexity.zone/problem_solver",version:"0.0.1"},project:{name:"Towers of Hanoi",html:'\x3c!-- Model the Towers of Hanoi puzzle using HTML. --\x3e\n\n<towersofhanoi>\n  <rod>\n    <disk size="1" color="red"></disk>\n    <disk size="2" color="yellow"></disk>\n    <disk size="3" color="blue"></disk>\n  </rod>\n  <rod>\n  </rod>\n  <rod>\n  </rod>\n</towersofhanoi>\n\n\x3c!-- The HTML code below is just for displaying the pins as a background. --\x3e\n\n<background>\n  <pin></pin>\n  <pin></pin>\n  <pin></pin>\n</background>\n',css:'/* Apply CSS to make the world appear natural. */\n\nbody {\n  padding: 6px;\n}\n\ntowersofhanoi {\n  position: absolute;\n  display: block;\n  width: 300px;\n}\n\nrod {\n  display: inline-block;\n  position: relative;\n  width: 86px;\n  height: 150px;\n  background-color: transparent;\n}\n\ndisk {\n  display: block;\n  position: absolute;\n  height: 30px;\n  border: 1px solid black;\n  background-color: #cccccc;\n}\n\ndisk[size="1"] {\n  left: 28px;\n  width: 30px;\n  background-color: #ff0000;\n}\n\ndisk[size="2"] {\n  left: 18px;\n  width: 50px;\n  background-color: #ffff00;\n}\n\ndisk[size="3"] {\n  left: 3px;\n  width: 80px;\n  background-color: #0000ff;\n}\n\ndisk:nth-last-child(1) {\n  top: 100px;\n}\n\ndisk:nth-last-child(2) {\n  top: 60px;\n}\n\ndisk:nth-last-child(3) {\n  top: 20px;\n}\n\n/* The following CSS rules apply to the background. */\n\nbackground {\n  position: absolute;\n  display: block;\n  z-index: -1;\n  width: 270px;\n  height: 140px;\n  border-bottom: 25px solid #aaaa66;\n}\n\npin {\n  display: block;\n  position: absolute;\n  top: 10px;\n  width: 10px;\n  height: 150px;\n  background-color: #aaaa66;\n}\n\npin:nth-child(1) {\n  left: 38px;\n}\n\npin:nth-child(2) {\n  left: 128px;\n}\n\npin:nth-child(3) {\n  left: 218px;\n}\n',
actions:"// First select all the rods which have at least one disk.\nvar rodsWithDisks = $(\"rod\").has(\"disk\");\n\n// Choose any one of these rods using Problem Solver's chooseOne() plugin.\n// This tells Problem Solver to run this code for each rod which is not empty.\nvar chosenRod = rodsWithDisks.chooseOne();\n\n// Select the top-most disk on the chosen rod.\nvar topDisk = chosenRod.children().eq(0);\n\n// Choose a any other rod as the destination using Problem Solver's chooseOne() plugin.\n// This tells Problem Solver to run this code for each possible destination rod.\nvar destinationRod = chosenRod.siblings().chooseOne();\n\n// Move this disk to the chosen destination rod.\ntopDisk.prependTo(destinationRod);\n\n// Store resulting world in a new world and describe the changes:\nnew multiverse.world('move ' + topDisk.attr('color') + ' disk to rod number ' + (destinationRod.index() + 1));\n\n",
evaluations:"if ($(\"disk[size='2'] ~ disk[size='1']\").length) {\n  // A disk of size 2 is placed on top of a disk with size 1,\n  // so mark this world as illegal:\n  world.illegal();\n} else if ($(\"disk[size='3'] ~ disk[size='1']\").length) {\n  // A disk of size 3 is placed on top of a disk with size 1,\n  // so mark this world as illegal:\n  world.illegal();\n} else if ($(\"disk[size='3'] ~ disk[size='2']\").length) {\n  // A disk of size 3 is placed on top of a disk with size 2,\n  // so mark this world as illegal:\n  world.illegal();\n} else if ($('rod').last().children().length == 3) {\n  // There are no violations and all 3 disks are placed on the last rod - the puzzle is solved,\n  // so mark this world as the goal:\n  world.goal('DONE!');\n}\n",
searchAlgorithm:"breadth-first"}});
cFilePresets.presets.push({application:{name:"ProblemSolver",home:"http://complexity.zone/problem_solver",version:"0.0.1"},project:{name:"River crossing",html:'\x3c!-- Model the initial "now" situation (world) using HTML. --\x3e\n\n<riverBank class="A">\n  <farmer>farmer</farmer>\n  <fox>fox</fox>\n  <chicken>chicken</chicken>\n  <grain>grain</grain>\n</riverBank>\n\n<river></river>\n\n<riverBank class="B">\n</riverBank>\n',css:"/* Apply CSS to make the world appear natural. */\n\nriver {\n  /* position and color the river */\n  position: absolute;\n  left: 100px;\n  width: 50px;\n  height: 210px;\n  /* color the river blue */\n  background-color: #aaaaff;\n}\n\nriverBank {\n  /* set the size and color of the river bank */\n  position: absolute;\n  width: 100px;\n  height: 210px;\n  /* color the riverside green */\n  background-color: #00aa00;\n}\nriverBank.A {\n  /* position river bank A on the left side */\n  left: 0px;\n}\nriverBank.B {\n  /* position river bank B on the right side */\n  left: 150px;\n}\n\nriverBank * {\n  /* common properties for farmer, fox, chicken and grain */\n  display: block;\n  margin: 10px;\n  padding: 10px;\n  text-align: center;\n}\n\nfarmer {\n  font-weight: bold;\n  color: #ffffff;\n  background-color: #0000ff;\n}\n\nfox {\n  background-color: #D2691E;\n}\n\nchicken {\n  background-color: #ff0000;\n}\n\ngrain {\n  background-color: #ffff00;\n}\n",actions:"\n// Select the farmer:\nvar farmer = $('farmer');\n\n// List the available items to take to the other river bank.\nvar selectableItems = farmer.siblings();\n\n// Optionally select any single item (0 or 1 items) using the special choose() plugin.\nvar optionalItem = selectableItems.choose(0, 1);\n\n// Select the destination river bank:\nvar otherBank = farmer.parent().siblings('riverBank');\n\n// Move the farmer (and optionally an item) to the other river bank:\nfarmer.add(optionalItem).appendTo(otherBank);\n\n// Store resulting world in a new world and describe the changes:\nnew multiverse.world('move to ' + otherBank[0].className + (optionalItem.length > 0 ? ' with ' + optionalItem[0].nodeName : ' alone'));\n",
evaluations:"\nif ($('riverBank.B *').length == 4)\n{\n  // All four subjects are on the other side - the puzzle is solved,\n  // so mark this world as the goal:\n  world.goal('made it!');\n}\n\nif (($('fox').siblings('chicken').length > 0) &&\n    ($('fox').siblings('farmer').length == 0))\n{\n  // The fox and chicken are at the same river bank but\n  // unattended by the farmer, so mark this world as illegal:\n  world.illegal('not allowed to leave fox and chicken unattended');\n}\n\nif (($('chicken').siblings('grain').length > 0) &&\n    ($('chicken').siblings('farmer').length == 0))\n{\n  // The chicken and grain are at the same river bank but\n  // unattended by the farmer, so mark this world as illegal:\n  world.illegal('not allowed to leave chicken and grain unattended');\n}\n\n// If we haven't achieved our goal, at least give it some kind of score with\n// the like() function, where its value is the number of subjects on the other side.\n// This will guide the auto search function when the search method is set to \"high like-score first\".\nworld.like($('riverBank.B *').length);\n",
searchAlgorithm:"breadth-first"}});for(var lChessBoard="",lChessBoard=lChessBoard+'<table id="chessboard" cellpadding="0" cellspacing="0">\n',lrow=1;8>=lrow;lrow++){for(var lChessBoard=lChessBoard+"  <tr>\n",lcolumn=1;8>=lcolumn;lcolumn++)lChessBoard+='    <td id="p'+lrow+lcolumn+'"></td>\n';lChessBoard+="  </tr>\n"}lChessBoard+="</table>\n";
cFilePresets.presets.push({application:{name:"ProblemSolver",home:"http://complexity.zone/problem_solver",version:"0.0.1"},project:{name:"Eight queens puzzle",html:lChessBoard,css:"#chessboard {\n  border: 3px solid #333333;\n}\n\n#chessboard td {\n  width: 40px;\n  height: 40px;\n  background: #ffffff;\n  color: #000000;\n  font-size: 30px;\n  text-shadow: 0 1px #ffffff;\n  text-align: center;\n  vertical-align: middle;\n}\n\n#chessboard tr:nth-child(odd) td:nth-child(even),\n#chessboard tr:nth-child(even) td:nth-child(odd) {\n  background: #aaaaaa;\n}\n",
actions:"// Method: place a queen on the first empty row and mark the row as 'done'.\n\n// Select the first row that we have not yet filled with a queen.\nvar row = $('tr:not(.done)').eq(0);\n\n// Select one of the 8 cells within the row.\nvar cell = row.children().chooseOne();\n\n// Fill the cell with the unicode value for the black queen symbol.\ncell.html('&#9818;');\n\n// Mark the row's class with 'done'.\nrow.addClass('done');\n\n// Create the new world.\nnew multiverse.world();\n\n",evaluations:"\n// List all vertical and diagonal lines in an array. We will use these lines\n// to determine whether any of them contains more than one queen. Note that\n// we do not need to look at horizontal lines because we place a single\n// queen on each row.\nvar lines = [\n  // vertical lines:\n  ['11', '21', '31', '41', '51', '61', '71', '81'],\n  ['12', '22', '32', '42', '52', '62', '72', '82'],\n  ['13', '23', '33', '43', '53', '63', '73', '83'],\n  ['14', '24', '34', '44', '54', '64', '74', '84'],\n  ['15', '25', '35', '45', '55', '65', '75', '85'],\n  ['16', '26', '36', '46', '56', '66', '76', '86'],\n  ['17', '27', '37', '47', '57', '67', '77', '87'],\n  ['18', '28', '38', '48', '58', '68', '78', '88'],\n  // diagonal lines:\n  ['21', '12'],\n  ['31', '22', '13'],\n  ['41', '32', '23', '14'],\n  ['51', '42', '33', '24', '15'],\n  ['61', '52', '43', '34', '25', '16'],\n  ['71', '62', '53', '44', '35', '26', '17'],\n  ['81', '72', '63', '54', '45', '36', '27', '18'],\n  [      '82', '73', '64', '55', '46', '37', '28'],\n  [            '83', '74', '65', '56', '47', '38'],\n  [                  '84', '75', '66', '57', '48'],\n  [                        '85', '76', '67', '58'],\n  [                              '86', '77', '68'],\n  [                                    '87', '78'],\n  ['71', '82'],\n  ['61', '72', '83'],\n  ['51', '62', '73', '84'],\n  ['41', '52', '63', '74', '85'],\n  ['31', '42', '53', '64', '75', '86'],\n  ['21', '32', '43', '54', '65', '76', '87'],\n  ['11', '22', '33', '44', '55', '66', '77', '88'],\n  [      '12', '23', '34', '45', '56', '67', '78'],\n  [            '13', '24', '35', '46', '57', '68'],\n  [                  '14', '25', '36', '47', '58'],\n  [                        '15', '26', '37', '48'],\n  [                              '16', '27', '38'],\n  [                                    '17', '28']\n];\n\n// Now we look at whether more than one queen is present on any of these lines.\n// If so, we will store the violation in the string variable 'violation'.\nvar violation = '';\nfor (var li = 0; li < lines.length; li++) {\n  var line = lines[li];\n  var numberOfQueens = 0;\n  for (var ci = 0; ci < line.length; ci++) {\n    if ($('#p' + line[ci]).html() != '') {\n      numberOfQueens++;\n    }\n  }\n  if (numberOfQueens > 1) {\n    // We have found more than one queen on a line.\n    violation = numberOfQueens + ' queens found on a line';\n    // No need to look any further. Break the loop.\n    break;\n  }\n}\n\n// Check whether a violation was found.\nif (violation != '') {\n  // We have found a violation, mark the world as illegal.\n  world.illegal(violation);\n} else  {\n  // No violations found. Check whether the goal is achieved:\n  if($('tr.done').length == 8) {\n    // We have placed a queen on each of the eight rows without violations:\n    world.goal('8 queens!');\n  }\n}\n\n\n",
searchAlgorithm:"left-side-first"}});function clsFileLoadPanel(a){cPanel.call(this,a);this.inputElement=null;this.fileLoaded=!1;this.fileContent="";this.onSelectFile=a?"undefined"!=typeof a.onSelectFile?a.onSelectFile:null:null;this.onSelectFileThis=a?"undefined"!=typeof a.onSelectFileThis?a.onSelectFileThis:null:null}clsFileLoadPanel.deriveFrom(cPanel);
(function(){clsFileLoadPanel.prototype.inputElement=null;clsFileLoadPanel.prototype.fileLoaded=!1;clsFileLoadPanel.prototype.fileContent="";clsFileLoadPanel.prototype.onSelectFile=null;clsFileLoadPanel.prototype.onSelectFileThis=null;clsFileLoadPanel.prototype.render=function(a,c,b){cPanel.prototype.render.call(this,a,c,b);var d=this;null!=this.element&&(null==this.inputElement&&(this.inputElement=document.createElement("INPUT"),this.inputElement.type="file",this.inputElement.id="pnl_"+this.instanceId+
"_"+this.innerId+"_input",this.element.appendChild(this.inputElement),this.inputElement.style.fontSize=this.fontSize+"px",this.inputElement.style.color=this.color,this.inputElement.style.backgroundColor=this.backgroundColor,this.inputElement.addEventListener("change",function(a){d.onOpenFile(a)},!1)),this.inputElement.style.width=this.getInnerWidth()-6+"px",this.inputElement.style.height=this.getInnerHeight()-4+"px")};clsFileLoadPanel.prototype.onOpenFile=function(a){a=a.target.files[0];var c=this;
if(a&&(""==a.type||a.type.match("/text.*/"))){var b=new FileReader;b.onload=function(a){c.fileLoaded=!0;c.fileContent=b.result;if(c.onSelectFile)if(c.onSelectFileThis)c.onSelectFile.call(c.onSelectFileThis,!0);else c.onSelectFile(!0)};b.onabort=function(a){c.fileLoaded=!1;c.fileContent="";if(c.onSelectFileThis)c.onSelectFile.call(c.onSelectFileThis,!1);else c.onSelectFile(!1)};b.onerror=function(a){c.fileLoaded=!1;c.fileContent="";if(c.onSelectFileThis)c.onSelectFile.call(c.onSelectFileThis,!1);else c.onSelectFile(!1)};
b.readAsText(a)}else if(c.fileLoaded=!1,c.fileContent="",c.onSelectFileThis)c.onSelectFile.call(c.onSelectFileThis,!1);else c.onSelectFile(!1)}})();
function cProblemSolverApp(a){cApp.call(this,a);this.resourcesLoaded=!1;this.screen=new cScreen(this,a?a:document.body);this.screen.loadImages([{id:cProblemSolverApp.cImageProblemSolver,src:"img/problemsolver.png"},{id:cProblemSolverApp.cImageViewWorldImage,src:"img/view_world.png"},{id:cProblemSolverApp.cImageViewChangesImage,src:"img/view_changes.png"},{id:cProblemSolverApp.cImageViewEvaluateImage,src:"img/view_evaluate.png"},{id:cProblemSolverApp.cImageViewMultiverseImage,src:"img/view_multiverse.png"},
{id:cProblemSolverApp.cImageWorld,src:"img/world.png"},{id:cProblemSolverApp.cImageChanges,src:"img/changes.png"},{id:cProblemSolverApp.cImageEvaluate,src:"img/evaluate.png"},{id:cProblemSolverApp.cImageAgent,src:"img/agent.png"},{id:cProblemSolverApp.cImageMultiverse,src:"img/multiverse.png"},{id:cProblemSolverApp.cImageQuestion,src:"img/question.png"},{id:cProblemSolverApp.cImageClose,src:"img/close.png"},{id:cProblemSolverApp.cImageRefresh,src:"img/refresh.png"},{id:cProblemSolverApp.cImageAdd,
src:"img/add.png"},{id:cProblemSolverApp.cImageDelete,src:"img/delete.png"},{id:cProblemSolverApp.cImageUp,src:"img/up.png"},{id:cProblemSolverApp.cImageDown,src:"img/down.png"},{id:cProblemSolverApp.cFutureAxis,src:"img/futureaxis.png"},{id:cProblemSolverApp.cOptionsAxis,src:"img/optionsaxis.png"},{id:cProblemSolverApp.cExpand,src:"img/expand.png"}]);this.evaluationSandboxIFrame_Initialized=this.actionSandboxIFrame_Initialized=!1;this.screen.waitForResources(this,function(){this.resourcesLoaded=
!0;this.screen.setup();var a=this;this.actionSandboxIFrame=new cIFramePanel({align:eAlign.eNone,visible:!1,width:128,height:128,backgroundColor:"transparent",border:1,borderColor:"#000000",iFrameHTML:"",supportScroll:!1});this.screen.panel.panels.push(this.actionSandboxIFrame);Model.initActionSandbox(this.actionSandboxIFrame,function(){a.actionSandboxIFrame_Initialized=!0;a.updateSandboxInitialized()});this.evaluationSandboxIFrame=new cIFramePanel({align:eAlign.eNone,visible:!1,width:128,height:128,
backgroundColor:"transparent",border:1,borderColor:"#000000",iFrameHTML:"",supportScroll:!1});this.screen.panel.panels.push(this.evaluationSandboxIFrame);Model.initEvaluationSandbox(this.evaluationSandboxIFrame,function(){a.evaluationSandboxIFrame_Initialized=!0;a.updateSandboxInitialized()});this.screenPanel=new cPanel({align:eAlign.eClient,backgroundColor:"transparent"});this.screen.panel.panels.push(this.screenPanel);this.panelTopMenu=new cPanel({align:eAlign.eTop,height:60,backgroundColor:"#333333"});
this.screenPanel.panels.push(this.panelTopMenu);this.panelTopMenuLogo=new cPanel({align:eAlign.eLeft,width:192,margin:6,backgroundColor:"transparent",image:this.screen.getImageClone(cProblemSolverApp.cImageProblemSolver),imageStretch:!0,onClick:function(){a.panelTabMenu.closeMenus()}});this.panelTopMenu.panels.push(this.panelTopMenuLogo);this.panelTopMenuFile=new cPanel({align:eAlign.eLeft,shape:cPanel.cShapeRoundRect,width:172,marginLeft:16,marginTop:8,marginBottom:8,paddingTop:2,border:1,borderColor:"#262626",
borderRadius:16,backgroundColor:"#262626",color:"#ffffff",fontSize:30,textAlign:eTextAlign.eCenter,innerHTML:"EXAMPLES",onClick:function(){var b=new clsModalPanel({onClick:function(){setTimeout(function(){a.screen.panel.removePanel(b)},10)}});a.screen.panel.appendPanel(b);b.fileDialogPanel=new cPanel({align:eAlign.eCenterVertical,shape:cPanel.cShapeRoundRect,width:720,marginLeft:100,marginTop:100,marginRight:100,marginBottom:100,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",
color:"#ffffff",fontSize:36,onClick:function(){this.stopBubble=!0}});b.contentPanel.panels.push(b.fileDialogPanel);b.fileDialogPanel.headerPanel=new cPanel({align:eAlign.eTop,height:50,paddingLeft:20,backgroundColor:"#444444",color:"#eeeeee",fontSize:36,innerHTML:"Open an example project"});b.fileDialogPanel.panels.push(b.fileDialogPanel.headerPanel);b.fileDialogPanel.bottomPanel=new cPanel({align:eAlign.eBottom,height:70,paddingLeft:20,backgroundColor:"#444444"});b.fileDialogPanel.panels.push(b.fileDialogPanel.bottomPanel);
b.fileDialogPanel.bottomPanel.cancelButton=new cPanel({align:eAlign.eCenterVertical,shape:cPanel.cShapeRoundRect,width:200,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"CANCEL",onClick:function(){this.stopBubble=!0;setTimeout(function(){a.screen.panel.removePanel(b)},10)}});b.fileDialogPanel.bottomPanel.panels.push(b.fileDialogPanel.bottomPanel.cancelButton);b.fileDialogPanel.contentScrollPanel=
new cScrollboxPanel({align:eAlign.eClient,panelBoxRoundedBorder:!1,marginLeft:10,marginRight:10,paddingTop:20,paddingBottom:20,backgroundColor:"transparent",boxBackgroundColor:"#262626",scrollBarHandleColor:"#666666",autoHideScrollbar:!0});b.fileDialogPanel.panels.push(b.fileDialogPanel.contentScrollPanel);for(var e=0,g=cFilePresets.presets.length;e<g;e++){var l=new cPanel({align:eAlign.eTop,height:70,marginBottom:4,backgroundColor:"transparent",onClick:function(){this.stopBubble=!0;var e=this.presetIndex;
setTimeout(function(){a.screen.panel.removePanel(b);Model.loadFile(cFilePresets.presets[e]);a.viewWorldPanel.reloadWorld();a.viewChangesPanel.reloadWorld();a.viewEvaluatePanel.reloadWorld();a.viewMultiversePanel.resetMultiverse();a.panelTabMenu.selectTabIndex(0)},10)}});b.fileDialogPanel.contentScrollPanel.panelBox.panels.push(l);l.presetIndex=e;var k=new cPanel({align:eAlign.eLeft,width:70,marginRight:4,backgroundColor:"#444444"});l.panels.push(k);if(""!=cFilePresets.presets[e].html){var m=new cIFramePanel({align:eAlign.eClient,
iFrameHTML:"<!DOCTYPE html>\n<html>\n<head>\n<style>\nbody {\n  margin: 0px;\n  border: 0px;\n  padding: 0px;\n  background-color: #ffffff;\n  font-family: Calibri, Arial, helvetica, sans-serif;\n  -moz-user-select: -moz-none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n"+cFilePresets.presets[e].project.css+"\n</style>\n</head>\n<body>"+cFilePresets.presets[e].project.html+"\n</body>\n</html>",supportScroll:!1,zoom:0.2});k.panels.push(m);
m=new cPanel({align:eAlign.eClient,backgroundColor:"transparant",onClick:function(){this.stopBubble=!0;var e=this.presetIndex;setTimeout(function(){a.screen.panel.removePanel(b);Model.loadFile(cFilePresets.presets[e]);a.viewWorldPanel.reloadWorld();a.viewChangesPanel.reloadWorld();a.viewEvaluatePanel.reloadWorld();a.viewMultiversePanel.resetMultiverse();a.panelTabMenu.selectTabIndex(0)},10)}});k.panels.push(m);m.presetIndex=e}k=new cPanel({align:eAlign.eClient,paddingLeft:8,paddingRight:8,paddingTop:20,
backgroundColor:"#444444",color:"#eeeeee",fontSize:24,textAlign:eTextAlign.eLeft,innerHTML:cLib.textToHTML(cFilePresets.presets[e].project.name)});l.panels.push(k)}b.contentPanel.rerender()}});this.panelTopMenu.panels.push(this.panelTopMenuFile);this.panelTopMenuClear=new cPanel({align:eAlign.eLeft,shape:cPanel.cShapeRoundRect,width:118,marginLeft:8,marginTop:8,marginBottom:8,paddingTop:2,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",color:"#ffffff",fontSize:30,textAlign:eTextAlign.eCenter,
innerHTML:"CLEAR",onClick:function(){this.stopBubble=!0;var b=new clsModalPanel({onClick:function(){setTimeout(function(){a.screen.panel.removePanel(b)},10)}});a.screen.panel.appendPanel(b);b.clearPanel=new cPanel({align:eAlign.eCenter,shape:cPanel.cShapeRoundRect,width:640,height:300,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",onClick:function(){this.stopBubble=!0}});b.contentPanel.panels.push(b.clearPanel);b.clearPanel.headerPanel=new cPanel({align:eAlign.eTop,height:50,
paddingLeft:20,backgroundColor:"#444444",color:"#eeeeee",fontSize:36,innerHTML:"Clear project"});b.clearPanel.panels.push(b.clearPanel.headerPanel);b.clearPanel.bottomPanel=new cPanel({align:eAlign.eBottom,height:70,paddingLeft:20,backgroundColor:"#444444"});b.clearPanel.panels.push(b.clearPanel.bottomPanel);b.clearPanel.bottomPanel.buttonPanel=new cPanel({align:eAlign.eCenterVertical,width:420,backgroundColor:"transparent"});b.clearPanel.bottomPanel.panels.push(b.clearPanel.bottomPanel.buttonPanel);
b.clearPanel.bottomPanel.buttonPanel.okButton=new cPanel({align:eAlign.eLeft,shape:cPanel.cShapeRoundRect,width:200,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"OK",onClick:function(){this.stopBubble=!0;a.screen.panel.removePanel(b);setTimeout(function(){Model.ClearAll();a.viewWorldPanel.reloadWorld();a.viewChangesPanel.reloadWorld();a.viewEvaluatePanel.reloadWorld();
a.viewMultiversePanel.resetMultiverse();a.panelTabMenu.selectTabIndex(0)},10)}});b.clearPanel.bottomPanel.buttonPanel.panels.push(b.clearPanel.bottomPanel.buttonPanel.okButton);b.clearPanel.bottomPanel.buttonPanel.cancelButton=new cPanel({align:eAlign.eLeft,shape:cPanel.cShapeRoundRect,width:200,marginLeft:20,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"CANCEL",onClick:function(){this.stopBubble=
!0;setTimeout(function(){a.screen.panel.removePanel(b)},10)}});b.clearPanel.bottomPanel.buttonPanel.panels.push(b.clearPanel.bottomPanel.buttonPanel.cancelButton);b.clearPanel.messagePanel=new cPanel({align:eAlign.eClient,padding:20,backgroundColor:"#262626",color:"#eeeeee",fontSize:32,innerHTML:'Would you like to start with a new empty project?<br />\n<span style="font-size: 20px;">All contents in "world", "changes" and "evaluate" will be cleared.</span>'});b.clearPanel.panels.push(b.clearPanel.messagePanel);
b.contentPanel.rerender()}});this.panelTopMenu.panels.push(this.panelTopMenuClear);this.panelTopMenuSaveAs=new cPanel({align:eAlign.eLeft,shape:cPanel.cShapeRoundRect,width:110,marginLeft:8,marginTop:8,marginBottom:8,paddingTop:2,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",color:"#ffffff",fontSize:30,textAlign:eTextAlign.eCenter,innerHTML:"SAVE",onClick:function(){this.stopBubble=!0;var b=new clsModalPanel({onClick:function(){setTimeout(function(){a.screen.panel.removePanel(b)},
10)}});a.screen.panel.appendPanel(b);"download"in document.createElement("a")?(b.windowPanel=new cPanel({align:eAlign.eCenter,shape:cPanel.cShapeRoundRect,width:640,height:480,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",onClick:function(){this.stopBubble=!0}}),b.contentPanel.panels.push(b.windowPanel),b.windowPanel.headerPanel=new cPanel({align:eAlign.eTop,height:50,paddingLeft:20,backgroundColor:"#444444",color:"#eeeeee",fontSize:36,innerHTML:"Download project to your PC"}),
b.windowPanel.panels.push(b.windowPanel.headerPanel),b.windowPanel.bottomPanel=new cPanel({align:eAlign.eBottom,height:70,paddingLeft:20,backgroundColor:"#444444"}),b.windowPanel.panels.push(b.windowPanel.bottomPanel),b.windowPanel.bottomPanel.buttonPanel=new cPanel({align:eAlign.eCenterVertical,width:420,backgroundColor:"transparent"}),b.windowPanel.bottomPanel.panels.push(b.windowPanel.bottomPanel.buttonPanel),b.windowPanel.bottomPanel.buttonPanel.okButton=new cPanel({align:eAlign.eLeft,shape:cPanel.cShapeRoundRect,
width:200,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"OK",onClick:function(){""!=b.windowPanel.clientPanel.fileNamePanel.inputPanel.getValue()&&(this.stopBubble=!0,a.screen.panel.removePanel(b),setTimeout(function(){var a=b.windowPanel.clientPanel.fileNamePanel.inputPanel.getValue(),a=a?a:"",c=Model.generateFileContent(b.windowPanel.clientPanel.projectPanel.inputPanel.getValue()),
l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(c));l.setAttribute("download",a);l.click()},10))}}),b.windowPanel.bottomPanel.buttonPanel.panels.push(b.windowPanel.bottomPanel.buttonPanel.okButton),b.windowPanel.bottomPanel.buttonPanel.cancelButton=new cPanel({align:eAlign.eLeft,shape:cPanel.cShapeRoundRect,width:200,marginLeft:20,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,
color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"CANCEL",onClick:function(){this.stopBubble=!0;setTimeout(function(){a.screen.panel.removePanel(b)},10)}}),b.windowPanel.bottomPanel.buttonPanel.panels.push(b.windowPanel.bottomPanel.buttonPanel.cancelButton),b.windowPanel.clientPanel=new cPanel({align:eAlign.eClient,paddingTop:20,backgroundColor:"transparent"}),b.windowPanel.panels.push(b.windowPanel.clientPanel),b.windowPanel.clientPanel.topMessageLabelPanel=new cPanel({align:eAlign.eTop,
height:120,paddingLeft:20,paddingRight:20,backgroundColor:"transparent",color:"#eeeeee",fontSize:26,innerHTML:'Enter your project\'s name and the file name you want to save the project to.\nThe project will be downloaded to your "downloads" folder when you press OK.'}),b.windowPanel.clientPanel.panels.push(b.windowPanel.clientPanel.topMessageLabelPanel),b.windowPanel.clientPanel.projectPanel=new cPanel({align:eAlign.eTop,height:80,backgroundColor:"transparent"}),b.windowPanel.clientPanel.panels.push(b.windowPanel.clientPanel.projectPanel),
b.windowPanel.clientPanel.projectPanel.labelPanel=new cPanel({align:eAlign.eLeft,width:280,padding:20,backgroundColor:"transparent",color:"#eeeeee",fontSize:32,textAlign:eTextAlign.eRight,innerHTML:"Project name:"}),b.windowPanel.clientPanel.projectPanel.panels.push(b.windowPanel.clientPanel.projectPanel.labelPanel),b.windowPanel.clientPanel.projectPanel.inputPanel=new cTextLineEditPanel({align:eAlign.eClient,marginTop:15,marginBottom:15,marginRight:30,backgroundColor:"#eeeeee",color:"#111111",fontSize:32,
value:"My project"}),b.windowPanel.clientPanel.projectPanel.panels.push(b.windowPanel.clientPanel.projectPanel.inputPanel),b.windowPanel.clientPanel.fileNamePanel=new cPanel({align:eAlign.eTop,height:80,backgroundColor:"transparent"}),b.windowPanel.clientPanel.panels.push(b.windowPanel.clientPanel.fileNamePanel),b.windowPanel.clientPanel.fileNamePanel.labelPanel=new cPanel({align:eAlign.eLeft,width:280,padding:20,backgroundColor:"transparent",color:"#eeeeee",fontSize:32,textAlign:eTextAlign.eRight,
innerHTML:"Project file name:"}),b.windowPanel.clientPanel.fileNamePanel.panels.push(b.windowPanel.clientPanel.fileNamePanel.labelPanel),b.windowPanel.clientPanel.fileNamePanel.inputPanel=new cTextLineEditPanel({align:eAlign.eClient,marginTop:15,marginBottom:15,marginRight:30,backgroundColor:"#eeeeee",color:"#111111",fontSize:32,value:"myproject.psp"}),b.windowPanel.clientPanel.fileNamePanel.panels.push(b.windowPanel.clientPanel.fileNamePanel.inputPanel)):(b.windowPanel=new cPanel({align:eAlign.eCenter,
shape:cPanel.cShapeRoundRect,width:700,height:360,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",onClick:function(){this.stopBubble=!0}}),b.contentPanel.panels.push(b.windowPanel),b.windowPanel.headerPanel=new cPanel({align:eAlign.eTop,height:50,paddingLeft:20,backgroundColor:"#444444",color:"#eeeeee",fontSize:36,innerHTML:'Save project as...&nbsp&nbsp&nbsp;<span style="font-size: 28px; color: #cc9999;">not supported in your browser</span>'}),b.windowPanel.panels.push(b.windowPanel.headerPanel),
b.windowPanel.bottomPanel=new cPanel({align:eAlign.eBottom,height:70,paddingLeft:20,backgroundColor:"#444444"}),b.windowPanel.panels.push(b.windowPanel.bottomPanel),b.windowPanel.bottomPanel.buttonPanel=new cPanel({align:eAlign.eCenterVertical,width:420,backgroundColor:"transparent"}),b.windowPanel.bottomPanel.panels.push(b.windowPanel.bottomPanel.buttonPanel),b.windowPanel.bottomPanel.buttonPanel.okButton=new cPanel({align:eAlign.eCenterVertical,shape:cPanel.cShapeRoundRect,width:200,marginTop:10,
marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"OK",onClick:function(){this.stopBubble=!0;a.screen.panel.removePanel(b)}}),b.windowPanel.bottomPanel.buttonPanel.panels.push(b.windowPanel.bottomPanel.buttonPanel.okButton),b.windowPanel.clientPanel=new cPanel({align:eAlign.eClient,paddingTop:10,backgroundColor:"transparent"}),b.windowPanel.panels.push(b.windowPanel.clientPanel),b.windowPanel.clientPanel.messagePanel=
new cPanel({align:eAlign.eClient,padding:20,backgroundColor:"transparent",color:"#eeeeee",fontSize:28,innerHTML:"Sorry, your browser does not support Problem Solver's method for downloading files to your PC.<br /><br />\nExamples of browsers that support downloading files are Chrome, Firefox and Opera."}),b.windowPanel.clientPanel.panels.push(b.windowPanel.clientPanel.messagePanel));b.contentPanel.rerender()}});this.panelTopMenu.panels.push(this.panelTopMenuSaveAs);this.panelTopMenuLoad=new cPanel({align:eAlign.eLeft,
shape:cPanel.cShapeRoundRect,width:120,marginLeft:8,marginTop:8,marginBottom:8,paddingTop:2,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",color:"#ffffff",fontSize:30,textAlign:eTextAlign.eCenter,innerHTML:"OPEN",onClick:function(){this.stopBubble=!0;var b=new clsModalPanel({onClick:function(){setTimeout(function(){a.screen.panel.removePanel(b)},10)}});a.screen.panel.appendPanel(b);window.File&&window.FileReader&&window.FileList&&window.Blob?(b.windowPanel=new cPanel({align:eAlign.eCenter,
shape:cPanel.cShapeRoundRect,width:700,height:480,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",onClick:function(){this.stopBubble=!0}}),b.contentPanel.panels.push(b.windowPanel),b.windowPanel.headerPanel=new cPanel({align:eAlign.eTop,height:50,paddingLeft:20,backgroundColor:"#444444",color:"#eeeeee",fontSize:36,innerHTML:"Load Problem Solver project from disk"}),b.windowPanel.panels.push(b.windowPanel.headerPanel),b.windowPanel.bottomPanel=new cPanel({align:eAlign.eBottom,
height:70,paddingLeft:20,backgroundColor:"#444444"}),b.windowPanel.panels.push(b.windowPanel.bottomPanel),b.windowPanel.bottomPanel.buttonPanel=new cPanel({align:eAlign.eCenterVertical,width:420,backgroundColor:"transparent"}),b.windowPanel.bottomPanel.panels.push(b.windowPanel.bottomPanel.buttonPanel),b.windowPanel.bottomPanel.buttonPanel.okButton=new cPanel({align:eAlign.eLeft,shape:cPanel.cShapeRoundRect,width:200,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#999999",border:1,borderColor:"#999999",
borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"OK",onClick:function(){this.stopBubble=!0;null!==b.windowPanel.clientPanel.fileLoadPanel.fileAsObject&&(a.screen.panel.removePanel(b),setTimeout(function(){Model.loadFile(b.windowPanel.clientPanel.fileLoadPanel.fileAsObject);a.viewWorldPanel.reloadWorld();a.viewChangesPanel.reloadWorld();a.viewEvaluatePanel.reloadWorld();a.viewMultiversePanel.resetMultiverse();a.panelTabMenu.selectTabIndex(0)},10))}}),b.windowPanel.bottomPanel.buttonPanel.panels.push(b.windowPanel.bottomPanel.buttonPanel.okButton),
b.windowPanel.bottomPanel.buttonPanel.cancelButton=new cPanel({align:eAlign.eLeft,shape:cPanel.cShapeRoundRect,width:200,marginLeft:20,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"CANCEL",onClick:function(){this.stopBubble=!0;setTimeout(function(){a.screen.panel.removePanel(b)},10)}}),b.windowPanel.bottomPanel.buttonPanel.panels.push(b.windowPanel.bottomPanel.buttonPanel.cancelButton),
b.windowPanel.clientPanel=new cPanel({align:eAlign.eClient,paddingTop:20,backgroundColor:"transparent"}),b.windowPanel.panels.push(b.windowPanel.clientPanel),b.windowPanel.clientPanel.topMessageLabelPanel=new cPanel({align:eAlign.eTop,height:100,paddingLeft:20,paddingRight:20,backgroundColor:"transparent",color:"#eeeeee",fontSize:26,innerHTML:"Select a Problem Solver project file that you want to import.\nThe project file will be imported into Problem Solver when you press OK."}),b.windowPanel.clientPanel.panels.push(b.windowPanel.clientPanel.topMessageLabelPanel),
b.windowPanel.clientPanel.fileLoadPanel=new clsFileLoadPanel({align:eAlign.eTop,height:80,paddingLeft:40,paddingTop:20,backgroundColor:"transparent",color:"#eeeeee",fontSize:32,onSelectFile:function(a){var c=!1;if(a&&b.windowPanel.clientPanel.fileLoadPanel.fileLoaded&&""!=b.windowPanel.clientPanel.fileLoadPanel.fileContent){a=null;try{a=eval("("+b.windowPanel.clientPanel.fileLoadPanel.fileContent+")")}catch(l){a=null}a&&a.application&&"ProblemSolver"===a.application.name&&a.project&&(b.windowPanel.clientPanel.fileLoadPanel.fileAsObject=
a,b.windowPanel.clientPanel.projectNamePanel.valuePanel.setInnerHTML(a.project.name?a.project.name:""),c=!0)}c?(b.windowPanel.bottomPanel.buttonPanel.okButton.setBackgroundColor("#262626"),b.windowPanel.bottomPanel.buttonPanel.okButton.setBorderColor("#262626"),b.windowPanel.clientPanel.statusMessageLabelPanel.setInnerHTML('<span style="color: #66ee66;">Successfully recognized file as a Problem Solver project.\nClick OK to import file into Problem Solver.</span>')):(b.windowPanel.clientPanel.fileLoadPanel.fileAsObject=
null,b.windowPanel.clientPanel.projectNamePanel.valuePanel.setInnerHTML(""),b.windowPanel.clientPanel.fileLoadPanel.fileLoaded=!1,b.windowPanel.clientPanel.fileLoadPanel.fileContent="",b.windowPanel.bottomPanel.buttonPanel.okButton.setBackgroundColor("#999999"),b.windowPanel.bottomPanel.buttonPanel.okButton.setBorderColor("#999999"),b.windowPanel.clientPanel.statusMessageLabelPanel.setInnerHTML('<span style="color: #ee6666;">Error: Failed to read file as an Problem Solver project.\nPlease select a file that was created with Problem Solver.</span>'))}}),
b.windowPanel.clientPanel.fileLoadPanel.fileAsObject=null,b.windowPanel.clientPanel.panels.push(b.windowPanel.clientPanel.fileLoadPanel),b.windowPanel.clientPanel.projectNamePanel=new cPanel({align:eAlign.eTop,height:70,backgroundColor:"transparent"}),b.windowPanel.clientPanel.panels.push(b.windowPanel.clientPanel.projectNamePanel),b.windowPanel.clientPanel.projectNamePanel.labelPanel=new cPanel({align:eAlign.eLeft,width:280,padding:15,backgroundColor:"transparent",color:"#eeeeee",fontSize:32,textAlign:eTextAlign.eRight,
innerHTML:"Project name:"}),b.windowPanel.clientPanel.projectNamePanel.panels.push(b.windowPanel.clientPanel.projectNamePanel.labelPanel),b.windowPanel.clientPanel.projectNamePanel.valuePanel=new cPanel({align:eAlign.eClient,padding:15,backgroundColor:"transparent",color:"#eeeeee",fontSize:32,innerHTML:""}),b.windowPanel.clientPanel.projectNamePanel.panels.push(b.windowPanel.clientPanel.projectNamePanel.valuePanel),b.windowPanel.clientPanel.statusMessageLabelPanel=new cPanel({align:eAlign.eBottom,
height:80,paddingLeft:20,paddingRight:20,backgroundColor:"transparent",color:"#eeeeee",fontSize:26,innerHTML:""}),b.windowPanel.clientPanel.panels.push(b.windowPanel.clientPanel.statusMessageLabelPanel)):(b.windowPanel=new cPanel({align:eAlign.eCenter,shape:cPanel.cShapeRoundRect,width:700,height:360,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",onClick:function(){this.stopBubble=!0}}),b.contentPanel.panels.push(b.windowPanel),b.windowPanel.headerPanel=new cPanel({align:eAlign.eTop,
height:50,paddingLeft:20,backgroundColor:"#444444",color:"#eeeeee",fontSize:36,innerHTML:'Load project from disk&nbsp&nbsp&nbsp;<span style="font-size: 28px; color: #cc9999;">not supported</span>'}),b.windowPanel.panels.push(b.windowPanel.headerPanel),b.windowPanel.bottomPanel=new cPanel({align:eAlign.eBottom,height:70,paddingLeft:20,backgroundColor:"#444444"}),b.windowPanel.panels.push(b.windowPanel.bottomPanel),b.windowPanel.bottomPanel.buttonPanel=new cPanel({align:eAlign.eCenterVertical,width:420,
backgroundColor:"transparent"}),b.windowPanel.bottomPanel.panels.push(b.windowPanel.bottomPanel.buttonPanel),b.windowPanel.bottomPanel.buttonPanel.okButton=new cPanel({align:eAlign.eCenterVertical,shape:cPanel.cShapeRoundRect,width:200,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"OK",onClick:function(){this.stopBubble=!0;a.screen.panel.removePanel(b)}}),b.windowPanel.bottomPanel.buttonPanel.panels.push(b.windowPanel.bottomPanel.buttonPanel.okButton),
b.windowPanel.clientPanel=new cPanel({align:eAlign.eClient,paddingTop:10,backgroundColor:"transparent"}),b.windowPanel.panels.push(b.windowPanel.clientPanel),b.windowPanel.clientPanel.messagePanel=new cPanel({align:eAlign.eClient,padding:20,backgroundColor:"transparent",color:"#eeeeee",fontSize:28,innerHTML:"Sorry, your browser does not support Problem Solver's method for loading files from your PC.<br /><br />\nConsider updating your browser to the newest version (or trying another browser)."}),
b.windowPanel.clientPanel.panels.push(b.windowPanel.clientPanel.messagePanel));b.contentPanel.rerender()}});this.panelTopMenu.panels.push(this.panelTopMenuLoad);this.panelTopMenuLogoBetaAndCopyright=new cPanel({align:eAlign.eRight,width:200,marginTop:6,marginRight:12,backgroundColor:"transparent",color:"#ffffff",fontSize:18,textAlign:eTextAlign.eRight,innerHTML:"<i>v0.01 Beta</i><br />\n&copy; 2014 Complexity.zone"});this.panelTopMenu.panels.push(this.panelTopMenuLogoBetaAndCopyright);this.panelTopMenuAbout=
new cPanel({align:eAlign.eRight,shape:cPanel.cShapeRoundRect,width:120,marginRight:8,marginTop:8,marginBottom:8,paddingTop:2,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",color:"#ffffff",fontSize:30,textAlign:eTextAlign.eCenter,innerHTML:"ABOUT",onClick:function(){this.stopBubble=!0;var b=new clsModalPanel({onClick:function(){setTimeout(function(){a.screen.panel.removePanel(b)},10)}});a.screen.panel.appendPanel(b);b.dialogPanel=new cPanel({align:eAlign.eCenterVertical,shape:cPanel.cShapeRoundRect,
width:800,marginTop:80,marginBottom:80,border:1,borderColor:"#262626",borderRadius:16,backgroundColor:"#262626",onClick:function(){this.stopBubble=!0}});b.contentPanel.panels.push(b.dialogPanel);b.dialogPanel.headerPanel=new cPanel({align:eAlign.eTop,height:50,paddingLeft:20,backgroundColor:"#444444",color:"#eeeeee",fontSize:36,innerHTML:"About Problem Solver"});b.dialogPanel.panels.push(b.dialogPanel.headerPanel);b.dialogPanel.bottomPanel=new cPanel({align:eAlign.eBottom,height:70,paddingLeft:20,
backgroundColor:"#444444"});b.dialogPanel.panels.push(b.dialogPanel.bottomPanel);b.dialogPanel.bottomPanel.buttonPanel=new cPanel({align:eAlign.eCenterVertical,width:420,backgroundColor:"transparent"});b.dialogPanel.bottomPanel.panels.push(b.dialogPanel.bottomPanel.buttonPanel);b.dialogPanel.bottomPanel.buttonPanel.closeButton=new cPanel({align:eAlign.eCenterVertical,shape:cPanel.cShapeRoundRect,width:200,marginLeft:10,marginTop:10,marginBottom:10,padding:2,backgroundColor:"#262626",border:1,borderColor:"#262626",
borderRadius:16,color:"#eeeeee",fontSize:36,textAlign:eTextAlign.eCenter,innerHTML:"CLOSE",onClick:function(){this.stopBubble=!0;setTimeout(function(){a.screen.panel.removePanel(b)},10)}});b.dialogPanel.bottomPanel.buttonPanel.panels.push(b.dialogPanel.bottomPanel.buttonPanel.closeButton);b.dialogPanel.contentScrollPanel=new cScrollboxPanel({align:eAlign.eClient,panelBoxRoundedBorder:!1,marginLeft:10,marginRight:10,paddingTop:20,paddingBottom:20,backgroundColor:"transparent",boxBackgroundColor:"#262626",
scrollBarHandleColor:"#666666",autoHideScrollbar:!0});b.dialogPanel.panels.push(b.dialogPanel.contentScrollPanel);b.dialogPanel.messagePanel=new cPanel({align:eAlign.eTop,height:600,padding:20,backgroundColor:"#262626",color:"#eeeeee",fontSize:18,innerHTML:'<span style="font-style: italic;">A solution looking for a problem</span><br />\n<br />\nProblem Solver is the result of experimenting with JavaScript and a history of personal interest in AI and CS.\nProblem Solver is an online programmable "game tree viewer", a web application for those who are looking for a tool to analyse puzzles, problems and algorithms.\nMany simple puzzles (see the puzzles in the "examples" menu) can be modelled in Problem Solver, and it\'s solutions (goals) can simply be discovered in the "multiverse viewer".\nHowever, when modelling complex problems or puzzles, you will find that the multiverse (game tree) grows too fast, with no solution in sight.\nTherefore, Problem Solver is not necessarily intended for solving large complex problems, but merely a tool for gaining understanding and appreciation for the nature\nand complexity of a problem of interest.\nProblem Solver works best on a modern desktop PC or laptop with a large screen resolution.<br />\nPlease note that Problem Solver is still in the beta-phase of development.<br />\n<br />\nFeedback and comments are appreciated.<br />\n<br />\nTim Samshuijzen<br />\n<a href="mailto:timsamshuijzen@gmail.com" style="color: #cccccc; text-decoration: none;">timsamshuijzen@gmail.com</a><br />\n<a href="http://complexity.zone/" target="_blank" style="color: #cccccc; text-decoration: none;">complexity.zone</a><br />\n<br />\n'});
b.dialogPanel.contentScrollPanel.panelBox.panels.push(b.dialogPanel.messagePanel);b.contentPanel.rerender()}});this.panelTopMenu.panels.push(this.panelTopMenuAbout);this.panelTabMenu=new cTabMenuPanel({align:eAlign.eClient,color:"#ffffff",backgroundColor:"#262626",border:0,padding:0,panelHTML:"Welcome",closeImage:this.screen.getImageClone(cProblemSolverApp.cImageClose),tabs:[{id:"world",backgroundColor:"#98D47E",image:this.screen.getImageClone(cProblemSolverApp.cImageWorld)},{id:"changes",backgroundColor:"#96ceb4",
image:this.screen.getImageClone(cProblemSolverApp.cImageChanges)},{id:"evaluate",backgroundColor:"#FFAE3C",image:this.screen.getImageClone(cProblemSolverApp.cImageEvaluate)},{id:"multiverse",backgroundColor:"#777777",image:this.screen.getImageClone(cProblemSolverApp.cImageMultiverse)}]});this.screenPanel.panels.push(this.panelTabMenu);this.mainPagePanel=new cMainPagePanel({align:eAlign.eClient,backgroundColor:"transparent",screen:this.screen,viewWorldImageId:cProblemSolverApp.cImageViewWorldImage,
viewChangesImageId:cProblemSolverApp.cImageViewChangesImage,viewEvaluateImageId:cProblemSolverApp.cImageViewEvaluateImage,viewMultiverseImageId:cProblemSolverApp.cImageViewMultiverseImage,onWorldClick:function(){this.panelTabMenu.selectTabIndex(0)},onWorldClick_This:this,onChangesClick:function(){this.panelTabMenu.selectTabIndex(1)},onChangesClick_This:this,onEvaluateClick:function(){this.panelTabMenu.selectTabIndex(2)},onEvaluateClick_This:this,onMultiverseClick:function(){this.panelTabMenu.selectTabIndex(3)},
onMultiverseClick_This:this});this.panelTabMenu.rootClientPanel.panels.push(this.mainPagePanel);this.viewWorldPanel=new cViewWorldPanel({align:eAlign.eClient,backgroundColor:"transparent",screen:this.screen,closeImage:cProblemSolverApp.cImageClose,refreshImage:cProblemSolverApp.cImageRefresh,addImage:cProblemSolverApp.cImageAdd,deleteImage:cProblemSolverApp.cImageDelete,upImage:cProblemSolverApp.cImageUp,downImage:cProblemSolverApp.cImageDown});this.panelTabMenu.getPanelById("world").panels.push(this.viewWorldPanel);
this.viewChangesPanel=new cViewChangesPanel({align:eAlign.eClient,backgroundColor:"transparent",screen:this.screen,closeImage:cProblemSolverApp.cImageClose,refreshImage:cProblemSolverApp.cImageRefresh,addImage:cProblemSolverApp.cImageAdd,deleteImage:cProblemSolverApp.cImageDelete,upImage:cProblemSolverApp.cImageUp,downImage:cProblemSolverApp.cImageDown});this.panelTabMenu.getPanelById("changes").panels.push(this.viewChangesPanel);this.viewEvaluatePanel=new cViewEvaluatePanel({align:eAlign.eClient,
backgroundColor:"transparent",screen:this.screen,closeImage:cProblemSolverApp.cImageClose,refreshImage:cProblemSolverApp.cImageRefresh,addImage:cProblemSolverApp.cImageAdd,deleteImage:cProblemSolverApp.cImageDelete,upImage:cProblemSolverApp.cImageUp,downImage:cProblemSolverApp.cImageDown});this.panelTabMenu.getPanelById("evaluate").panels.push(this.viewEvaluatePanel);this.viewMultiversePanel=new cViewMultiversePanel({align:eAlign.eClient,backgroundColor:"transparent",screen:this.screen,closeImage:cProblemSolverApp.cImageClose,
refreshImage:cProblemSolverApp.cImageRefresh,addImage:cProblemSolverApp.cImageAdd,deleteImage:cProblemSolverApp.cImageDelete,upImage:cProblemSolverApp.cImageUp,downImage:cProblemSolverApp.cImageDown,futureAxisImage:cProblemSolverApp.cFutureAxis,optionsAxisImage:cProblemSolverApp.cOptionsAxis,expandImage:cProblemSolverApp.cExpand,changesImage:cProblemSolverApp.cImageChanges,evaluateImage:cProblemSolverApp.cImageEvaluate});var b=this.panelTabMenu.getPanelById("multiverse");b.panels.push(this.viewMultiversePanel);
b.onVisible=this.viewMultiversePanel.onVisible;b.onVisibleCallee=this.viewMultiversePanel;b.onInvisible=this.viewMultiversePanel.onInvisible;b.onInvisibleCallee=this.viewMultiversePanel;this.screen.onResize()})}cProblemSolverApp.deriveFrom(cApp);
(function(){cProblemSolverApp.cImageProblemSolver=1;cProblemSolverApp.cImageViewWorldImage=2;cProblemSolverApp.cImageViewChangesImage=3;cProblemSolverApp.cImageViewEvaluateImage=4;cProblemSolverApp.cImageViewMultiverseImage=5;cProblemSolverApp.cImageWorld=6;cProblemSolverApp.cImageChanges=7;cProblemSolverApp.cImageEvaluate=8;cProblemSolverApp.cImageAgent=9;cProblemSolverApp.cImageMultiverse=10;cProblemSolverApp.cImageQuestion=11;cProblemSolverApp.cImageClose=12;cProblemSolverApp.cImageRefresh=13;
cProblemSolverApp.cImageAdd=14;cProblemSolverApp.cImageDelete=15;cProblemSolverApp.cImageUp=16;cProblemSolverApp.cImageDown=17;cProblemSolverApp.cFutureAxis=18;cProblemSolverApp.cOptionsAxis=19;cProblemSolverApp.cExpand=20;cProblemSolverApp.prototype.resourcesLoaded=!1;cProblemSolverApp.prototype.actionSandboxIFrame=null;cProblemSolverApp.prototype.actionSandboxIFrame_Initialized=!1;cProblemSolverApp.prototype.evaluationSandboxIFrame=null;cProblemSolverApp.prototype.evaluationSandboxIFrame_Initialized=
!1;cProblemSolverApp.prototype.screenPanel=null;cProblemSolverApp.prototype.panelTopMenu=null;cProblemSolverApp.prototype.panelTopMenuLogo=null;cProblemSolverApp.prototype.panelTopMenuFile=null;cProblemSolverApp.prototype.panelTopMenuClear=null;cProblemSolverApp.prototype.panelTopMenuAbout=null;cProblemSolverApp.prototype.panelTopMenuLogoBetaAndCopyright=null;cProblemSolverApp.prototype.panelTabMenu=null;cProblemSolverApp.prototype.mainPagePanel=null;cProblemSolverApp.prototype.viewWorldPanel=null;
cProblemSolverApp.prototype.viewChangesPanel=null;cProblemSolverApp.prototype.viewEvaluatePanel=null;cProblemSolverApp.prototype.viewMultiversePanel=null;cProblemSolverApp.prototype.onResize=function(){};cProblemSolverApp.prototype.onPostResize=function(){};cProblemSolverApp.prototype.onMouseDown=function(){};cProblemSolverApp.prototype.onMouseMove=function(){};cProblemSolverApp.prototype.onMouseUp=function(){};cProblemSolverApp.prototype.updateSandboxInitialized=function(){this.actionSandboxIFrame_Initialized&&
this.evaluationSandboxIFrame_Initialized&&0<cFilePresets.presets.length&&(Model.loadFile(cFilePresets.presets[0]),this.viewWorldPanel.reloadWorld(),this.viewChangesPanel.reloadWorld(),this.viewEvaluatePanel.reloadWorld())}})();var lApp=null;function Main(){lApp=new cProblemSolverApp(document.body)}cDOM.registerEvent(window,"load",Main);
